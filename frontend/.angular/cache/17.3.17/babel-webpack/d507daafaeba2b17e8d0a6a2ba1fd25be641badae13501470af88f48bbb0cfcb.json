{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class GuardService {\n  // Uncomment this when you are ready to connect to your Node.js API\n  // private apiUrl = 'http://localhost:3000/api/guards';\n  // constructor(private http: HttpClient) { }\n  constructor() {\n    // 1. Setup Mock Data (Matching your screenshot)\n    this.initialGuards = [{\n      id: 1,\n      name: 'Raj Kumar',\n      mobile: '+91 98765 43210',\n      gate: 'Gate 1'\n    }, {\n      id: 2,\n      name: 'Suresh Selvam',\n      mobile: '+91 99887 76655',\n      gate: 'Gate 2'\n    }];\n    // 2. Create a reactive stream (BehaviorSubject) holding the guards array\n    this.guardsSubject = new BehaviorSubject(this.initialGuards);\n    // Expose the stream as an Observable so components can subscribe to it\n    this.guards$ = this.guardsSubject.asObservable();\n  }\n  /**\n   * Fetch all guards (Reactive)\n   */\n  getGuards() {\n    return this.guards$;\n    // BACKEND INTEGRATION READY:\n    // return this.http.get<Guard[]>(this.apiUrl);\n  }\n  /**\n   * Add a new guard to the system\n   */\n  addGuard(newGuard) {\n    // Generate a random ID for the demo\n    const guardWithId = {\n      ...newGuard,\n      id: Math.random().toString(36).substr(2, 9)\n    };\n    const currentGuards = this.guardsSubject.getValue();\n    this.guardsSubject.next([...currentGuards, guardWithId]);\n    // BACKEND INTEGRATION READY:\n    // return this.http.post<Guard>(this.apiUrl, newGuard).subscribe(res => {\n    //   this.guardsSubject.next([...currentGuards, res]);\n    // });\n  }\n  /**\n   * Update an existing guard's assignment\n   */\n  updateGuard(updatedGuard) {\n    const currentGuards = this.guardsSubject.getValue();\n    const index = currentGuards.findIndex(g => g.id === updatedGuard.id);\n    if (index !== -1) {\n      currentGuards[index] = updatedGuard;\n      this.guardsSubject.next([...currentGuards]);\n    }\n    // BACKEND INTEGRATION READY:\n    // return this.http.put<Guard>(`${this.apiUrl}/${updatedGuard.id}`, updatedGuard).subscribe();\n  }\n  /**\n   * Remove a guard from the system\n   */\n  deleteGuard(guardId) {\n    const currentGuards = this.guardsSubject.getValue();\n    const filteredGuards = currentGuards.filter(g => g.id !== guardId);\n    this.guardsSubject.next(filteredGuards);\n    // BACKEND INTEGRATION READY:\n    // return this.http.delete(`${this.apiUrl}/${guardId}`).subscribe();\n  }\n  static {\n    this.ɵfac = function GuardService_Factory(t) {\n      return new (t || GuardService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: GuardService,\n      factory: GuardService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","GuardService","constructor","initialGuards","id","name","mobile","gate","guardsSubject","guards$","asObservable","getGuards","addGuard","newGuard","guardWithId","Math","random","toString","substr","currentGuards","getValue","next","updateGuard","updatedGuard","index","findIndex","g","deleteGuard","guardId","filteredGuards","filter","factory","ɵfac","providedIn"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\services\\guard.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http'; // Ready for your Node.js backend\n\n// Defining the interface here (or you can import it from your guard.model.ts)\nexport interface Guard {\n  id: string | number;\n  name: string;\n  mobile: string;\n  gate: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GuardService {\n\n  // 1. Setup Mock Data (Matching your screenshot)\n  private initialGuards: Guard[] = [\n    { id: 1, name: 'Raj Kumar', mobile: '+91 98765 43210', gate: 'Gate 1' },\n    { id: 2, name: 'Suresh Selvam', mobile: '+91 99887 76655', gate: 'Gate 2' }\n  ];\n\n  // 2. Create a reactive stream (BehaviorSubject) holding the guards array\n  private guardsSubject = new BehaviorSubject<Guard[]>(this.initialGuards);\n  \n  // Expose the stream as an Observable so components can subscribe to it\n  public guards$ = this.guardsSubject.asObservable();\n\n  // Uncomment this when you are ready to connect to your Node.js API\n  // private apiUrl = 'http://localhost:3000/api/guards';\n  // constructor(private http: HttpClient) { }\n  \n  constructor() { }\n\n  /**\n   * Fetch all guards (Reactive)\n   */\n  getGuards(): Observable<Guard[]> {\n    return this.guards$;\n    \n    // BACKEND INTEGRATION READY:\n    // return this.http.get<Guard[]>(this.apiUrl);\n  }\n\n  /**\n   * Add a new guard to the system\n   */\n  addGuard(newGuard: Omit<Guard, 'id'>) {\n    // Generate a random ID for the demo\n    const guardWithId: Guard = {\n      ...newGuard,\n      id: Math.random().toString(36).substr(2, 9)\n    };\n\n    const currentGuards = this.guardsSubject.getValue();\n    this.guardsSubject.next([...currentGuards, guardWithId]);\n\n    // BACKEND INTEGRATION READY:\n    // return this.http.post<Guard>(this.apiUrl, newGuard).subscribe(res => {\n    //   this.guardsSubject.next([...currentGuards, res]);\n    // });\n  }\n\n  /**\n   * Update an existing guard's assignment\n   */\n  updateGuard(updatedGuard: Guard) {\n    const currentGuards = this.guardsSubject.getValue();\n    const index = currentGuards.findIndex(g => g.id === updatedGuard.id);\n    \n    if (index !== -1) {\n      currentGuards[index] = updatedGuard;\n      this.guardsSubject.next([...currentGuards]);\n    }\n\n    // BACKEND INTEGRATION READY:\n    // return this.http.put<Guard>(`${this.apiUrl}/${updatedGuard.id}`, updatedGuard).subscribe();\n  }\n\n  /**\n   * Remove a guard from the system\n   */\n  deleteGuard(guardId: string | number) {\n    const currentGuards = this.guardsSubject.getValue();\n    const filteredGuards = currentGuards.filter(g => g.id !== guardId);\n    \n    this.guardsSubject.next(filteredGuards);\n\n    // BACKEND INTEGRATION READY:\n    // return this.http.delete(`${this.apiUrl}/${guardId}`).subscribe();\n  }\n}"],"mappings":"AACA,SAASA,eAAe,QAAoB,MAAM;;AAclD,OAAM,MAAOC,YAAY;EAcvB;EACA;EACA;EAEAC,YAAA;IAhBA;IACQ,KAAAC,aAAa,GAAY,CAC/B;MAAEC,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE,WAAW;MAAEC,MAAM,EAAE,iBAAiB;MAAEC,IAAI,EAAE;IAAQ,CAAE,EACvE;MAAEH,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE,eAAe;MAAEC,MAAM,EAAE,iBAAiB;MAAEC,IAAI,EAAE;IAAQ,CAAE,CAC5E;IAED;IACQ,KAAAC,aAAa,GAAG,IAAIR,eAAe,CAAU,IAAI,CAACG,aAAa,CAAC;IAExE;IACO,KAAAM,OAAO,GAAG,IAAI,CAACD,aAAa,CAACE,YAAY,EAAE;EAMlC;EAEhB;;;EAGAC,SAASA,CAAA;IACP,OAAO,IAAI,CAACF,OAAO;IAEnB;IACA;EACF;EAEA;;;EAGAG,QAAQA,CAACC,QAA2B;IAClC;IACA,MAAMC,WAAW,GAAU;MACzB,GAAGD,QAAQ;MACXT,EAAE,EAAEW,IAAI,CAACC,MAAM,EAAE,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC;KAC3C;IAED,MAAMC,aAAa,GAAG,IAAI,CAACX,aAAa,CAACY,QAAQ,EAAE;IACnD,IAAI,CAACZ,aAAa,CAACa,IAAI,CAAC,CAAC,GAAGF,aAAa,EAAEL,WAAW,CAAC,CAAC;IAExD;IACA;IACA;IACA;EACF;EAEA;;;EAGAQ,WAAWA,CAACC,YAAmB;IAC7B,MAAMJ,aAAa,GAAG,IAAI,CAACX,aAAa,CAACY,QAAQ,EAAE;IACnD,MAAMI,KAAK,GAAGL,aAAa,CAACM,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACtB,EAAE,KAAKmB,YAAY,CAACnB,EAAE,CAAC;IAEpE,IAAIoB,KAAK,KAAK,CAAC,CAAC,EAAE;MAChBL,aAAa,CAACK,KAAK,CAAC,GAAGD,YAAY;MACnC,IAAI,CAACf,aAAa,CAACa,IAAI,CAAC,CAAC,GAAGF,aAAa,CAAC,CAAC;IAC7C;IAEA;IACA;EACF;EAEA;;;EAGAQ,WAAWA,CAACC,OAAwB;IAClC,MAAMT,aAAa,GAAG,IAAI,CAACX,aAAa,CAACY,QAAQ,EAAE;IACnD,MAAMS,cAAc,GAAGV,aAAa,CAACW,MAAM,CAACJ,CAAC,IAAIA,CAAC,CAACtB,EAAE,KAAKwB,OAAO,CAAC;IAElE,IAAI,CAACpB,aAAa,CAACa,IAAI,CAACQ,cAAc,CAAC;IAEvC;IACA;EACF;;;uBA5EW5B,YAAY;IAAA;EAAA;;;aAAZA,YAAY;MAAA8B,OAAA,EAAZ9B,YAAY,CAAA+B,IAAA;MAAAC,UAAA,EAFX;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}