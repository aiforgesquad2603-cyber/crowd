{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = (a0, a1) => ({\n  \"bg-teal-500/20 text-teal-400 border border-teal-500 shadow-[0_0_15px_rgba(20,184,166,0.4)]\": a0,\n  \"bg-slate-700 text-white hover:bg-slate-600\": a1\n});\nconst _c1 = (a0, a1) => ({\n  \"bg-orange-500/20 text-orange-400 border border-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.4)]\": a0,\n  \"bg-slate-700 text-white hover:bg-slate-600\": a1\n});\nexport class LiveMonitoringComponent {\n  constructor(http) {\n    this.http = http;\n    this.cameraNodes = [];\n    this.selectedCamera = null;\n    this.liveStreamUrl = '';\n    // Track which view is currently active\n    this.currentMode = 'object';\n  }\n  ngOnInit() {\n    this.loadCameras();\n  }\n  loadCameras() {\n    this.http.get('http://localhost:8000/api/cameras').subscribe({\n      next: cams => {\n        this.cameraNodes = cams;\n        const firstLive = cams.find(c => c.status === 'Live' || c.rtsp_url === '0') || cams[0];\n        if (firstLive) {\n          this.selectCamera(firstLive);\n        }\n      },\n      error: err => console.error(\"Error fetching cameras\", err)\n    });\n  }\n  selectCamera(cam) {\n    this.selectedCamera = cam;\n    this.updateStreamUrl();\n  }\n  // --- NEW: Toggle Function! ---\n  setMode(newMode) {\n    this.currentMode = newMode;\n    this.updateStreamUrl();\n  }\n  updateStreamUrl() {\n    if (this.selectedCamera && (this.selectedCamera.status === 'Live' || this.selectedCamera.rtsp_url === '0')) {\n      // We append a random timestamp so the browser instantly refreshes the image feed!\n      const t = new Date().getTime();\n      this.liveStreamUrl = `http://localhost:8000/api/video-feed/${this.selectedCamera.gate}?mode=${this.currentMode}&t=${t}`;\n    } else {\n      this.liveStreamUrl = '';\n    }\n  }\n  static {\n    this.ɵfac = function LiveMonitoringComponent_Factory(t) {\n      return new (t || LiveMonitoringComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LiveMonitoringComponent,\n      selectors: [[\"app-live-monitoring\"]],\n      decls: 13,\n      vars: 8,\n      consts: [[1, \"mb-6\", \"flex\", \"justify-between\", \"items-center\", \"bg-[#1e293b]\", \"p-5\", \"rounded-xl\", \"border\", \"border-slate-700/50\", \"shadow-lg\"], [1, \"text-3xl\", \"font-bold\", \"text-white\", \"tracking-wide\", \"flex\", \"items-center\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-8\", \"h-8\", \"mr-3\", \"text-blue-500\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"], [1, \"text-sm\", \"text-gray-400\", \"mt-1\", \"ml-11\"], [1, \"flex\", \"space-x-3\"], [1, \"px-5\", \"py-2\", \"rounded\", \"font-bold\", \"text-sm\", \"transition-all\", \"duration-300\", 3, \"click\", \"ngClass\"]],\n      template: function LiveMonitoringComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\")(2, \"h1\", 1);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(3, \"svg\", 2);\n          i0.ɵɵelement(4, \"path\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(5, \" Live AI Monitoring \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(6, \"p\", 4);\n          i0.ɵɵtext(7, \"Computer Vision based people detection & risk analysis\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 5)(9, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function LiveMonitoringComponent_Template_button_click_9_listener() {\n            return ctx.setMode(\"object\");\n          });\n          i0.ɵɵtext(10, \" Object Detection \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function LiveMonitoringComponent_Template_button_click_11_listener() {\n            return ctx.setMode(\"thermal\");\n          });\n          i0.ɵɵtext(12, \" Thermal Density \");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, ctx.currentMode === \"object\", ctx.currentMode !== \"object\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c1, ctx.currentMode === \"thermal\", ctx.currentMode !== \"thermal\"));\n        }\n      },\n      dependencies: [i2.NgClass],\n      styles: [\"\\n\\n\\n\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpdmUtbW9uaXRvcmluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdCQUF3QjtBQUN4QixvREFBb0QiLCJmaWxlIjoibGl2ZS1tb25pdG9yaW5nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBUYWlsd2luZCBoYW5kbGVzIFVJICovXG4vKiBGdXR1cmU6IHNpcmVuIGFuaW1hdGlvbiwgdmlkZW8gb3ZlcmxheSwgaGVhdG1hcCAqL1xuIl19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbGl2ZS1tb25pdG9yaW5nL2xpdmUtbW9uaXRvcmluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdCQUF3QjtBQUN4QixvREFBb0Q7O0FBRXBELGdZQUFnWSIsInNvdXJjZXNDb250ZW50IjpbIi8qIFRhaWx3aW5kIGhhbmRsZXMgVUkgKi9cbi8qIEZ1dHVyZTogc2lyZW4gYW5pbWF0aW9uLCB2aWRlbyBvdmVybGF5LCBoZWF0bWFwICovXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["LiveMonitoringComponent","constructor","http","cameraNodes","selectedCamera","liveStreamUrl","currentMode","ngOnInit","loadCameras","get","subscribe","next","cams","firstLive","find","c","status","rtsp_url","selectCamera","error","err","console","cam","updateStreamUrl","setMode","newMode","t","Date","getTime","gate","i0","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","LiveMonitoringComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","LiveMonitoringComponent_Template_button_click_9_listener","LiveMonitoringComponent_Template_button_click_11_listener","ɵɵadvance","ɵɵproperty","ɵɵpureFunction2","_c0","_c1"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\live-monitoring\\live-monitoring.component.ts","C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\live-monitoring\\live-monitoring.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-live-monitoring',\n  templateUrl: './live-monitoring.component.html',\n  styleUrls: ['./live-monitoring.component.css']\n})\nexport class LiveMonitoringComponent implements OnInit {\n  \n  cameraNodes: any[] = [];\n  selectedCamera: any = null;\n  liveStreamUrl: string = '';\n  \n  // Track which view is currently active\n  currentMode: string = 'object'; \n\n  constructor(private http: HttpClient) {}\n\n  ngOnInit(): void {\n    this.loadCameras();\n  }\n\n  loadCameras() {\n    this.http.get<any[]>('http://localhost:8000/api/cameras').subscribe({\n      next: (cams) => {\n        this.cameraNodes = cams;\n        const firstLive = cams.find(c => c.status === 'Live' || c.rtsp_url === '0') || cams[0];\n        if (firstLive) {\n          this.selectCamera(firstLive);\n        }\n      },\n      error: (err) => console.error(\"Error fetching cameras\", err)\n    });\n  }\n\n  selectCamera(cam: any) {\n    this.selectedCamera = cam;\n    this.updateStreamUrl();\n  }\n\n  // --- NEW: Toggle Function! ---\n  setMode(newMode: string) {\n    this.currentMode = newMode;\n    this.updateStreamUrl();\n  }\n\n  updateStreamUrl() {\n    if (this.selectedCamera && (this.selectedCamera.status === 'Live' || this.selectedCamera.rtsp_url === '0')) {\n      // We append a random timestamp so the browser instantly refreshes the image feed!\n      const t = new Date().getTime();\n      this.liveStreamUrl = `http://localhost:8000/api/video-feed/${this.selectedCamera.gate}?mode=${this.currentMode}&t=${t}`;\n    } else {\n      this.liveStreamUrl = '';\n    }\n  }\n}","<div class=\"mb-6 flex justify-between items-center bg-[#1e293b] p-5 rounded-xl border border-slate-700/50 shadow-lg\">\n    <div>\n      <h1 class=\"text-3xl font-bold text-white tracking-wide flex items-center\">\n        <svg class=\"w-8 h-8 mr-3 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg>\n        Live AI Monitoring\n      </h1>\n      <p class=\"text-sm text-gray-400 mt-1 ml-11\">Computer Vision based people detection & risk analysis</p>\n    </div>\n    \n    <div class=\"flex space-x-3\">\n      <button (click)=\"setMode('object')\"\n              class=\"px-5 py-2 rounded font-bold text-sm transition-all duration-300\"\n              [ngClass]=\"{'bg-teal-500/20 text-teal-400 border border-teal-500 shadow-[0_0_15px_rgba(20,184,166,0.4)]': currentMode === 'object', 'bg-slate-700 text-white hover:bg-slate-600': currentMode !== 'object'}\">\n        Object Detection\n      </button>\n      \n      <button (click)=\"setMode('thermal')\"\n              class=\"px-5 py-2 rounded font-bold text-sm transition-all duration-300\"\n              [ngClass]=\"{'bg-orange-500/20 text-orange-400 border border-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.4)]': currentMode === 'thermal', 'bg-slate-700 text-white hover:bg-slate-600': currentMode !== 'thermal'}\">\n        Thermal Density\n      </button>\n    </div>\n  </div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}