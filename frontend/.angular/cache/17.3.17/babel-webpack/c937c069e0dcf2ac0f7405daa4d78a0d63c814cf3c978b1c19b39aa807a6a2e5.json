{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction AuthComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"label\", 12);\n    i0.ɵɵtext(2, \"Full Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AuthComponent_div_13_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.authData.name, $event) || (ctx_r1.authData.name = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.authData.name);\n  }\n}\nfunction AuthComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"label\", 12);\n    i0.ɵɵtext(2, \"Mobile Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 21);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AuthComponent_div_18_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.authData.mobile, $event) || (ctx_r1.authData.mobile = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.authData.mobile);\n  }\n}\nfunction AuthComponent_button_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function AuthComponent_button_24_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleForgotPassword());\n    });\n    i0.ɵɵtext(1, \" Forgot Password? \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AuthComponent_p_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function AuthComponent_p_27_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleMode());\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.isLoginMode ? \"Don't have an account?\" : \"Already have an account?\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.isLoginMode ? \"Sign Up\" : \"Sign In\", \" \");\n  }\n}\nfunction AuthComponent_p_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p\", 23);\n    i0.ɵɵtext(1, \" Remember your password? \");\n    i0.ɵɵelementStart(2, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function AuthComponent_p_28_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.backToLogin());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(3, \"svg\", 26);\n    i0.ɵɵelement(4, \"path\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" Back to Login \");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let AuthComponent = /*#__PURE__*/(() => {\n  class AuthComponent {\n    constructor(http, router) {\n      this.http = http;\n      this.router = router;\n      this.isLoginMode = true;\n      this.isForgotPasswordMode = false; // <-- NEW STATE!\n      this.isLoading = false;\n      this.authData = {\n        name: '',\n        email: '',\n        mobile: '',\n        password: ''\n      };\n    }\n    ngOnInit() {\n      if (localStorage.getItem('isLoggedIn') === 'true') {\n        this.router.navigate(['/dashboard']);\n      }\n    }\n    toggleMode() {\n      this.isLoginMode = !this.isLoginMode;\n      this.isForgotPasswordMode = false;\n    }\n    // --- NEW: Trigger Forgot Password UI ---\n    toggleForgotPassword() {\n      this.isForgotPasswordMode = true;\n      this.isLoginMode = false;\n      this.authData.password = ''; // Clear password field\n    }\n    // --- NEW: Go back to Login ---\n    backToLogin() {\n      this.isForgotPasswordMode = false;\n      this.isLoginMode = true;\n    }\n    onSubmit() {\n      this.isLoading = true;\n      // 1. FORGOT PASSWORD FLOW\n      if (this.isForgotPasswordMode) {\n        const resetPayload = {\n          email: this.authData.email,\n          new_password: this.authData.password\n        };\n        this.http.post('http://localhost:8000/api/reset-password', resetPayload).subscribe({\n          next: res => {\n            this.isLoading = false;\n            alert(\"✅ Password Reset Successful! Please Login with your new password.\");\n            this.backToLogin();\n          },\n          error: err => {\n            this.isLoading = false;\n            alert(\"❌ \" + (err.error.detail || \"Reset Failed\"));\n          }\n        });\n        return; // Stop here\n      }\n      // 2. SIGN IN FLOW\n      if (this.isLoginMode) {\n        const loginPayload = {\n          email: this.authData.email,\n          password: this.authData.password\n        };\n        this.http.post('http://localhost:8000/api/login', loginPayload).subscribe({\n          next: res => {\n            this.isLoading = false;\n            localStorage.setItem('isLoggedIn', 'true');\n            localStorage.setItem('userName', res.name);\n            localStorage.setItem('userEmail', res.email); // <-- NEW: SAVING THE UNIQUE ACCOUNT ID!\n            window.location.href = '/dashboard';\n          },\n          error: err => {\n            this.isLoading = false;\n            alert(\"❌ \" + (err.error.detail || \"Login Failed\"));\n          }\n        });\n      }\n      // 3. SIGN UP FLOW\n      else {\n        this.http.post('http://localhost:8000/api/signup', this.authData).subscribe({\n          next: res => {\n            this.isLoading = false;\n            alert(\"✅ Registration Successful! Please Login.\");\n            this.toggleMode();\n          },\n          error: err => {\n            this.isLoading = false;\n            alert(\"❌ \" + (err.error.detail || \"Registration Failed\"));\n          }\n        });\n      }\n    }\n    static {\n      this.ɵfac = function AuthComponent_Factory(t) {\n        return new (t || AuthComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AuthComponent,\n        selectors: [[\"app-auth\"]],\n        decls: 29,\n        vars: 11,\n        consts: [[1, \"min-h-screen\", \"bg-[#0f172a]\", \"flex\", \"items-center\", \"justify-center\", \"p-4\"], [1, \"max-w-md\", \"w-full\", \"bg-[#1e293b]\", \"rounded-2xl\", \"shadow-2xl\", \"border\", \"border-slate-700\", \"overflow-hidden\", \"transition-all\", \"duration-300\"], [1, \"bg-gradient-to-r\", \"from-blue-600\", \"to-teal-500\", \"p-6\", \"text-center\"], [1, \"text-3xl\", \"font-extrabold\", \"text-white\", \"tracking-wider\", \"flex\", \"justify-center\", \"items-center\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-8\", \"h-8\", \"mr-2\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"], [1, \"text-teal-200\"], [1, \"text-blue-100\", \"mt-2\", \"text-sm\"], [1, \"p-8\"], [3, \"ngSubmit\"], [\"class\", \"mb-4\", 4, \"ngIf\"], [1, \"mb-4\"], [1, \"block\", \"text-gray-400\", \"text-xs\", \"font-bold\", \"mb-2\", \"uppercase\", \"tracking-wide\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", 1, \"w-full\", \"bg-[#0f172a]\", \"text-white\", \"border\", \"border-slate-600\", \"rounded-lg\", \"p-3\", \"outline-none\", \"focus:border-teal-500\", \"transition-colors\", 3, \"ngModelChange\", \"ngModel\"], [1, \"mb-2\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", 1, \"w-full\", \"bg-[#0f172a]\", \"text-white\", \"border\", \"border-slate-600\", \"rounded-lg\", \"p-3\", \"outline-none\", \"focus:border-teal-500\", \"transition-colors\", 3, \"ngModelChange\", \"ngModel\"], [1, \"text-right\", \"mb-6\", \"h-6\"], [\"type\", \"button\", \"class\", \"text-xs text-teal-400 hover:text-teal-300 font-semibold hover:underline transition-colors\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"w-full\", \"bg-teal-500\", \"hover:bg-teal-400\", \"text-white\", \"font-bold\", \"py-3\", \"px-4\", \"rounded-lg\", \"shadow-lg\", \"transition-transform\", \"transform\", \"hover:scale-[1.02]\", \"disabled:opacity-50\", 3, \"disabled\"], [\"class\", \"text-center text-gray-400 mt-6 text-sm\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"name\", \"required\", \"\", 1, \"w-full\", \"bg-[#0f172a]\", \"text-white\", \"border\", \"border-slate-600\", \"rounded-lg\", \"p-3\", \"outline-none\", \"focus:border-teal-500\", \"transition-colors\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"tel\", \"name\", \"mobile\", \"required\", \"\", 1, \"w-full\", \"bg-[#0f172a]\", \"text-white\", \"border\", \"border-slate-600\", \"rounded-lg\", \"p-3\", \"outline-none\", \"focus:border-teal-500\", \"transition-colors\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"button\", 1, \"text-xs\", \"text-teal-400\", \"hover:text-teal-300\", \"font-semibold\", \"hover:underline\", \"transition-colors\", 3, \"click\"], [1, \"text-center\", \"text-gray-400\", \"mt-6\", \"text-sm\"], [\"type\", \"button\", 1, \"text-teal-400\", \"font-bold\", \"hover:underline\", 3, \"click\"], [\"type\", \"button\", 1, \"text-teal-400\", \"font-bold\", \"hover:underline\", \"flex\", \"items-center\", \"justify-center\", \"mx-auto\", \"mt-1\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-4\", \"h-4\", \"mr-1\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M10 19l-7-7m0 0l7-7m-7 7h18\"]],\n        template: function AuthComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h2\", 3);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(4, \"svg\", 4);\n            i0.ɵɵelement(5, \"path\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(6, \" CrowdGuard\");\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(7, \"span\", 6);\n            i0.ɵɵtext(8, \"AI\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"p\", 7);\n            i0.ɵɵtext(10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"div\", 8)(12, \"form\", 9);\n            i0.ɵɵlistener(\"ngSubmit\", function AuthComponent_Template_form_ngSubmit_12_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵtemplate(13, AuthComponent_div_13_Template, 4, 1, \"div\", 10);\n            i0.ɵɵelementStart(14, \"div\", 11)(15, \"label\", 12);\n            i0.ɵɵtext(16, \"Email Address\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"input\", 13);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AuthComponent_Template_input_ngModelChange_17_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.authData.email, $event) || (ctx.authData.email = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(18, AuthComponent_div_18_Template, 4, 1, \"div\", 10);\n            i0.ɵɵelementStart(19, \"div\", 14)(20, \"label\", 12);\n            i0.ɵɵtext(21);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"input\", 15);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AuthComponent_Template_input_ngModelChange_22_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.authData.password, $event) || (ctx.authData.password = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(23, \"div\", 16);\n            i0.ɵɵtemplate(24, AuthComponent_button_24_Template, 2, 0, \"button\", 17);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"button\", 18);\n            i0.ɵɵtext(26);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(27, AuthComponent_p_27_Template, 4, 2, \"p\", 19)(28, AuthComponent_p_28_Template, 6, 0, \"p\", 19);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵtextInterpolate1(\" \", ctx.isForgotPasswordMode ? \"Securely reset your account password\" : ctx.isLoginMode ? \"Sign in to access Command Center\" : \"Register a new Security Admin\", \" \");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoginMode && !ctx.isForgotPasswordMode);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.authData.email);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoginMode && !ctx.isForgotPasswordMode);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate1(\" \", ctx.isForgotPasswordMode ? \"Enter New Password\" : \"Password\", \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.authData.password);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoginMode && !ctx.isForgotPasswordMode);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isLoading ? \"Processing...\" : ctx.isForgotPasswordMode ? \"RESET PASSWORD\" : ctx.isLoginMode ? \"SECURE LOGIN\" : \"CREATE ACCOUNT\", \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isForgotPasswordMode);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isForgotPasswordMode);\n          }\n        },\n        dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n        styles: [\".auth-container[_ngcontent-%COMP%]{width:100%}\"]\n      });\n    }\n  }\n  return AuthComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}