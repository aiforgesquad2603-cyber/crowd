{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ApiService = /*#__PURE__*/(() => {\n  class ApiService {\n    constructor(http) {\n      this.http = http;\n      // This is your Python FastAPI backend URL\n      this.apiUrl = 'http://localhost:8000/api/guards';\n      // This helps our Guard List auto-refresh when we add a new guard!\n      this.guardsUpdated = new BehaviorSubject(true);\n      this.guardsUpdated$ = this.guardsUpdated.asObservable();\n    }\n    // ðŸ”’ MAGIC FUNCTION: Gets your unique account email securely from browser\n    getUserEmail() {\n      return localStorage.getItem('userEmail') || '';\n    }\n    // --- ACCOUNT BASED APIs ---\n    // 1. Get all guards from MongoDB (ONLY FOR THIS USER)\n    getGuards() {\n      const email = this.getUserEmail();\n      // Attaching user_email to the URL fixes the 422 Error!\n      return this.http.get(`${this.apiUrl}?user_email=${email}`);\n    }\n    // 2. Send a new guard to MongoDB\n    addGuard(guardData) {\n      // Safety check: Attach email if it's missing in the data\n      if (!guardData.user_email) {\n        guardData.user_email = this.getUserEmail();\n      }\n      return this.http.post(this.apiUrl, guardData);\n    }\n    // 3. Delete a guard\n    deleteGuard(id) {\n      return this.http.delete(`${this.apiUrl}/${id}`);\n    }\n    // 4. Tell the app to refresh the table\n    notifyGuardsUpdated() {\n      this.guardsUpdated.next(true);\n    }\n    static {\n      this.Éµfac = function ApiService_Factory(t) {\n        return new (t || ApiService)(i0.ÉµÉµinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.Éµprov = /*@__PURE__*/i0.ÉµÉµdefineInjectable({\n        token: ApiService,\n        factory: ApiService.Éµfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ApiService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}