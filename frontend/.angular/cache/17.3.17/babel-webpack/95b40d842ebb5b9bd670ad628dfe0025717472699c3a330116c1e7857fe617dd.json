{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = (a0, a1) => ({\n  \"bg-teal-500/20 text-teal-400 border border-teal-500 shadow-[0_0_15px_rgba(20,184,166,0.4)]\": a0,\n  \"bg-slate-700 text-white hover:bg-slate-600\": a1\n});\nconst _c1 = (a0, a1) => ({\n  \"bg-orange-500/20 text-orange-400 border border-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.4)]\": a0,\n  \"bg-slate-700 text-white hover:bg-slate-600\": a1\n});\nconst _c2 = (a0, a1) => ({\n  \"border-teal-500 bg-[#0f172a] shadow-[0_0_15px_rgba(20,184,166,0.2)]\": a0,\n  \"border-slate-700 bg-[#1e293b] hover:border-slate-500\": a1\n});\nconst _c3 = (a0, a1) => ({\n  \"bg-green-500/20 text-green-400\": a0,\n  \"bg-slate-700 text-gray-400\": a1\n});\nfunction LiveMonitoringComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 22);\n  }\n}\nfunction LiveMonitoringComponent_img_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.liveStreamUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction LiveMonitoringComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 25);\n    i0.ɵɵelement(2, \"path\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"p\", 27);\n    i0.ɵɵtext(4, \"CAMERA OFFLINE OR UNCONFIGURED\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction LiveMonitoringComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" No cameras found. Please add them in RTSP Setup. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LiveMonitoringComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵlistener(\"click\", function LiveMonitoringComponent_div_30_Template_div_click_0_listener() {\n      const cam_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.selectCamera(cam_r3));\n    });\n    i0.ɵɵelementStart(1, \"div\", 30)(2, \"h4\", 31);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 32);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\", 33);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c2, (ctx_r0.selectedCamera == null ? null : ctx_r0.selectedCamera.gate) === cam_r3.gate, (ctx_r0.selectedCamera == null ? null : ctx_r0.selectedCamera.gate) !== cam_r3.gate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(cam_r3.gate);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(8, _c3, cam_r3.status === \"Live\" || cam_r3.rtsp_url === \"0\", cam_r3.status !== \"Live\" && cam_r3.rtsp_url !== \"0\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", cam_r3.status === \"Live\" || cam_r3.rtsp_url === \"0\" ? \"LIVE\" : \"OFFLINE\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cam_r3.rtsp_url || \"No URL Configured\");\n  }\n}\nexport class LiveMonitoringComponent {\n  // 3. INJECT THE SANITIZER HERE!\n  constructor(http, sanitizer) {\n    this.http = http;\n    this.sanitizer = sanitizer;\n    this.cameraNodes = [];\n    this.selectedCamera = null;\n    // 2. CHANGE TYPE TO ACCEPT SAFE URLS\n    this.liveStreamUrl = '';\n    // Track which view is currently active\n    this.currentMode = 'object';\n    // Multi-tenant Account ID\n    this.userEmail = '';\n  }\n  ngOnInit() {\n    // Securely fetch the logged-in user's email\n    this.userEmail = localStorage.getItem('userEmail') || '';\n    // Load cameras for this account\n    this.loadCameras();\n  }\n  loadCameras() {\n    if (!this.userEmail) return; // Stop if no email\n    // Fetch cameras ONLY for this specific user account!\n    this.http.get(`http://localhost:8000/api/cameras?user_email=${this.userEmail}`).subscribe({\n      next: cams => {\n        this.cameraNodes = cams;\n        const firstLive = cams.find(c => c.status === 'Live' || c.rtsp_url === '0') || cams[0];\n        if (firstLive) {\n          this.selectCamera(firstLive);\n        }\n      },\n      error: err => console.error(\"Error fetching cameras\", err)\n    });\n  }\n  selectCamera(cam) {\n    this.selectedCamera = cam;\n    this.updateStreamUrl();\n  }\n  // Toggle Function! \n  setMode(newMode) {\n    this.currentMode = newMode;\n    this.updateStreamUrl();\n  }\n  updateStreamUrl() {\n    if (this.selectedCamera && (this.selectedCamera.status === 'Live' || this.selectedCamera.rtsp_url === '0')) {\n      const t = new Date().getTime();\n      const rawUrl = `http://localhost:8000/api/video-feed/${this.selectedCamera.gate}?user_email=${this.userEmail}&mode=${this.currentMode}&t=${t}`;\n      // 4. SECURE STREAM BYPASS: Tell Angular this raw URL is 100% safe to display!\n      this.liveStreamUrl = this.sanitizer.bypassSecurityTrustResourceUrl(rawUrl);\n    } else {\n      this.liveStreamUrl = '';\n    }\n  }\n  static {\n    this.ɵfac = function LiveMonitoringComponent_Factory(t) {\n      return new (t || LiveMonitoringComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.DomSanitizer));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LiveMonitoringComponent,\n      selectors: [[\"app-live-monitoring\"]],\n      decls: 31,\n      vars: 14,\n      consts: [[1, \"min-h-screen\", \"bg-[#0f172a]\", \"p-6\", \"lg:p-8\", \"font-sans\", \"text-gray-300\"], [1, \"mb-6\", \"flex\", \"flex-col\", \"md:flex-row\", \"justify-between\", \"items-start\", \"md:items-center\", \"bg-[#1e293b]\", \"p-5\", \"rounded-xl\", \"border\", \"border-slate-700/50\", \"shadow-lg\", \"gap-4\"], [1, \"text-3xl\", \"font-bold\", \"text-white\", \"tracking-wide\", \"flex\", \"items-center\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-8\", \"h-8\", \"mr-3\", \"text-blue-500\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"], [1, \"text-sm\", \"text-gray-400\", \"mt-1\", \"ml-11\"], [1, \"flex\", \"space-x-3\"], [1, \"px-5\", \"py-2\", \"rounded\", \"font-bold\", \"text-sm\", \"transition-all\", \"duration-300\", 3, \"click\", \"ngClass\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-4\", \"gap-6\", \"h-[70vh]\"], [1, \"lg:col-span-3\", \"bg-black\", \"border\", \"border-slate-700/50\", \"rounded-xl\", \"overflow-hidden\", \"relative\", \"shadow-2xl\", \"flex\", \"items-center\", \"justify-center\"], [1, \"absolute\", \"top-0\", \"left-0\", \"right-0\", \"bg-gradient-to-b\", \"from-black/80\", \"to-transparent\", \"p-4\", \"z-10\", \"flex\", \"justify-between\"], [1, \"flex\", \"items-center\"], [\"class\", \"w-3 h-3 bg-red-500 rounded-full animate-pulse mr-3\", 4, \"ngIf\"], [1, \"text-xl\", \"font-bold\", \"text-white\", \"tracking-widest\"], [1, \"ml-3\", \"border\", \"border-gray-500\", \"text-gray-400\", \"text-[10px]\", \"px-2\", \"py-0.5\", \"rounded\"], [\"class\", \"w-full h-full object-contain\", \"alt\", \"Live CCTV Feed\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"text-center\", 4, \"ngIf\"], [1, \"lg:col-span-1\", \"bg-[#1e293b]/50\", \"border\", \"border-slate-700/50\", \"rounded-xl\", \"p-4\", \"overflow-y-auto\"], [1, \"text-xs\", \"font-bold\", \"text-gray-400\", \"uppercase\", \"tracking-widest\", \"mb-4\"], [\"class\", \"text-sm text-gray-500 text-center mt-10\", 4, \"ngIf\"], [1, \"space-y-3\"], [\"class\", \"p-4 rounded-lg cursor-pointer transition-all border-2\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"w-3\", \"h-3\", \"bg-red-500\", \"rounded-full\", \"animate-pulse\", \"mr-3\"], [\"alt\", \"Live CCTV Feed\", 1, \"w-full\", \"h-full\", \"object-contain\", 3, \"src\"], [1, \"text-center\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-16\", \"h-16\", \"text-slate-600\", \"mx-auto\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414\"], [1, \"text-slate-500\", \"font-bold\", \"uppercase\", \"tracking-widest\"], [1, \"text-sm\", \"text-gray-500\", \"text-center\", \"mt-10\"], [1, \"p-4\", \"rounded-lg\", \"cursor-pointer\", \"transition-all\", \"border-2\", 3, \"click\", \"ngClass\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-2\"], [1, \"font-bold\", \"text-white\"], [1, \"text-[10px]\", \"font-bold\", \"px-2\", \"py-1\", \"rounded\", 3, \"ngClass\"], [1, \"text-[10px]\", \"text-gray-500\", \"break-all\"]],\n      template: function LiveMonitoringComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h1\", 2);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(4, \"svg\", 3);\n          i0.ɵɵelement(5, \"path\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(6, \" Live AI Monitoring \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(7, \"p\", 5);\n          i0.ɵɵtext(8, \"Computer Vision based people detection & risk analysis\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 6)(10, \"button\", 7);\n          i0.ɵɵlistener(\"click\", function LiveMonitoringComponent_Template_button_click_10_listener() {\n            return ctx.setMode(\"object\");\n          });\n          i0.ɵɵtext(11, \" Object Detection \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"button\", 7);\n          i0.ɵɵlistener(\"click\", function LiveMonitoringComponent_Template_button_click_12_listener() {\n            return ctx.setMode(\"thermal\");\n          });\n          i0.ɵɵtext(13, \" Thermal Density \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(14, \"div\", 8)(15, \"div\", 9)(16, \"div\", 10)(17, \"div\", 11);\n          i0.ɵɵtemplate(18, LiveMonitoringComponent_div_18_Template, 1, 0, \"div\", 12);\n          i0.ɵɵelementStart(19, \"h2\", 13);\n          i0.ɵɵtext(20);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"span\", 14);\n          i0.ɵɵtext(22, \"REC\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(23, LiveMonitoringComponent_img_23_Template, 1, 1, \"img\", 15)(24, LiveMonitoringComponent_div_24_Template, 5, 0, \"div\", 16);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 17)(26, \"h3\", 18);\n          i0.ɵɵtext(27, \"CAMERA NODES\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(28, LiveMonitoringComponent_div_28_Template, 2, 0, \"div\", 19);\n          i0.ɵɵelementStart(29, \"div\", 20);\n          i0.ɵɵtemplate(30, LiveMonitoringComponent_div_30_Template, 8, 11, \"div\", 21);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(8, _c0, ctx.currentMode === \"object\", ctx.currentMode !== \"object\"));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(11, _c1, ctx.currentMode === \"thermal\", ctx.currentMode !== \"thermal\"));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.liveStreamUrl);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate((ctx.selectedCamera == null ? null : ctx.selectedCamera.gate) || \"NO SIGNAL\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.liveStreamUrl);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.liveStreamUrl);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.cameraNodes.length === 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.cameraNodes);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf],\n      styles: [\"\\n\\n\\n\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpdmUtbW9uaXRvcmluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdCQUF3QjtBQUN4QixvREFBb0QiLCJmaWxlIjoibGl2ZS1tb25pdG9yaW5nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBUYWlsd2luZCBoYW5kbGVzIFVJICovXG4vKiBGdXR1cmU6IHNpcmVuIGFuaW1hdGlvbiwgdmlkZW8gb3ZlcmxheSwgaGVhdG1hcCAqL1xuIl19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbGl2ZS1tb25pdG9yaW5nL2xpdmUtbW9uaXRvcmluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdCQUF3QjtBQUN4QixvREFBb0Q7O0FBRXBELGdZQUFnWSIsInNvdXJjZXNDb250ZW50IjpbIi8qIFRhaWx3aW5kIGhhbmRsZXMgVUkgKi9cbi8qIEZ1dHVyZTogc2lyZW4gYW5pbWF0aW9uLCB2aWRlbyBvdmVybGF5LCBoZWF0bWFwICovXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelement","ɵɵproperty","ctx_r0","liveStreamUrl","ɵɵsanitizeUrl","ɵɵelementStart","ɵɵelementEnd","ɵɵtext","ɵɵlistener","LiveMonitoringComponent_div_30_Template_div_click_0_listener","cam_r3","ɵɵrestoreView","_r2","$implicit","ɵɵnextContext","ɵɵresetView","selectCamera","ɵɵpureFunction2","_c2","selectedCamera","gate","ɵɵadvance","ɵɵtextInterpolate","_c3","status","rtsp_url","ɵɵtextInterpolate1","LiveMonitoringComponent","constructor","http","sanitizer","cameraNodes","currentMode","userEmail","ngOnInit","localStorage","getItem","loadCameras","get","subscribe","next","cams","firstLive","find","c","error","err","console","cam","updateStreamUrl","setMode","newMode","t","Date","getTime","rawUrl","bypassSecurityTrustResourceUrl","ɵɵdirectiveInject","i1","HttpClient","i2","DomSanitizer","selectors","decls","vars","consts","template","LiveMonitoringComponent_Template","rf","ctx","LiveMonitoringComponent_Template_button_click_10_listener","LiveMonitoringComponent_Template_button_click_12_listener","ɵɵtemplate","LiveMonitoringComponent_div_18_Template","LiveMonitoringComponent_img_23_Template","LiveMonitoringComponent_div_24_Template","LiveMonitoringComponent_div_28_Template","LiveMonitoringComponent_div_30_Template","_c0","_c1","length"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\live-monitoring\\live-monitoring.component.ts","C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\live-monitoring\\live-monitoring.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n// 1. IMPORT ANGULAR SECURITY BYPASS TOOLS\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser'; \n\n@Component({\n  selector: 'app-live-monitoring',\n  templateUrl: './live-monitoring.component.html',\n  styleUrls: ['./live-monitoring.component.css']\n})\nexport class LiveMonitoringComponent implements OnInit {\n  \n  cameraNodes: any[] = [];\n  selectedCamera: any = null;\n  \n  // 2. CHANGE TYPE TO ACCEPT SAFE URLS\n  liveStreamUrl: SafeResourceUrl | string = ''; \n  \n  // Track which view is currently active\n  currentMode: string = 'object'; \n\n  // Multi-tenant Account ID\n  userEmail: string = '';\n\n  // 3. INJECT THE SANITIZER HERE!\n  constructor(private http: HttpClient, private sanitizer: DomSanitizer) {}\n\n  ngOnInit(): void {\n    // Securely fetch the logged-in user's email\n    this.userEmail = localStorage.getItem('userEmail') || '';\n    \n    // Load cameras for this account\n    this.loadCameras();\n  }\n\n  loadCameras() {\n    if (!this.userEmail) return; // Stop if no email\n\n    // Fetch cameras ONLY for this specific user account!\n    this.http.get<any[]>(`http://localhost:8000/api/cameras?user_email=${this.userEmail}`).subscribe({\n      next: (cams) => {\n        this.cameraNodes = cams;\n        const firstLive = cams.find(c => c.status === 'Live' || c.rtsp_url === '0') || cams[0];\n        if (firstLive) {\n          this.selectCamera(firstLive);\n        }\n      },\n      error: (err) => console.error(\"Error fetching cameras\", err)\n    });\n  }\n\n  selectCamera(cam: any) {\n    this.selectedCamera = cam;\n    this.updateStreamUrl();\n  }\n\n  // Toggle Function! \n  setMode(newMode: string) {\n    this.currentMode = newMode;\n    this.updateStreamUrl();\n  }\n\n  updateStreamUrl() {\n    if (this.selectedCamera && (this.selectedCamera.status === 'Live' || this.selectedCamera.rtsp_url === '0')) {\n      const t = new Date().getTime();\n      const rawUrl = `http://localhost:8000/api/video-feed/${this.selectedCamera.gate}?user_email=${this.userEmail}&mode=${this.currentMode}&t=${t}`;\n      \n      // 4. SECURE STREAM BYPASS: Tell Angular this raw URL is 100% safe to display!\n      this.liveStreamUrl = this.sanitizer.bypassSecurityTrustResourceUrl(rawUrl);\n    } else {\n      this.liveStreamUrl = '';\n    }\n  }\n}","<div class=\"min-h-screen bg-[#0f172a] p-6 lg:p-8 font-sans text-gray-300\">\n  \n  <div class=\"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center bg-[#1e293b] p-5 rounded-xl border border-slate-700/50 shadow-lg gap-4\">\n    <div>\n      <h1 class=\"text-3xl font-bold text-white tracking-wide flex items-center\">\n        <svg class=\"w-8 h-8 mr-3 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg>\n        Live AI Monitoring\n      </h1>\n      <p class=\"text-sm text-gray-400 mt-1 ml-11\">Computer Vision based people detection & risk analysis</p>\n    </div>\n    \n    <div class=\"flex space-x-3\">\n      <button (click)=\"setMode('object')\"\n              class=\"px-5 py-2 rounded font-bold text-sm transition-all duration-300\"\n              [ngClass]=\"{'bg-teal-500/20 text-teal-400 border border-teal-500 shadow-[0_0_15px_rgba(20,184,166,0.4)]': currentMode === 'object', 'bg-slate-700 text-white hover:bg-slate-600': currentMode !== 'object'}\">\n        Object Detection\n      </button>\n      \n      <button (click)=\"setMode('thermal')\"\n              class=\"px-5 py-2 rounded font-bold text-sm transition-all duration-300\"\n              [ngClass]=\"{'bg-orange-500/20 text-orange-400 border border-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.4)]': currentMode === 'thermal', 'bg-slate-700 text-white hover:bg-slate-600': currentMode !== 'thermal'}\">\n        Thermal Density\n      </button>\n    </div>\n  </div>\n\n  <div class=\"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[70vh]\">\n    \n    <div class=\"lg:col-span-3 bg-black border border-slate-700/50 rounded-xl overflow-hidden relative shadow-2xl flex items-center justify-center\">\n      \n      <div class=\"absolute top-0 left-0 right-0 bg-gradient-to-b from-black/80 to-transparent p-4 z-10 flex justify-between\">\n        <div class=\"flex items-center\">\n          <div class=\"w-3 h-3 bg-red-500 rounded-full animate-pulse mr-3\" *ngIf=\"liveStreamUrl\"></div>\n          <h2 class=\"text-xl font-bold text-white tracking-widest\">{{ selectedCamera?.gate || 'NO SIGNAL' }}</h2>\n          <span class=\"ml-3 border border-gray-500 text-gray-400 text-[10px] px-2 py-0.5 rounded\">REC</span>\n        </div>\n      </div>\n\n      <img *ngIf=\"liveStreamUrl\" [src]=\"liveStreamUrl\" class=\"w-full h-full object-contain\" alt=\"Live CCTV Feed\" />\n      \n      <div *ngIf=\"!liveStreamUrl\" class=\"text-center\">\n        <svg class=\"w-16 h-16 text-slate-600 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414\"></path></svg>\n        <p class=\"text-slate-500 font-bold uppercase tracking-widest\">CAMERA OFFLINE OR UNCONFIGURED</p>\n      </div>\n      \n    </div>\n\n    <div class=\"lg:col-span-1 bg-[#1e293b]/50 border border-slate-700/50 rounded-xl p-4 overflow-y-auto\">\n      <h3 class=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4\">CAMERA NODES</h3>\n      \n      <div *ngIf=\"cameraNodes.length === 0\" class=\"text-sm text-gray-500 text-center mt-10\">\n        No cameras found. Please add them in RTSP Setup.\n      </div>\n\n      <div class=\"space-y-3\">\n        <div *ngFor=\"let cam of cameraNodes\" \n             (click)=\"selectCamera(cam)\"\n             class=\"p-4 rounded-lg cursor-pointer transition-all border-2\"\n             [ngClass]=\"{'border-teal-500 bg-[#0f172a] shadow-[0_0_15px_rgba(20,184,166,0.2)]': selectedCamera?.gate === cam.gate, 'border-slate-700 bg-[#1e293b] hover:border-slate-500': selectedCamera?.gate !== cam.gate}\">\n          \n          <div class=\"flex justify-between items-center mb-2\">\n            <h4 class=\"font-bold text-white\">{{ cam.gate }}</h4>\n            <span class=\"text-[10px] font-bold px-2 py-1 rounded\"\n                  [ngClass]=\"{'bg-green-500/20 text-green-400': cam.status === 'Live' || cam.rtsp_url === '0', 'bg-slate-700 text-gray-400': cam.status !== 'Live' && cam.rtsp_url !== '0'}\">\n              {{ cam.status === 'Live' || cam.rtsp_url === '0' ? 'LIVE' : 'OFFLINE' }}\n            </span>\n          </div>\n          \n          <p class=\"text-[10px] text-gray-500 break-all\">{{ cam.rtsp_url || 'No URL Configured' }}</p>\n        </div>\n      </div>\n      \n    </div>\n  </div>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}