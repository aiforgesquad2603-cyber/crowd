{"ast":null,"code":"import { Chart, registerables } from 'chart.js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"trendChart\"];\nfunction AnalysisReportComponent_div_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 28)(2, \"span\", 29);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 30);\n    i0.ɵɵelement(7, \"div\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const zone_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(zone_r2.name);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMapInterpolate1(\"font-bold \", zone_r2.textColor, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", zone_r2.percent, \"% (\", zone_r2.level, \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMapInterpolate1(\"\", zone_r2.barColor, \" h-2.5 rounded-full\");\n    i0.ɵɵstyleProp(\"width\", zone_r2.percent, \"%\");\n  }\n}\n// Register all chart components\nChart.register(...registerables);\nexport class AnalysisReportComponent {\n  constructor(http) {\n    this.http = http;\n    this.metrics = {\n      peakDensity: '0%',\n      totalFootfall: '0',\n      incidents: 0,\n      avgDwellTime: '0 mins'\n    };\n    this.riskZones = [];\n    // --- NEW: Multi-tenant Account ID ---\n    this.userEmail = '';\n  }\n  ngOnInit() {\n    // 1. Securely fetch the logged-in user's email\n    this.userEmail = localStorage.getItem('userEmail') || '';\n    // Fetch real data when page loads!\n    this.fetchAnalytics();\n  }\n  fetchAnalytics() {\n    if (!this.userEmail) return; // Stop if no email is found\n    // 2. Fetch analytics ONLY for this specific user account!\n    this.http.get(`http://localhost:8000/api/analytics?user_email=${this.userEmail}`).subscribe({\n      next: data => {\n        this.metrics = {\n          peakDensity: data.peakDensity,\n          totalFootfall: data.totalFootfall,\n          incidents: data.incidents,\n          avgDwellTime: data.avgDwellTime\n        };\n        this.riskZones = this.formatRiskZones(data.riskZones);\n        // Wait a tiny bit for HTML to render, then draw the chart\n        setTimeout(() => {\n          this.renderChart(data.chartData.labels, data.chartData.data);\n        }, 100);\n      },\n      error: err => console.error(\"Failed to load analytics\", err)\n    });\n  }\n  // Gives the correct colors based on risk level\n  formatRiskZones(zones) {\n    return zones.map(zone => {\n      let barColor = 'bg-green-500';\n      let textColor = 'text-green-500';\n      if (zone.level === 'Critical') {\n        barColor = 'bg-red-500';\n        textColor = 'text-red-500';\n      } else if (zone.level === 'High') {\n        barColor = 'bg-orange-500';\n        textColor = 'text-orange-500';\n      } else if (zone.level === 'Moderate') {\n        barColor = 'bg-yellow-500';\n        textColor = 'text-yellow-500';\n      }\n      return {\n        ...zone,\n        barColor,\n        textColor\n      };\n    });\n  }\n  // Builds the beautiful Line Chart\n  renderChart(labels, dataPoints) {\n    if (this.chartInstance) {\n      this.chartInstance.destroy();\n    }\n    const ctx = this.trendChart.nativeElement.getContext('2d');\n    this.chartInstance = new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: 'Daily Footfall',\n          data: dataPoints,\n          borderColor: '#14b8a6',\n          // Teal color matching your UI\n          backgroundColor: 'rgba(20, 184, 166, 0.1)',\n          borderWidth: 3,\n          tension: 0.4,\n          // Makes the line curvy and smooth!\n          fill: true,\n          pointBackgroundColor: '#0f172a',\n          pointBorderColor: '#14b8a6',\n          pointRadius: 4\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: false\n          }\n        },\n        scales: {\n          y: {\n            grid: {\n              color: 'rgba(148, 163, 184, 0.1)'\n            },\n            ticks: {\n              color: '#94a3b8'\n            }\n          },\n          x: {\n            grid: {\n              display: false\n            },\n            ticks: {\n              color: '#94a3b8'\n            }\n          }\n        }\n      }\n    });\n  }\n  // --- NEW MAGIC: REAL EXCEL/CSV EXPORT! ---\n  generateReport() {\n    // 1. Create the CSV Headers\n    let csvContent = \"data:text/csv;charset=utf-8,\";\n    csvContent += \"Security Zone,Current Risk Percentage,Threat Level\\n\";\n    // 2. Loop through the real database risk zones\n    this.riskZones.forEach(zone => {\n      csvContent += `${zone.name},${zone.percent}%,${zone.level}\\n`;\n    });\n    // 3. Add Overall Metrics\n    csvContent += `\\nOverall Peak Density,${this.metrics.peakDensity}\\n`;\n    csvContent += `Total Expected Footfall,${this.metrics.totalFootfall}\\n`;\n    csvContent += `Incidents Logged,${this.metrics.incidents}\\n`;\n    csvContent += `Avg. Dwell Time,${this.metrics.avgDwellTime}\\n`;\n    // 4. Create a hidden download link and click it!\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", \"CrowdGuard_AI_Security_Report.csv\");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n  static {\n    this.ɵfac = function AnalysisReportComponent_Factory(t) {\n      return new (t || AnalysisReportComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AnalysisReportComponent,\n      selectors: [[\"app-analysis-report\"]],\n      viewQuery: function AnalysisReportComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.trendChart = _t.first);\n        }\n      },\n      decls: 50,\n      vars: 5,\n      consts: [[\"trendChart\", \"\"], [1, \"min-h-screen\", \"bg-gradient-to-br\", \"from-[#0f172a]\", \"via-[#1e293b]\", \"to-[#0f172a]\", \"p-6\", \"lg:p-8\", \"font-sans\", \"text-gray-300\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-8\"], [1, \"text-3xl\", \"font-bold\", \"text-white\", \"tracking-wide\"], [1, \"text-sm\", \"text-gray-400\", \"mt-1\"], [1, \"bg-[#14b8a6]\", \"hover:bg-[#0d9488]\", \"text-white\", \"px-5\", \"py-2.5\", \"rounded-md\", \"text-sm\", \"font-medium\", \"transition-colors\", \"shadow-lg\", \"flex\", \"items-center\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-4\", \"h-4\", \"mr-2\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-4\", \"gap-6\", \"mb-8\"], [1, \"bg-[#1e293b]/70\", \"border\", \"border-slate-700\", \"rounded-xl\", \"p-5\", \"border-t-2\", \"border-t-red-500\", \"shadow-md\"], [1, \"text-xs\", \"font-bold\", \"text-gray-400\", \"uppercase\", \"tracking-wider\"], [1, \"text-4xl\", \"font-bold\", \"text-red-500\", \"mt-2\"], [1, \"bg-[#1e293b]/70\", \"border\", \"border-slate-700\", \"rounded-xl\", \"p-5\", \"border-t-2\", \"border-t-teal-500\", \"shadow-md\"], [1, \"text-4xl\", \"font-bold\", \"text-[#2dd4bf]\", \"mt-2\"], [1, \"bg-[#1e293b]/70\", \"border\", \"border-slate-700\", \"rounded-xl\", \"p-5\", \"border-t-2\", \"border-t-orange-500\", \"shadow-md\"], [1, \"text-4xl\", \"font-bold\", \"text-orange-400\", \"mt-2\"], [1, \"bg-[#1e293b]/70\", \"border\", \"border-slate-700\", \"rounded-xl\", \"p-5\", \"border-t-2\", \"border-t-blue-500\", \"shadow-md\"], [1, \"text-4xl\", \"font-bold\", \"text-blue-400\", \"mt-2\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-3\", \"gap-6\"], [1, \"lg:col-span-2\", \"bg-[#1e293b]/70\", \"border\", \"border-slate-700\", \"rounded-xl\", \"p-6\", \"shadow-md\", \"flex\", \"flex-col\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-6\"], [1, \"text-lg\", \"font-bold\", \"text-white\"], [1, \"bg-[#0f172a]\", \"border\", \"border-slate-600\", \"rounded-md\", \"px-3\", \"py-1.5\", \"text-sm\", \"text-gray-300\", \"outline-none\", \"focus:border-blue-500\", \"cursor-pointer\"], [1, \"flex-grow\", \"min-h-[300px]\", \"relative\", \"w-full\"], [1, \"lg:col-span-1\", \"bg-[#1e293b]/70\", \"border\", \"border-slate-700\", \"rounded-xl\", \"p-6\", \"shadow-md\"], [1, \"text-lg\", \"font-bold\", \"text-white\", \"mb-8\"], [1, \"space-y-7\"], [4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"justify-between\", \"text-sm\", \"mb-2\"], [1, \"font-bold\", \"text-gray-200\"], [1, \"w-full\", \"bg-[#0f172a]\", \"rounded-full\", \"h-2.5\", \"border\", \"border-slate-700/50\"]],\n      template: function AnalysisReportComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\")(3, \"h1\", 3);\n          i0.ɵɵtext(4, \"Analysis & Reports\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 4);\n          i0.ɵɵtext(6, \"Historical crowd data and risk assessment\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"button\", 5);\n          i0.ɵɵlistener(\"click\", function AnalysisReportComponent_Template_button_click_7_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.generateReport());\n          });\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(8, \"svg\", 6);\n          i0.ɵɵelement(9, \"path\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(10, \" Generate Custom Report \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(11, \"div\", 8)(12, \"div\", 9)(13, \"p\", 10);\n          i0.ɵɵtext(14, \"Peak Density (24H)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"h3\", 11);\n          i0.ɵɵtext(16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"div\", 12)(18, \"p\", 10);\n          i0.ɵɵtext(19, \"Total Footfall (24H)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"h3\", 13);\n          i0.ɵɵtext(21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 14)(23, \"p\", 10);\n          i0.ɵɵtext(24, \"Incidents Logged\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"h3\", 15);\n          i0.ɵɵtext(26);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"div\", 16)(28, \"p\", 10);\n          i0.ɵɵtext(29, \"Avg. Dwell Time\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(30, \"h3\", 17);\n          i0.ɵɵtext(31);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(32, \"div\", 18)(33, \"div\", 19)(34, \"div\", 20)(35, \"h3\", 21);\n          i0.ɵɵtext(36, \"Weekly Density Trends\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"select\", 22)(38, \"option\");\n          i0.ɵɵtext(39, \"Last 7 Days\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"option\");\n          i0.ɵɵtext(41, \"Last 30 Days\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(42, \"div\", 23);\n          i0.ɵɵelement(43, \"canvas\", null, 0);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(45, \"div\", 24)(46, \"h3\", 25);\n          i0.ɵɵtext(47, \"Risk Zone Breakdown\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(48, \"div\", 26);\n          i0.ɵɵtemplate(49, AnalysisReportComponent_div_49_Template, 8, 11, \"div\", 27);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(16);\n          i0.ɵɵtextInterpolate(ctx.metrics.peakDensity);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.metrics.totalFootfall);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.metrics.incidents);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.metrics.avgDwellTime);\n          i0.ɵɵadvance(18);\n          i0.ɵɵproperty(\"ngForOf\", ctx.riskZones);\n        }\n      },\n      dependencies: [i2.NgForOf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption],\n      styles: [\"\\n\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuYWx5c2lzLXJlcG9ydC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QiIsImZpbGUiOiJhbmFseXNpcy1yZXBvcnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIENoYXJ0cyBpbnRlZ3JhdGlvbiBsYXRlciAqL1xuIl19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvYW5hbHlzaXMtcmVwb3J0L2FuYWx5c2lzLXJlcG9ydC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2Qjs7QUFFN0IsNFNBQTRTIiwic291cmNlc0NvbnRlbnQiOlsiLyogQ2hhcnRzIGludGVncmF0aW9uIGxhdGVyICovXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Chart","registerables","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate","zone_r2","name","ɵɵclassMapInterpolate1","textColor","ɵɵtextInterpolate2","percent","level","barColor","ɵɵstyleProp","register","AnalysisReportComponent","constructor","http","metrics","peakDensity","totalFootfall","incidents","avgDwellTime","riskZones","userEmail","ngOnInit","localStorage","getItem","fetchAnalytics","get","subscribe","next","data","formatRiskZones","setTimeout","renderChart","chartData","labels","error","err","console","zones","map","zone","dataPoints","chartInstance","destroy","ctx","trendChart","nativeElement","getContext","type","datasets","label","borderColor","backgroundColor","borderWidth","tension","fill","pointBackgroundColor","pointBorderColor","pointRadius","options","responsive","maintainAspectRatio","plugins","legend","display","scales","y","grid","color","ticks","x","generateReport","csvContent","forEach","encodedUri","encodeURI","link","document","createElement","setAttribute","body","appendChild","click","removeChild","ɵɵdirectiveInject","i1","HttpClient","selectors","viewQuery","AnalysisReportComponent_Query","rf","ɵɵlistener","AnalysisReportComponent_Template_button_click_7_listener","ɵɵrestoreView","_r1","ɵɵresetView","ɵɵtemplate","AnalysisReportComponent_div_49_Template","ɵɵproperty"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\analysis-report\\analysis-report.component.ts","C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\analysis-report\\analysis-report.component.html"],"sourcesContent":["import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Chart, registerables } from 'chart.js';\n\n// Register all chart components\nChart.register(...registerables);\n\n@Component({\n  selector: 'app-analysis-report',\n  templateUrl: './analysis-report.component.html',\n  styleUrls: ['./analysis-report.component.css']\n})\nexport class AnalysisReportComponent implements OnInit {\n  \n  // This grabs the canvas element from HTML to draw the chart\n  @ViewChild('trendChart', { static: false }) trendChart!: ElementRef;\n  chartInstance: any;\n\n  metrics: any = {\n    peakDensity: '0%',\n    totalFootfall: '0',\n    incidents: 0,\n    avgDwellTime: '0 mins'\n  };\n  \n  riskZones: any[] = [];\n  \n  // --- NEW: Multi-tenant Account ID ---\n  userEmail: string = '';\n\n  constructor(private http: HttpClient) { }\n\n  ngOnInit(): void {\n    // 1. Securely fetch the logged-in user's email\n    this.userEmail = localStorage.getItem('userEmail') || '';\n\n    // Fetch real data when page loads!\n    this.fetchAnalytics();\n  }\n\n  fetchAnalytics() {\n    if (!this.userEmail) return; // Stop if no email is found\n\n    // 2. Fetch analytics ONLY for this specific user account!\n    this.http.get<any>(`http://localhost:8000/api/analytics?user_email=${this.userEmail}`).subscribe({\n      next: (data) => {\n        this.metrics = {\n          peakDensity: data.peakDensity,\n          totalFootfall: data.totalFootfall,\n          incidents: data.incidents,\n          avgDwellTime: data.avgDwellTime\n        };\n        this.riskZones = this.formatRiskZones(data.riskZones);\n        \n        // Wait a tiny bit for HTML to render, then draw the chart\n        setTimeout(() => {\n          this.renderChart(data.chartData.labels, data.chartData.data);\n        }, 100);\n      },\n      error: (err) => console.error(\"Failed to load analytics\", err)\n    });\n  }\n\n  // Gives the correct colors based on risk level\n  formatRiskZones(zones: any[]) {\n    return zones.map(zone => {\n      let barColor = 'bg-green-500';\n      let textColor = 'text-green-500';\n      if (zone.level === 'Critical') { barColor = 'bg-red-500'; textColor = 'text-red-500'; }\n      else if (zone.level === 'High') { barColor = 'bg-orange-500'; textColor = 'text-orange-500'; }\n      else if (zone.level === 'Moderate') { barColor = 'bg-yellow-500'; textColor = 'text-yellow-500'; }\n      \n      return { ...zone, barColor, textColor };\n    });\n  }\n\n  // Builds the beautiful Line Chart\n  renderChart(labels: string[], dataPoints: number[]) {\n    if (this.chartInstance) {\n      this.chartInstance.destroy();\n    }\n    \n    const ctx = this.trendChart.nativeElement.getContext('2d');\n    this.chartInstance = new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: 'Daily Footfall',\n          data: dataPoints,\n          borderColor: '#14b8a6', // Teal color matching your UI\n          backgroundColor: 'rgba(20, 184, 166, 0.1)',\n          borderWidth: 3,\n          tension: 0.4, // Makes the line curvy and smooth!\n          fill: true,\n          pointBackgroundColor: '#0f172a',\n          pointBorderColor: '#14b8a6',\n          pointRadius: 4\n        }]\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: { legend: { display: false } },\n        scales: {\n          y: { grid: { color: 'rgba(148, 163, 184, 0.1)' }, ticks: { color: '#94a3b8' } },\n          x: { grid: { display: false }, ticks: { color: '#94a3b8' } }\n        }\n      }\n    });\n  }\n\n  // --- NEW MAGIC: REAL EXCEL/CSV EXPORT! ---\n  generateReport() {\n    // 1. Create the CSV Headers\n    let csvContent = \"data:text/csv;charset=utf-8,\";\n    csvContent += \"Security Zone,Current Risk Percentage,Threat Level\\n\";\n\n    // 2. Loop through the real database risk zones\n    this.riskZones.forEach(zone => {\n      csvContent += `${zone.name},${zone.percent}%,${zone.level}\\n`;\n    });\n\n    // 3. Add Overall Metrics\n    csvContent += `\\nOverall Peak Density,${this.metrics.peakDensity}\\n`;\n    csvContent += `Total Expected Footfall,${this.metrics.totalFootfall}\\n`;\n    csvContent += `Incidents Logged,${this.metrics.incidents}\\n`;\n    csvContent += `Avg. Dwell Time,${this.metrics.avgDwellTime}\\n`;\n\n    // 4. Create a hidden download link and click it!\n    const encodedUri = encodeURI(csvContent);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", \"CrowdGuard_AI_Security_Report.csv\");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n}","<div class=\"min-h-screen bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#0f172a] p-6 lg:p-8 font-sans text-gray-300\">\n  \n  <div class=\"flex justify-between items-center mb-8\">\n    <div>\n      <h1 class=\"text-3xl font-bold text-white tracking-wide\">Analysis & Reports</h1>\n      <p class=\"text-sm text-gray-400 mt-1\">Historical crowd data and risk assessment</p>\n    </div>\n    \n    <button (click)=\"generateReport()\" class=\"bg-[#14b8a6] hover:bg-[#0d9488] text-white px-5 py-2.5 rounded-md text-sm font-medium transition-colors shadow-lg flex items-center\">\n      <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"></path></svg>\n      Generate Custom Report\n    </button>\n  </div>\n\n  <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n    \n    <div class=\"bg-[#1e293b]/70 border border-slate-700 rounded-xl p-5 border-t-2 border-t-red-500 shadow-md\">\n      <p class=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Peak Density (24H)</p>\n      <h3 class=\"text-4xl font-bold text-red-500 mt-2\">{{ metrics.peakDensity }}</h3>\n    </div>\n\n    <div class=\"bg-[#1e293b]/70 border border-slate-700 rounded-xl p-5 border-t-2 border-t-teal-500 shadow-md\">\n      <p class=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Total Footfall (24H)</p>\n      <h3 class=\"text-4xl font-bold text-[#2dd4bf] mt-2\">{{ metrics.totalFootfall }}</h3>\n    </div>\n\n    <div class=\"bg-[#1e293b]/70 border border-slate-700 rounded-xl p-5 border-t-2 border-t-orange-500 shadow-md\">\n      <p class=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Incidents Logged</p>\n      <h3 class=\"text-4xl font-bold text-orange-400 mt-2\">{{ metrics.incidents }}</h3>\n    </div>\n\n    <div class=\"bg-[#1e293b]/70 border border-slate-700 rounded-xl p-5 border-t-2 border-t-blue-500 shadow-md\">\n      <p class=\"text-xs font-bold text-gray-400 uppercase tracking-wider\">Avg. Dwell Time</p>\n      <h3 class=\"text-4xl font-bold text-blue-400 mt-2\">{{ metrics.avgDwellTime }}</h3>\n    </div>\n\n  </div>\n\n  <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n    \n    <div class=\"lg:col-span-2 bg-[#1e293b]/70 border border-slate-700 rounded-xl p-6 shadow-md flex flex-col\">\n      <div class=\"flex justify-between items-center mb-6\">\n        <h3 class=\"text-lg font-bold text-white\">Weekly Density Trends</h3>\n        <select class=\"bg-[#0f172a] border border-slate-600 rounded-md px-3 py-1.5 text-sm text-gray-300 outline-none focus:border-blue-500 cursor-pointer\">\n          <option>Last 7 Days</option>\n          <option>Last 30 Days</option>\n        </select>\n      </div>\n      \n      <div class=\"flex-grow min-h-[300px] relative w-full\">\n        <canvas #trendChart></canvas>\n      </div>\n    </div>\n\n    <div class=\"lg:col-span-1 bg-[#1e293b]/70 border border-slate-700 rounded-xl p-6 shadow-md\">\n      <h3 class=\"text-lg font-bold text-white mb-8\">Risk Zone Breakdown</h3>\n      \n      <div class=\"space-y-7\">\n        <div *ngFor=\"let zone of riskZones\">\n          \n          <div class=\"flex justify-between text-sm mb-2\">\n            <span class=\"font-bold text-gray-200\">{{ zone.name }}</span>\n            <span class=\"font-bold {{ zone.textColor }}\">{{ zone.percent }}% ({{ zone.level }})</span>\n          </div>\n          \n          <div class=\"w-full bg-[#0f172a] rounded-full h-2.5 border border-slate-700/50\">\n            <div class=\"{{ zone.barColor }} h-2.5 rounded-full\" [style.width.%]=\"zone.percent\"></div>\n          </div>\n          \n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}