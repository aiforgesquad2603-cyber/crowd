{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nconst _c0 = (a0, a1) => ({\n  \"border-red-500 shadow-[0_0_25px_rgba(239,68,68,0.3)]\": a0,\n  \"border-slate-700/50\": a1\n});\nconst _c1 = (a0, a1) => ({\n  \"opacity-100\": a0,\n  \"opacity-0\": a1\n});\nconst _c2 = (a0, a1) => ({\n  \"text-green-400\": a0,\n  \"text-red-500\": a1\n});\nfunction DemoVidAnalysisComponent_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function DemoVidAnalysisComponent_button_11_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.stopAllAlarms());\n    });\n    i0.ɵɵtext(1, \" SILENCE ALL ALARMS \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵtext(1, \"OFFLINE\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 32);\n    i0.ɵɵtext(1, \"STANDBY\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 33);\n    i0.ɵɵtext(1, \"ANALYZING\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 34);\n    i0.ɵɵtext(1, \"NORMAL\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 35);\n    i0.ɵɵtext(1, \"CRITICAL\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"input\", 37);\n    i0.ɵɵlistener(\"change\", function DemoVidAnalysisComponent_div_13_div_13_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const i_r4 = i0.ɵɵnextContext().index;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onFileSelected($event, i_r4));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 38);\n    i0.ɵɵelement(3, \"path\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"p\", 40);\n    i0.ɵɵtext(5, \"Add Video\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_video_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"video\", 41);\n  }\n  if (rf & 2) {\n    const cam_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", cam_r5.videoUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 42);\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"p\", 44);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c2, !cam_r5.showThermal, cam_r5.showThermal));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", cam_r5.isAnalyzing ? \"--\" : cam_r5.liveCount, \" \");\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 45)(1, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function DemoVidAnalysisComponent_div_13_div_19_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const i_r4 = i0.ɵɵnextContext().index;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.analyzeCamera(i_r4));\n    });\n    i0.ɵɵtext(2, \"Scan Current Feed\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 47);\n    i0.ɵɵlistener(\"click\", function DemoVidAnalysisComponent_div_13_div_19_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const i_r4 = i0.ɵɵnextContext().index;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.clearCamera(i_r4));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(4, \"svg\", 48);\n    i0.ɵɵelement(5, \"path\", 49);\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_div_1_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const msg_r8 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\\u2713 \", msg_r8, \"\");\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_div_1_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 61);\n    i0.ɵɵtext(1, \"\\u26A0\\uFE0F No guards assigned here.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54)(1, \"p\", 55);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 56);\n    i0.ɵɵelement(3, \"path\", 57);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" SMS DISPATCHED: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(5, \"ul\", 58);\n    i0.ɵɵtemplate(6, DemoVidAnalysisComponent_div_13_div_20_div_1_li_6_Template, 2, 1, \"li\", 59)(7, DemoVidAnalysisComponent_div_13_div_20_div_1_li_7_Template, 2, 0, \"li\", 60);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", cam_r5.analysisResult.messagesSent);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.analysisResult.messagesSent.length === 0);\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 62);\n    i0.ɵɵtext(1, \" Crowd Levels Normal. No action required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 50);\n    i0.ɵɵtemplate(1, DemoVidAnalysisComponent_div_13_div_20_div_1_Template, 8, 2, \"div\", 51)(2, DemoVidAnalysisComponent_div_13_div_20_div_2_Template, 2, 0, \"div\", 52);\n    i0.ɵɵelementStart(3, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function DemoVidAnalysisComponent_div_13_div_20_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const i_r4 = i0.ɵɵnextContext().index;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.clearCamera(i_r4));\n    });\n    i0.ɵɵtext(4, \"Reset Camera\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.showThermal);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !cam_r5.showThermal);\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(3, \"svg\", 14);\n    i0.ɵɵelement(4, \"path\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(5, \"span\", 16);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, DemoVidAnalysisComponent_div_13_span_7_Template, 2, 0, \"span\", 17)(8, DemoVidAnalysisComponent_div_13_span_8_Template, 2, 0, \"span\", 18)(9, DemoVidAnalysisComponent_div_13_span_9_Template, 2, 0, \"span\", 19)(10, DemoVidAnalysisComponent_div_13_span_10_Template, 2, 0, \"span\", 20)(11, DemoVidAnalysisComponent_div_13_span_11_Template, 2, 0, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 22);\n    i0.ɵɵtemplate(13, DemoVidAnalysisComponent_div_13_div_13_Template, 6, 0, \"div\", 23)(14, DemoVidAnalysisComponent_div_13_video_14_Template, 1, 1, \"video\", 24)(15, DemoVidAnalysisComponent_div_13_div_15_Template, 1, 0, \"div\", 25);\n    i0.ɵɵelement(16, \"div\", 26);\n    i0.ɵɵtemplate(17, DemoVidAnalysisComponent_div_13_div_17_Template, 3, 5, \"div\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 28);\n    i0.ɵɵtemplate(19, DemoVidAnalysisComponent_div_13_div_19_Template, 6, 0, \"div\", 29)(20, DemoVidAnalysisComponent_div_13_div_20_Template, 5, 2, \"div\", 30);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c0, cam_r5.showThermal, !cam_r5.showThermal));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", cam_r5.gateName, \" Feed\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !cam_r5.file);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.file && !cam_r5.isAnalyzing && !cam_r5.analysisResult);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.isAnalyzing);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.analysisResult && !cam_r5.showThermal);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.showThermal);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !cam_r5.file);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.videoUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.isAnalyzing);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(17, _c1, cam_r5.showThermal, !cam_r5.showThermal));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.file);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", cam_r5.file && !cam_r5.analysisResult && !cam_r5.isAnalyzing);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", cam_r5.analysisResult);\n  }\n}\nexport class DemoVidAnalysisComponent {\n  // To check if ANY alarm is ringing to show the global \"Silence All\" button\n  get isAnyAlarmRinging() {\n    return this.cameras.some(cam => cam.isAlarmRinging);\n  }\n  constructor(http) {\n    this.http = http;\n    // Array to hold dynamic cameras\n    this.cameras = [];\n  }\n  ngOnInit() {\n    // 1. DYNAMICALLY FETCH GATES FROM DATABASE!\n    this.http.get('http://localhost:8000/api/cameras').subscribe({\n      next: savedCams => {\n        let gateNames = [];\n        if (savedCams.length > 0) {\n          // If you created custom gates in RTSP setup, pull them all!\n          gateNames = savedCams.map(c => c.gate);\n        } else {\n          // Fallback if database is completely empty\n          gateNames = ['Gate 1', 'Gate 2', 'Gate 3', 'Gate 4', 'Gate 5'];\n        }\n        // 2. Create a video box for EVERY gate dynamically!\n        gateNames.forEach((name, index) => {\n          this.cameras.push({\n            id: index + 1,\n            gateName: name,\n            file: null,\n            videoUrl: null,\n            isAnalyzing: false,\n            analysisResult: null,\n            liveCount: 0,\n            showThermal: false,\n            isAlarmRinging: false,\n            alarmInterval: null\n          });\n        });\n      },\n      error: err => {\n        console.error(\"Failed to load dynamic gates from DB\", err);\n      }\n    });\n  }\n  onFileSelected(event, index) {\n    if (event.target.files && event.target.files.length > 0) {\n      const cam = this.cameras[index];\n      cam.file = event.target.files[0];\n      cam.videoUrl = URL.createObjectURL(cam.file);\n      // Reset that specific camera's stats\n      cam.analysisResult = null;\n      cam.liveCount = 0;\n      cam.showThermal = false;\n      this.stopSpecificAlarm(index);\n    }\n  }\n  // Analyze ONE specific camera\n  analyzeCamera(index) {\n    const cam = this.cameras[index];\n    if (!cam.file) return;\n    cam.isAnalyzing = true;\n    cam.analysisResult = null;\n    cam.liveCount = 0;\n    cam.showThermal = false;\n    const formData = new FormData();\n    formData.append('file', cam.file);\n    formData.append('gate', cam.gateName);\n    this.http.post('http://localhost:8000/api/analyze-video', formData).subscribe({\n      next: response => {\n        cam.isAnalyzing = false;\n        cam.analysisResult = response;\n        this.animateCounting(index, response.crowdCount, response.thresholdExceeded);\n      },\n      error: err => {\n        console.error(`Analysis Failed for ${cam.gateName}`, err);\n        cam.isAnalyzing = false;\n      }\n    });\n  }\n  // Analyze ALL uploaded cameras at the same time!\n  analyzeAllCameras() {\n    this.cameras.forEach((cam, index) => {\n      if (cam.file && !cam.isAnalyzing && !cam.analysisResult) {\n        this.analyzeCamera(index);\n      }\n    });\n  }\n  animateCounting(index, targetCount, isCritical) {\n    const cam = this.cameras[index];\n    let current = 0;\n    const interval = setInterval(() => {\n      current += Math.ceil(targetCount / 20); // Dynamic counting speed\n      if (current >= targetCount) {\n        cam.liveCount = targetCount;\n        clearInterval(interval);\n        if (isCritical) {\n          cam.showThermal = true;\n          this.triggerAudioAlarm(index);\n        }\n      } else {\n        cam.liveCount = current;\n      }\n    }, 50);\n  }\n  triggerAudioAlarm(index) {\n    const cam = this.cameras[index];\n    cam.isAlarmRinging = true;\n    const message = `Critical! High crowd at ${cam.gateName}. Deploy guards to ${cam.gateName} immediately.`;\n    const speech = new SpeechSynthesisUtterance(message);\n    speech.lang = 'en-US';\n    speech.pitch = 0.9;\n    speech.volume = 1.0;\n    window.speechSynthesis.speak(speech);\n    cam.alarmInterval = setInterval(() => {\n      window.speechSynthesis.speak(speech);\n    }, 7000);\n  }\n  stopSpecificAlarm(index) {\n    const cam = this.cameras[index];\n    cam.isAlarmRinging = false;\n    if (cam.alarmInterval) {\n      clearInterval(cam.alarmInterval);\n    }\n  }\n  stopAllAlarms() {\n    this.cameras.forEach((_, index) => this.stopSpecificAlarm(index));\n    window.speechSynthesis.cancel(); // Stops the voice immediately\n  }\n  clearCamera(index) {\n    const cam = this.cameras[index];\n    cam.file = null;\n    cam.videoUrl = null;\n    cam.analysisResult = null;\n    cam.isAnalyzing = false;\n    cam.showThermal = false;\n    this.stopSpecificAlarm(index);\n  }\n  ngOnDestroy() {\n    this.stopAllAlarms();\n  }\n  static {\n    this.ɵfac = function DemoVidAnalysisComponent_Factory(t) {\n      return new (t || DemoVidAnalysisComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DemoVidAnalysisComponent,\n      selectors: [[\"app-demo-vid-analysis\"]],\n      decls: 14,\n      vars: 2,\n      consts: [[1, \"min-h-screen\", \"bg-[#0f172a]\", \"p-6\", \"lg:p-8\", \"font-sans\", \"text-gray-300\"], [1, \"mb-6\", \"flex\", \"flex-col\", \"md:flex-row\", \"justify-between\", \"items-start\", \"md:items-center\", \"bg-[#1e293b]\", \"p-5\", \"rounded-xl\", \"border\", \"border-slate-700/50\", \"shadow-lg\"], [1, \"text-3xl\", \"font-bold\", \"text-white\", \"tracking-wide\", \"flex\", \"items-center\"], [1, \"w-3\", \"h-3\", \"bg-red-500\", \"rounded-full\", \"animate-pulse\", \"mr-3\"], [1, \"text-sm\", \"text-gray-400\", \"mt-1\", \"ml-6\"], [1, \"flex\", \"space-x-4\", \"mt-4\", \"md:mt-0\"], [1, \"bg-blue-600\", \"hover:bg-blue-500\", \"text-white\", \"px-6\", \"py-2\", \"rounded-lg\", \"font-bold\", \"shadow-[0_0_15px_rgba(37,99,235,0.4)]\", \"transition-all\", 3, \"click\"], [\"class\", \"bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg font-bold shadow-[0_0_20px_rgba(220,38,38,0.8)] animate-pulse transition-all\", 3, \"click\", 4, \"ngIf\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-3\", \"gap-6\"], [\"class\", \"bg-[#1e293b]/70 border rounded-xl overflow-hidden flex flex-col transition-all duration-500 shadow-xl relative\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-red-600\", \"hover:bg-red-500\", \"text-white\", \"px-6\", \"py-2\", \"rounded-lg\", \"font-bold\", \"shadow-[0_0_20px_rgba(220,38,38,0.8)]\", \"animate-pulse\", \"transition-all\", 3, \"click\"], [1, \"bg-[#1e293b]/70\", \"border\", \"rounded-xl\", \"overflow-hidden\", \"flex\", \"flex-col\", \"transition-all\", \"duration-500\", \"shadow-xl\", \"relative\", 3, \"ngClass\"], [1, \"bg-[#0f172a]\", \"px-4\", \"py-3\", \"flex\", \"justify-between\", \"items-center\", \"border-b\", \"border-slate-700/50\"], [1, \"flex\", \"items-center\", \"space-x-2\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\", \"text-gray-400\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"], [1, \"font-bold\", \"text-white\", \"tracking-wider\"], [\"class\", \"text-[10px] bg-slate-700 text-gray-300 px-2 py-1 rounded font-bold\", 4, \"ngIf\"], [\"class\", \"text-[10px] bg-yellow-500/20 text-yellow-500 px-2 py-1 rounded font-bold\", 4, \"ngIf\"], [\"class\", \"text-[10px] bg-blue-500/20 text-blue-400 px-2 py-1 rounded font-bold animate-pulse\", 4, \"ngIf\"], [\"class\", \"text-[10px] bg-green-500/20 text-green-400 px-2 py-1 rounded font-bold\", 4, \"ngIf\"], [\"class\", \"text-[10px] bg-red-500/20 text-red-500 px-2 py-1 rounded font-bold animate-pulse\", 4, \"ngIf\"], [1, \"relative\", \"w-full\", \"h-56\", \"bg-black\", \"flex\", \"items-center\", \"justify-center\", \"group\"], [\"class\", \"w-full h-full border-2 border-dashed border-slate-600/50 m-2 rounded-lg flex flex-col items-center justify-center hover:border-blue-500 transition-colors relative cursor-pointer\", 4, \"ngIf\"], [\"autoplay\", \"\", \"loop\", \"\", \"muted\", \"\", \"class\", \"absolute inset-0 w-full h-full object-cover\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"scanner-line\", 4, \"ngIf\"], [1, \"absolute\", \"inset-0\", \"bg-red-600/50\", \"mix-blend-multiply\", \"transition-opacity\", \"duration-1000\", \"z-10\", 3, \"ngClass\"], [\"class\", \"absolute top-2 right-2 bg-black/80 px-2 py-1 rounded border border-slate-600 z-20\", 4, \"ngIf\"], [1, \"p-4\", \"bg-[#1e293b]\", \"flex-grow\", \"flex\", \"flex-col\", \"justify-between\"], [\"class\", \"flex justify-between items-center w-full\", 4, \"ngIf\"], [\"class\", \"text-sm\", 4, \"ngIf\"], [1, \"text-[10px]\", \"bg-slate-700\", \"text-gray-300\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\"], [1, \"text-[10px]\", \"bg-yellow-500/20\", \"text-yellow-500\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\"], [1, \"text-[10px]\", \"bg-blue-500/20\", \"text-blue-400\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\", \"animate-pulse\"], [1, \"text-[10px]\", \"bg-green-500/20\", \"text-green-400\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\"], [1, \"text-[10px]\", \"bg-red-500/20\", \"text-red-500\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\", \"animate-pulse\"], [1, \"w-full\", \"h-full\", \"border-2\", \"border-dashed\", \"border-slate-600/50\", \"m-2\", \"rounded-lg\", \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"hover:border-blue-500\", \"transition-colors\", \"relative\", \"cursor-pointer\"], [\"type\", \"file\", \"accept\", \"video/mp4,video/x-m4v,video/*\", 1, \"absolute\", \"inset-0\", \"w-full\", \"h-full\", \"opacity-0\", \"cursor-pointer\", \"z-20\", 3, \"change\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-8\", \"h-8\", \"text-blue-500\", \"mb-2\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 4v16m8-8H4\"], [1, \"text-xs\", \"text-gray-400\", \"font-medium\"], [\"autoplay\", \"\", \"loop\", \"\", \"muted\", \"\", 1, \"absolute\", \"inset-0\", \"w-full\", \"h-full\", \"object-cover\", 3, \"src\"], [1, \"scanner-line\"], [1, \"absolute\", \"top-2\", \"right-2\", \"bg-black/80\", \"px-2\", \"py-1\", \"rounded\", \"border\", \"border-slate-600\", \"z-20\"], [1, \"text-xl\", \"font-mono\", \"font-bold\", 3, \"ngClass\"], [1, \"flex\", \"justify-between\", \"items-center\", \"w-full\"], [1, \"bg-blue-600\", \"hover:bg-blue-500\", \"text-white\", \"text-xs\", \"px-4\", \"py-2\", \"rounded\", \"font-bold\", \"w-full\", \"mr-2\", 3, \"click\"], [1, \"bg-slate-700\", \"hover:bg-slate-600\", \"text-white\", \"text-xs\", \"p-2\", \"rounded\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-4\", \"h-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"], [1, \"text-sm\"], [\"class\", \"mb-2\", 4, \"ngIf\"], [\"class\", \"text-green-400 text-xs font-bold bg-green-500/10 p-2 rounded border border-green-500/20 text-center\", 4, \"ngIf\"], [1, \"mt-3\", \"text-xs\", \"text-gray-400\", \"hover:text-white\", \"underline\", \"w-full\", \"text-center\", 3, \"click\"], [1, \"mb-2\"], [1, \"text-red-400\", \"font-bold\", \"text-xs\", \"flex\", \"items-center\", \"mb-1\"], [\"fill\", \"currentColor\", \"viewBox\", \"0 0 20 20\", 1, \"w-4\", \"h-4\", \"mr-1\", \"animate-pulse\"], [\"fill-rule\", \"evenodd\", \"d\", \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z\", \"clip-rule\", \"evenodd\"], [1, \"text-[10px]\", \"text-gray-300\", \"bg-red-500/10\", \"p-2\", \"rounded\", \"border\", \"border-red-500/20\", \"max-h-16\", \"overflow-y-auto\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-orange-400\", 4, \"ngIf\"], [1, \"text-orange-400\"], [1, \"text-green-400\", \"text-xs\", \"font-bold\", \"bg-green-500/10\", \"p-2\", \"rounded\", \"border\", \"border-green-500/20\", \"text-center\"]],\n      template: function DemoVidAnalysisComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h1\", 2);\n          i0.ɵɵelement(4, \"div\", 3);\n          i0.ɵɵtext(5, \" Live CCTV Command Center \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"p\", 4);\n          i0.ɵɵtext(7, \"Simultaneous Multi-Gate Threat Detection & Alert Routing\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 5)(9, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function DemoVidAnalysisComponent_Template_button_click_9_listener() {\n            return ctx.analyzeAllCameras();\n          });\n          i0.ɵɵtext(10, \" Scan All Uploaded Feeds \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(11, DemoVidAnalysisComponent_button_11_Template, 2, 0, \"button\", 7);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 8);\n          i0.ɵɵtemplate(13, DemoVidAnalysisComponent_div_13_Template, 21, 20, \"div\", 9);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"ngIf\", ctx.isAnyAlarmRinging);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.cameras);\n        }\n      },\n      styles: [\".scanner-line[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 3px;\\n  background: rgba(34, 197, 94, 0.9);\\n  box-shadow: 0 0 10px rgba(34, 197, 94, 1);\\n  animation: _ngcontent-%COMP%_scan 2s linear infinite;\\n  z-index: 20;\\n}\\n\\n@keyframes _ngcontent-%COMP%_scan {\\n  0% { top: 0; }\\n  50% { top: 100%; }\\n  100% { top: 0; }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW8tdmlkLWFuYWx5c2lzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxXQUFXO0VBQ1gsV0FBVztFQUNYLGtDQUFrQztFQUNsQyx5Q0FBeUM7RUFDekMsa0NBQWtDO0VBQ2xDLFdBQVc7QUFDYjs7QUFFQTtFQUNFLEtBQUssTUFBTSxFQUFFO0VBQ2IsTUFBTSxTQUFTLEVBQUU7RUFDakIsT0FBTyxNQUFNLEVBQUU7QUFDakIiLCJmaWxlIjoiZGVtby12aWQtYW5hbHlzaXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2FubmVyLWxpbmUge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogM3B4O1xuICBiYWNrZ3JvdW5kOiByZ2JhKDM0LCAxOTcsIDk0LCAwLjkpO1xuICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDM0LCAxOTcsIDk0LCAxKTtcbiAgYW5pbWF0aW9uOiBzY2FuIDJzIGxpbmVhciBpbmZpbml0ZTtcbiAgei1pbmRleDogMjA7XG59XG5cbkBrZXlmcmFtZXMgc2NhbiB7XG4gIDAlIHsgdG9wOiAwOyB9XG4gIDUwJSB7IHRvcDogMTAwJTsgfVxuICAxMDAlIHsgdG9wOiAwOyB9XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvZGVtby12aWQtYW5hbHlzaXMvZGVtby12aWQtYW5hbHlzaXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztFQUNQLFdBQVc7RUFDWCxXQUFXO0VBQ1gsa0NBQWtDO0VBQ2xDLHlDQUF5QztFQUN6QyxrQ0FBa0M7RUFDbEMsV0FBVztBQUNiOztBQUVBO0VBQ0UsS0FBSyxNQUFNLEVBQUU7RUFDYixNQUFNLFNBQVMsRUFBRTtFQUNqQixPQUFPLE1BQU0sRUFBRTtBQUNqQjtBQUNBLHc1QkFBdzVCIiwic291cmNlc0NvbnRlbnQiOlsiLnNjYW5uZXItbGluZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAzcHg7XG4gIGJhY2tncm91bmQ6IHJnYmEoMzQsIDE5NywgOTQsIDAuOSk7XG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMzQsIDE5NywgOTQsIDEpO1xuICBhbmltYXRpb246IHNjYW4gMnMgbGluZWFyIGluZmluaXRlO1xuICB6LWluZGV4OiAyMDtcbn1cblxuQGtleWZyYW1lcyBzY2FuIHtcbiAgMCUgeyB0b3A6IDA7IH1cbiAgNTAlIHsgdG9wOiAxMDAlOyB9XG4gIDEwMCUgeyB0b3A6IDA7IH1cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","DemoVidAnalysisComponent_button_11_Template_button_click_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","stopAllAlarms","ɵɵtext","ɵɵelementEnd","DemoVidAnalysisComponent_div_13_div_13_Template_input_change_1_listener","$event","_r3","i_r4","index","onFileSelected","ɵɵelement","ɵɵproperty","cam_r5","videoUrl","ɵɵsanitizeUrl","ɵɵadvance","ɵɵpureFunction2","_c2","showThermal","ɵɵtextInterpolate1","isAnalyzing","liveCount","DemoVidAnalysisComponent_div_13_div_19_Template_button_click_1_listener","_r6","analyzeCamera","DemoVidAnalysisComponent_div_13_div_19_Template_button_click_3_listener","clearCamera","msg_r8","ɵɵtemplate","DemoVidAnalysisComponent_div_13_div_20_div_1_li_6_Template","DemoVidAnalysisComponent_div_13_div_20_div_1_li_7_Template","analysisResult","messagesSent","length","DemoVidAnalysisComponent_div_13_div_20_div_1_Template","DemoVidAnalysisComponent_div_13_div_20_div_2_Template","DemoVidAnalysisComponent_div_13_div_20_Template_button_click_3_listener","_r7","DemoVidAnalysisComponent_div_13_span_7_Template","DemoVidAnalysisComponent_div_13_span_8_Template","DemoVidAnalysisComponent_div_13_span_9_Template","DemoVidAnalysisComponent_div_13_span_10_Template","DemoVidAnalysisComponent_div_13_span_11_Template","DemoVidAnalysisComponent_div_13_div_13_Template","DemoVidAnalysisComponent_div_13_video_14_Template","DemoVidAnalysisComponent_div_13_div_15_Template","DemoVidAnalysisComponent_div_13_div_17_Template","DemoVidAnalysisComponent_div_13_div_19_Template","DemoVidAnalysisComponent_div_13_div_20_Template","_c0","gateName","file","_c1","DemoVidAnalysisComponent","isAnyAlarmRinging","cameras","some","cam","isAlarmRinging","constructor","http","ngOnInit","get","subscribe","next","savedCams","gateNames","map","c","gate","forEach","name","push","id","alarmInterval","error","err","console","event","target","files","URL","createObjectURL","stopSpecificAlarm","formData","FormData","append","post","response","animateCounting","crowdCount","thresholdExceeded","analyzeAllCameras","targetCount","isCritical","current","interval","setInterval","Math","ceil","clearInterval","triggerAudioAlarm","message","speech","SpeechSynthesisUtterance","lang","pitch","volume","window","speechSynthesis","speak","_","cancel","ngOnDestroy","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","DemoVidAnalysisComponent_Template","rf","ctx","DemoVidAnalysisComponent_Template_button_click_9_listener","DemoVidAnalysisComponent_button_11_Template","DemoVidAnalysisComponent_div_13_Template"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\demo-vid-analysis\\demo-vid-analysis.component.ts","C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\demo-vid-analysis\\demo-vid-analysis.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n// Create a structure for each camera\ninterface CameraFeed {\n  id: number;\n  gateName: string;\n  file: File | null;\n  videoUrl: string | null;\n  isAnalyzing: boolean;\n  analysisResult: any;\n  liveCount: number;\n  showThermal: boolean;\n  isAlarmRinging: boolean;\n  alarmInterval: any;\n}\n\n@Component({\n  selector: 'app-demo-vid-analysis',\n  templateUrl: './demo-vid-analysis.component.html',\n  styleUrls: ['./demo-vid-analysis.component.css']\n})\nexport class DemoVidAnalysisComponent implements OnInit, OnDestroy {\n\n  // Array to hold dynamic cameras\n  cameras: CameraFeed[] = [];\n  \n  // To check if ANY alarm is ringing to show the global \"Silence All\" button\n  get isAnyAlarmRinging(): boolean {\n    return this.cameras.some(cam => cam.isAlarmRinging);\n  }\n\n  constructor(private http: HttpClient) {}\n\n  ngOnInit() {\n    // 1. DYNAMICALLY FETCH GATES FROM DATABASE!\n    this.http.get<any[]>('http://localhost:8000/api/cameras').subscribe({\n      next: (savedCams) => {\n        let gateNames: string[] = [];\n        \n        if (savedCams.length > 0) {\n          // If you created custom gates in RTSP setup, pull them all!\n          gateNames = savedCams.map(c => c.gate);\n        } else {\n          // Fallback if database is completely empty\n          gateNames = ['Gate 1', 'Gate 2', 'Gate 3', 'Gate 4', 'Gate 5']; \n        }\n\n        // 2. Create a video box for EVERY gate dynamically!\n        gateNames.forEach((name, index) => {\n          this.cameras.push({\n            id: index + 1,\n            gateName: name,\n            file: null,\n            videoUrl: null,\n            isAnalyzing: false,\n            analysisResult: null,\n            liveCount: 0,\n            showThermal: false,\n            isAlarmRinging: false,\n            alarmInterval: null\n          });\n        });\n      },\n      error: (err) => {\n        console.error(\"Failed to load dynamic gates from DB\", err);\n      }\n    });\n  }\n\n  onFileSelected(event: any, index: number) {\n    if (event.target.files && event.target.files.length > 0) {\n      const cam = this.cameras[index];\n      cam.file = event.target.files[0];\n      cam.videoUrl = URL.createObjectURL(cam.file!);\n      \n      // Reset that specific camera's stats\n      cam.analysisResult = null; \n      cam.liveCount = 0;\n      cam.showThermal = false;\n      this.stopSpecificAlarm(index);\n    }\n  }\n\n  // Analyze ONE specific camera\n  analyzeCamera(index: number) {\n    const cam = this.cameras[index];\n    if (!cam.file) return;\n\n    cam.isAnalyzing = true;\n    cam.analysisResult = null;\n    cam.liveCount = 0;\n    cam.showThermal = false;\n    \n    const formData = new FormData();\n    formData.append('file', cam.file);\n    formData.append('gate', cam.gateName); \n\n    this.http.post('http://localhost:8000/api/analyze-video', formData).subscribe({\n      next: (response: any) => {\n        cam.isAnalyzing = false;\n        cam.analysisResult = response;\n        this.animateCounting(index, response.crowdCount, response.thresholdExceeded);\n      },\n      error: (err) => {\n        console.error(`Analysis Failed for ${cam.gateName}`, err);\n        cam.isAnalyzing = false;\n      }\n    });\n  }\n\n  // Analyze ALL uploaded cameras at the same time!\n  analyzeAllCameras() {\n    this.cameras.forEach((cam, index) => {\n      if (cam.file && !cam.isAnalyzing && !cam.analysisResult) {\n        this.analyzeCamera(index);\n      }\n    });\n  }\n\n  animateCounting(index: number, targetCount: number, isCritical: boolean) {\n    const cam = this.cameras[index];\n    let current = 0;\n    const interval = setInterval(() => {\n      current += Math.ceil(targetCount / 20); // Dynamic counting speed\n      if (current >= targetCount) {\n        cam.liveCount = targetCount;\n        clearInterval(interval);\n        \n        if (isCritical) {\n          cam.showThermal = true;\n          this.triggerAudioAlarm(index);\n        }\n      } else {\n        cam.liveCount = current;\n      }\n    }, 50);\n  }\n\n  triggerAudioAlarm(index: number) {\n    const cam = this.cameras[index];\n    cam.isAlarmRinging = true;\n    \n    const message = `Critical! High crowd at ${cam.gateName}. Deploy guards to ${cam.gateName} immediately.`;\n    const speech = new SpeechSynthesisUtterance(message);\n    speech.lang = 'en-US';\n    speech.pitch = 0.9;\n    speech.volume = 1.0;\n\n    window.speechSynthesis.speak(speech);\n\n    cam.alarmInterval = setInterval(() => {\n      window.speechSynthesis.speak(speech);\n    }, 7000);\n  }\n\n  stopSpecificAlarm(index: number) {\n    const cam = this.cameras[index];\n    cam.isAlarmRinging = false;\n    if (cam.alarmInterval) {\n      clearInterval(cam.alarmInterval);\n    }\n  }\n\n  stopAllAlarms() {\n    this.cameras.forEach((_, index) => this.stopSpecificAlarm(index));\n    window.speechSynthesis.cancel(); // Stops the voice immediately\n  }\n\n  clearCamera(index: number) {\n    const cam = this.cameras[index];\n    cam.file = null;\n    cam.videoUrl = null;\n    cam.analysisResult = null;\n    cam.isAnalyzing = false;\n    cam.showThermal = false;\n    this.stopSpecificAlarm(index);\n  }\n\n  ngOnDestroy() {\n    this.stopAllAlarms();\n  }\n}","<div class=\"min-h-screen bg-[#0f172a] p-6 lg:p-8 font-sans text-gray-300\">\n  \n  <div class=\"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center bg-[#1e293b] p-5 rounded-xl border border-slate-700/50 shadow-lg\">\n    <div>\n      <h1 class=\"text-3xl font-bold text-white tracking-wide flex items-center\">\n        <div class=\"w-3 h-3 bg-red-500 rounded-full animate-pulse mr-3\"></div>\n        Live CCTV Command Center\n      </h1>\n      <p class=\"text-sm text-gray-400 mt-1 ml-6\">Simultaneous Multi-Gate Threat Detection & Alert Routing</p>\n    </div>\n\n    <div class=\"flex space-x-4 mt-4 md:mt-0\">\n      <button (click)=\"analyzeAllCameras()\" class=\"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg font-bold shadow-[0_0_15px_rgba(37,99,235,0.4)] transition-all\">\n        Scan All Uploaded Feeds\n      </button>\n      <button *ngIf=\"isAnyAlarmRinging\" (click)=\"stopAllAlarms()\" class=\"bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg font-bold shadow-[0_0_20px_rgba(220,38,38,0.8)] animate-pulse transition-all\">\n        SILENCE ALL ALARMS\n      </button>\n    </div>\n  </div>\n\n  <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n    \n    <div *ngFor=\"let cam of cameras; let i = index\" \n         class=\"bg-[#1e293b]/70 border rounded-xl overflow-hidden flex flex-col transition-all duration-500 shadow-xl relative\"\n         [ngClass]=\"{'border-red-500 shadow-[0_0_25px_rgba(239,68,68,0.3)]': cam.showThermal, 'border-slate-700/50': !cam.showThermal}\">\n      \n      <div class=\"bg-[#0f172a] px-4 py-3 flex justify-between items-center border-b border-slate-700/50\">\n        <div class=\"flex items-center space-x-2\">\n          <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg>\n          <span class=\"font-bold text-white tracking-wider\">{{ cam.gateName }} Feed</span>\n        </div>\n        \n        <span *ngIf=\"!cam.file\" class=\"text-[10px] bg-slate-700 text-gray-300 px-2 py-1 rounded font-bold\">OFFLINE</span>\n        <span *ngIf=\"cam.file && !cam.isAnalyzing && !cam.analysisResult\" class=\"text-[10px] bg-yellow-500/20 text-yellow-500 px-2 py-1 rounded font-bold\">STANDBY</span>\n        <span *ngIf=\"cam.isAnalyzing\" class=\"text-[10px] bg-blue-500/20 text-blue-400 px-2 py-1 rounded font-bold animate-pulse\">ANALYZING</span>\n        <span *ngIf=\"cam.analysisResult && !cam.showThermal\" class=\"text-[10px] bg-green-500/20 text-green-400 px-2 py-1 rounded font-bold\">NORMAL</span>\n        <span *ngIf=\"cam.showThermal\" class=\"text-[10px] bg-red-500/20 text-red-500 px-2 py-1 rounded font-bold animate-pulse\">CRITICAL</span>\n      </div>\n\n      <div class=\"relative w-full h-56 bg-black flex items-center justify-center group\">\n        \n        <div *ngIf=\"!cam.file\" class=\"w-full h-full border-2 border-dashed border-slate-600/50 m-2 rounded-lg flex flex-col items-center justify-center hover:border-blue-500 transition-colors relative cursor-pointer\">\n          <input type=\"file\" accept=\"video/mp4,video/x-m4v,video/*\" (change)=\"onFileSelected($event, i)\" class=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20\">\n          <svg class=\"w-8 h-8 text-blue-500 mb-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg>\n          <p class=\"text-xs text-gray-400 font-medium\">Add Video</p>\n        </div>\n\n        <video *ngIf=\"cam.videoUrl\" [src]=\"cam.videoUrl\" autoplay loop muted class=\"absolute inset-0 w-full h-full object-cover\"></video>\n\n        <div *ngIf=\"cam.isAnalyzing\" class=\"scanner-line\"></div>\n\n        <div class=\"absolute inset-0 bg-red-600/50 mix-blend-multiply transition-opacity duration-1000 z-10\" [ngClass]=\"{'opacity-100': cam.showThermal, 'opacity-0': !cam.showThermal}\"></div>\n\n        <div *ngIf=\"cam.file\" class=\"absolute top-2 right-2 bg-black/80 px-2 py-1 rounded border border-slate-600 z-20\">\n          <p class=\"text-xl font-mono font-bold\" [ngClass]=\"{'text-green-400': !cam.showThermal, 'text-red-500': cam.showThermal}\">\n            {{ cam.isAnalyzing ? '--' : cam.liveCount }}\n          </p>\n        </div>\n      </div>\n\n      <div class=\"p-4 bg-[#1e293b] flex-grow flex flex-col justify-between\">\n        \n        <div *ngIf=\"cam.file && !cam.analysisResult && !cam.isAnalyzing\" class=\"flex justify-between items-center w-full\">\n          <button (click)=\"analyzeCamera(i)\" class=\"bg-blue-600 hover:bg-blue-500 text-white text-xs px-4 py-2 rounded font-bold w-full mr-2\">Scan Current Feed</button>\n          <button (click)=\"clearCamera(i)\" class=\"bg-slate-700 hover:bg-slate-600 text-white text-xs p-2 rounded\">\n            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path></svg>\n          </button>\n        </div>\n\n        <div *ngIf=\"cam.analysisResult\" class=\"text-sm\">\n          \n          <div *ngIf=\"cam.showThermal\" class=\"mb-2\">\n            <p class=\"text-red-400 font-bold text-xs flex items-center mb-1\">\n              <svg class=\"w-4 h-4 mr-1 animate-pulse\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z\" clip-rule=\"evenodd\"></path></svg>\n              SMS DISPATCHED:\n            </p>\n            <ul class=\"text-[10px] text-gray-300 bg-red-500/10 p-2 rounded border border-red-500/20 max-h-16 overflow-y-auto\">\n              <li *ngFor=\"let msg of cam.analysisResult.messagesSent\">✓ {{ msg }}</li>\n              <li *ngIf=\"cam.analysisResult.messagesSent.length === 0\" class=\"text-orange-400\">⚠️ No guards assigned here.</li>\n            </ul>\n          </div>\n\n          <div *ngIf=\"!cam.showThermal\" class=\"text-green-400 text-xs font-bold bg-green-500/10 p-2 rounded border border-green-500/20 text-center\">\n            Crowd Levels Normal. No action required.\n          </div>\n\n          <button (click)=\"clearCamera(i)\" class=\"mt-3 text-xs text-gray-400 hover:text-white underline w-full text-center\">Reset Camera</button>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n</div>"],"mappings":";;;;;;;;;;;;;;;;;ICeMA,EAAA,CAAAC,cAAA,iBAA6M;IAA3KD,EAAA,CAAAE,UAAA,mBAAAC,oEAAA;MAAAH,EAAA,CAAAI,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAASF,MAAA,CAAAG,aAAA,EAAe;IAAA,EAAC;IACzDT,EAAA,CAAAU,MAAA,2BACF;IAAAV,EAAA,CAAAW,YAAA,EAAS;;;;;IAgBPX,EAAA,CAAAC,cAAA,eAAmG;IAAAD,EAAA,CAAAU,MAAA,cAAO;IAAAV,EAAA,CAAAW,YAAA,EAAO;;;;;IACjHX,EAAA,CAAAC,cAAA,eAAmJ;IAAAD,EAAA,CAAAU,MAAA,cAAO;IAAAV,EAAA,CAAAW,YAAA,EAAO;;;;;IACjKX,EAAA,CAAAC,cAAA,eAAyH;IAAAD,EAAA,CAAAU,MAAA,gBAAS;IAAAV,EAAA,CAAAW,YAAA,EAAO;;;;;IACzIX,EAAA,CAAAC,cAAA,eAAoI;IAAAD,EAAA,CAAAU,MAAA,aAAM;IAAAV,EAAA,CAAAW,YAAA,EAAO;;;;;IACjJX,EAAA,CAAAC,cAAA,eAAuH;IAAAD,EAAA,CAAAU,MAAA,eAAQ;IAAAV,EAAA,CAAAW,YAAA,EAAO;;;;;;IAMpIX,EADF,CAAAC,cAAA,cAAiN,gBAC3C;IAA1GD,EAAA,CAAAE,UAAA,oBAAAU,wEAAAC,MAAA;MAAAb,EAAA,CAAAI,aAAA,CAAAU,GAAA;MAAA,MAAAC,IAAA,GAAAf,EAAA,CAAAO,aAAA,GAAAS,KAAA;MAAA,MAAAV,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAAUF,MAAA,CAAAW,cAAA,CAAAJ,MAAA,EAAAE,IAAA,CAAyB;IAAA,EAAC;IAA9Ff,EAAA,CAAAW,YAAA,EAAoK;;IACpKX,EAAA,CAAAC,cAAA,cAA8F;IAAAD,EAAA,CAAAkB,SAAA,eAAgG;IAAAlB,EAAA,CAAAW,YAAA,EAAM;;IACpMX,EAAA,CAAAC,cAAA,YAA6C;IAAAD,EAAA,CAAAU,MAAA,gBAAS;IACxDV,EADwD,CAAAW,YAAA,EAAI,EACtD;;;;;IAENX,EAAA,CAAAkB,SAAA,gBAAiI;;;;IAArGlB,EAAA,CAAAmB,UAAA,QAAAC,MAAA,CAAAC,QAAA,EAAArB,EAAA,CAAAsB,aAAA,CAAoB;;;;;IAEhDtB,EAAA,CAAAkB,SAAA,cAAwD;;;;;IAKtDlB,EADF,CAAAC,cAAA,cAAgH,YACW;IACvHD,EAAA,CAAAU,MAAA,GACF;IACFV,EADE,CAAAW,YAAA,EAAI,EACA;;;;IAHmCX,EAAA,CAAAuB,SAAA,EAAiF;IAAjFvB,EAAA,CAAAmB,UAAA,YAAAnB,EAAA,CAAAwB,eAAA,IAAAC,GAAA,GAAAL,MAAA,CAAAM,WAAA,EAAAN,MAAA,CAAAM,WAAA,EAAiF;IACtH1B,EAAA,CAAAuB,SAAA,EACF;IADEvB,EAAA,CAAA2B,kBAAA,MAAAP,MAAA,CAAAQ,WAAA,UAAAR,MAAA,CAAAS,SAAA,MACF;;;;;;IAOA7B,EADF,CAAAC,cAAA,cAAkH,iBACoB;IAA5HD,EAAA,CAAAE,UAAA,mBAAA4B,wEAAA;MAAA9B,EAAA,CAAAI,aAAA,CAAA2B,GAAA;MAAA,MAAAhB,IAAA,GAAAf,EAAA,CAAAO,aAAA,GAAAS,KAAA;MAAA,MAAAV,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAASF,MAAA,CAAA0B,aAAA,CAAAjB,IAAA,CAAgB;IAAA,EAAC;IAAkGf,EAAA,CAAAU,MAAA,wBAAiB;IAAAV,EAAA,CAAAW,YAAA,EAAS;IAC9JX,EAAA,CAAAC,cAAA,iBAAwG;IAAhGD,EAAA,CAAAE,UAAA,mBAAA+B,wEAAA;MAAAjC,EAAA,CAAAI,aAAA,CAAA2B,GAAA;MAAA,MAAAhB,IAAA,GAAAf,EAAA,CAAAO,aAAA,GAAAS,KAAA;MAAA,MAAAV,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAASF,MAAA,CAAA4B,WAAA,CAAAnB,IAAA,CAAc;IAAA,EAAC;;IAC9Bf,EAAA,CAAAC,cAAA,cAA2E;IAAAD,EAAA,CAAAkB,SAAA,eAA8M;IAE7RlB,EAF6R,CAAAW,YAAA,EAAM,EACxR,EACL;;;;;IAUAX,EAAA,CAAAC,cAAA,SAAwD;IAAAD,EAAA,CAAAU,MAAA,GAAW;IAAAV,EAAA,CAAAW,YAAA,EAAK;;;;IAAhBX,EAAA,CAAAuB,SAAA,EAAW;IAAXvB,EAAA,CAAA2B,kBAAA,YAAAQ,MAAA,KAAW;;;;;IACnEnC,EAAA,CAAAC,cAAA,aAAiF;IAAAD,EAAA,CAAAU,MAAA,4CAA2B;IAAAV,EAAA,CAAAW,YAAA,EAAK;;;;;IANnHX,EADF,CAAAC,cAAA,cAA0C,YACyB;;IAC/DD,EAAA,CAAAC,cAAA,cAAgF;IAAAD,EAAA,CAAAkB,SAAA,eAAuQ;IAAAlB,EAAA,CAAAW,YAAA,EAAM;IAC7VX,EAAA,CAAAU,MAAA,wBACF;IAAAV,EAAA,CAAAW,YAAA,EAAI;;IACJX,EAAA,CAAAC,cAAA,aAAkH;IAEhHD,EADA,CAAAoC,UAAA,IAAAC,0DAAA,iBAAwD,IAAAC,0DAAA,iBACyB;IAErFtC,EADE,CAAAW,YAAA,EAAK,EACD;;;;IAHkBX,EAAA,CAAAuB,SAAA,GAAkC;IAAlCvB,EAAA,CAAAmB,UAAA,YAAAC,MAAA,CAAAmB,cAAA,CAAAC,YAAA,CAAkC;IACjDxC,EAAA,CAAAuB,SAAA,EAAkD;IAAlDvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAmB,cAAA,CAAAC,YAAA,CAAAC,MAAA,OAAkD;;;;;IAI3DzC,EAAA,CAAAC,cAAA,cAA0I;IACxID,EAAA,CAAAU,MAAA,iDACF;IAAAV,EAAA,CAAAW,YAAA,EAAM;;;;;;IAfRX,EAAA,CAAAC,cAAA,cAAgD;IAa9CD,EAXA,CAAAoC,UAAA,IAAAM,qDAAA,kBAA0C,IAAAC,qDAAA,kBAWgG;IAI1I3C,EAAA,CAAAC,cAAA,iBAAkH;IAA1GD,EAAA,CAAAE,UAAA,mBAAA0C,wEAAA;MAAA5C,EAAA,CAAAI,aAAA,CAAAyC,GAAA;MAAA,MAAA9B,IAAA,GAAAf,EAAA,CAAAO,aAAA,GAAAS,KAAA;MAAA,MAAAV,MAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAAAP,EAAA,CAAAQ,WAAA,CAASF,MAAA,CAAA4B,WAAA,CAAAnB,IAAA,CAAc;IAAA,EAAC;IAAkFf,EAAA,CAAAU,MAAA,mBAAY;IAChIV,EADgI,CAAAW,YAAA,EAAS,EACnI;;;;IAhBEX,EAAA,CAAAuB,SAAA,EAAqB;IAArBvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAM,WAAA,CAAqB;IAWrB1B,EAAA,CAAAuB,SAAA,EAAsB;IAAtBvB,EAAA,CAAAmB,UAAA,UAAAC,MAAA,CAAAM,WAAA,CAAsB;;;;;IAvD9B1B,EALJ,CAAAC,cAAA,cAEoI,cAE/B,cACxD;;IACvCD,EAAA,CAAAC,cAAA,cAAyF;IAAAD,EAAA,CAAAkB,SAAA,eAAoN;IAAAlB,EAAA,CAAAW,YAAA,EAAM;;IACnTX,EAAA,CAAAC,cAAA,eAAkD;IAAAD,EAAA,CAAAU,MAAA,GAAuB;IAC3EV,EAD2E,CAAAW,YAAA,EAAO,EAC5E;IAMNX,EAJA,CAAAoC,UAAA,IAAAU,+CAAA,mBAAmG,IAAAC,+CAAA,mBACgD,IAAAC,+CAAA,mBAC1B,KAAAC,gDAAA,mBACW,KAAAC,gDAAA,mBACb;IACzHlD,EAAA,CAAAW,YAAA,EAAM;IAENX,EAAA,CAAAC,cAAA,eAAkF;IAUhFD,EARA,CAAAoC,UAAA,KAAAe,+CAAA,kBAAiN,KAAAC,iDAAA,oBAMxF,KAAAC,+CAAA,kBAEvE;IAElDrD,EAAA,CAAAkB,SAAA,eAAuL;IAEvLlB,EAAA,CAAAoC,UAAA,KAAAkB,+CAAA,kBAAgH;IAKlHtD,EAAA,CAAAW,YAAA,EAAM;IAENX,EAAA,CAAAC,cAAA,eAAsE;IASpED,EAPA,CAAAoC,UAAA,KAAAmB,+CAAA,kBAAkH,KAAAC,+CAAA,kBAOlE;IAqBpDxD,EADE,CAAAW,YAAA,EAAM,EACF;;;;IAlEDX,EAAA,CAAAmB,UAAA,YAAAnB,EAAA,CAAAwB,eAAA,KAAAiC,GAAA,EAAArC,MAAA,CAAAM,WAAA,GAAAN,MAAA,CAAAM,WAAA,EAA8H;IAK3E1B,EAAA,CAAAuB,SAAA,GAAuB;IAAvBvB,EAAA,CAAA2B,kBAAA,KAAAP,MAAA,CAAAsC,QAAA,UAAuB;IAGpE1D,EAAA,CAAAuB,SAAA,EAAe;IAAfvB,EAAA,CAAAmB,UAAA,UAAAC,MAAA,CAAAuC,IAAA,CAAe;IACf3D,EAAA,CAAAuB,SAAA,EAAyD;IAAzDvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAuC,IAAA,KAAAvC,MAAA,CAAAQ,WAAA,KAAAR,MAAA,CAAAmB,cAAA,CAAyD;IACzDvC,EAAA,CAAAuB,SAAA,EAAqB;IAArBvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAQ,WAAA,CAAqB;IACrB5B,EAAA,CAAAuB,SAAA,EAA4C;IAA5CvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAmB,cAAA,KAAAnB,MAAA,CAAAM,WAAA,CAA4C;IAC5C1B,EAAA,CAAAuB,SAAA,EAAqB;IAArBvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAM,WAAA,CAAqB;IAKtB1B,EAAA,CAAAuB,SAAA,GAAe;IAAfvB,EAAA,CAAAmB,UAAA,UAAAC,MAAA,CAAAuC,IAAA,CAAe;IAMb3D,EAAA,CAAAuB,SAAA,EAAkB;IAAlBvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAC,QAAA,CAAkB;IAEpBrB,EAAA,CAAAuB,SAAA,EAAqB;IAArBvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAQ,WAAA,CAAqB;IAE0E5B,EAAA,CAAAuB,SAAA,EAA2E;IAA3EvB,EAAA,CAAAmB,UAAA,YAAAnB,EAAA,CAAAwB,eAAA,KAAAoC,GAAA,EAAAxC,MAAA,CAAAM,WAAA,GAAAN,MAAA,CAAAM,WAAA,EAA2E;IAE1K1B,EAAA,CAAAuB,SAAA,EAAc;IAAdvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAuC,IAAA,CAAc;IASd3D,EAAA,CAAAuB,SAAA,GAAyD;IAAzDvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAuC,IAAA,KAAAvC,MAAA,CAAAmB,cAAA,KAAAnB,MAAA,CAAAQ,WAAA,CAAyD;IAOzD5B,EAAA,CAAAuB,SAAA,EAAwB;IAAxBvB,EAAA,CAAAmB,UAAA,SAAAC,MAAA,CAAAmB,cAAA,CAAwB;;;ADhDtC,OAAM,MAAOsB,wBAAwB;EAKnC;EACA,IAAIC,iBAAiBA,CAAA;IACnB,OAAO,IAAI,CAACC,OAAO,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,cAAc,CAAC;EACrD;EAEAC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IARxB;IACA,KAAAL,OAAO,GAAiB,EAAE;EAOa;EAEvCM,QAAQA,CAAA;IACN;IACA,IAAI,CAACD,IAAI,CAACE,GAAG,CAAQ,mCAAmC,CAAC,CAACC,SAAS,CAAC;MAClEC,IAAI,EAAGC,SAAS,IAAI;QAClB,IAAIC,SAAS,GAAa,EAAE;QAE5B,IAAID,SAAS,CAAChC,MAAM,GAAG,CAAC,EAAE;UACxB;UACAiC,SAAS,GAAGD,SAAS,CAACE,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;QACxC,CAAC,MAAM;UACL;UACAH,SAAS,GAAG,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC;QAChE;QAEA;QACAA,SAAS,CAACI,OAAO,CAAC,CAACC,IAAI,EAAE/D,KAAK,KAAI;UAChC,IAAI,CAAC+C,OAAO,CAACiB,IAAI,CAAC;YAChBC,EAAE,EAAEjE,KAAK,GAAG,CAAC;YACb0C,QAAQ,EAAEqB,IAAI;YACdpB,IAAI,EAAE,IAAI;YACVtC,QAAQ,EAAE,IAAI;YACdO,WAAW,EAAE,KAAK;YAClBW,cAAc,EAAE,IAAI;YACpBV,SAAS,EAAE,CAAC;YACZH,WAAW,EAAE,KAAK;YAClBwC,cAAc,EAAE,KAAK;YACrBgB,aAAa,EAAE;WAChB,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC;MACDC,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,sCAAsC,EAAEC,GAAG,CAAC;MAC5D;KACD,CAAC;EACJ;EAEAnE,cAAcA,CAACqE,KAAU,EAAEtE,KAAa;IACtC,IAAIsE,KAAK,CAACC,MAAM,CAACC,KAAK,IAAIF,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC/C,MAAM,GAAG,CAAC,EAAE;MACvD,MAAMwB,GAAG,GAAG,IAAI,CAACF,OAAO,CAAC/C,KAAK,CAAC;MAC/BiD,GAAG,CAACN,IAAI,GAAG2B,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAChCvB,GAAG,CAAC5C,QAAQ,GAAGoE,GAAG,CAACC,eAAe,CAACzB,GAAG,CAACN,IAAK,CAAC;MAE7C;MACAM,GAAG,CAAC1B,cAAc,GAAG,IAAI;MACzB0B,GAAG,CAACpC,SAAS,GAAG,CAAC;MACjBoC,GAAG,CAACvC,WAAW,GAAG,KAAK;MACvB,IAAI,CAACiE,iBAAiB,CAAC3E,KAAK,CAAC;IAC/B;EACF;EAEA;EACAgB,aAAaA,CAAChB,KAAa;IACzB,MAAMiD,GAAG,GAAG,IAAI,CAACF,OAAO,CAAC/C,KAAK,CAAC;IAC/B,IAAI,CAACiD,GAAG,CAACN,IAAI,EAAE;IAEfM,GAAG,CAACrC,WAAW,GAAG,IAAI;IACtBqC,GAAG,CAAC1B,cAAc,GAAG,IAAI;IACzB0B,GAAG,CAACpC,SAAS,GAAG,CAAC;IACjBoC,GAAG,CAACvC,WAAW,GAAG,KAAK;IAEvB,MAAMkE,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE7B,GAAG,CAACN,IAAI,CAAC;IACjCiC,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE7B,GAAG,CAACP,QAAQ,CAAC;IAErC,IAAI,CAACU,IAAI,CAAC2B,IAAI,CAAC,yCAAyC,EAAEH,QAAQ,CAAC,CAACrB,SAAS,CAAC;MAC5EC,IAAI,EAAGwB,QAAa,IAAI;QACtB/B,GAAG,CAACrC,WAAW,GAAG,KAAK;QACvBqC,GAAG,CAAC1B,cAAc,GAAGyD,QAAQ;QAC7B,IAAI,CAACC,eAAe,CAACjF,KAAK,EAAEgF,QAAQ,CAACE,UAAU,EAAEF,QAAQ,CAACG,iBAAiB,CAAC;MAC9E,CAAC;MACDhB,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,uBAAuBlB,GAAG,CAACP,QAAQ,EAAE,EAAE0B,GAAG,CAAC;QACzDnB,GAAG,CAACrC,WAAW,GAAG,KAAK;MACzB;KACD,CAAC;EACJ;EAEA;EACAwE,iBAAiBA,CAAA;IACf,IAAI,CAACrC,OAAO,CAACe,OAAO,CAAC,CAACb,GAAG,EAAEjD,KAAK,KAAI;MAClC,IAAIiD,GAAG,CAACN,IAAI,IAAI,CAACM,GAAG,CAACrC,WAAW,IAAI,CAACqC,GAAG,CAAC1B,cAAc,EAAE;QACvD,IAAI,CAACP,aAAa,CAAChB,KAAK,CAAC;MAC3B;IACF,CAAC,CAAC;EACJ;EAEAiF,eAAeA,CAACjF,KAAa,EAAEqF,WAAmB,EAAEC,UAAmB;IACrE,MAAMrC,GAAG,GAAG,IAAI,CAACF,OAAO,CAAC/C,KAAK,CAAC;IAC/B,IAAIuF,OAAO,GAAG,CAAC;IACf,MAAMC,QAAQ,GAAGC,WAAW,CAAC,MAAK;MAChCF,OAAO,IAAIG,IAAI,CAACC,IAAI,CAACN,WAAW,GAAG,EAAE,CAAC,CAAC,CAAC;MACxC,IAAIE,OAAO,IAAIF,WAAW,EAAE;QAC1BpC,GAAG,CAACpC,SAAS,GAAGwE,WAAW;QAC3BO,aAAa,CAACJ,QAAQ,CAAC;QAEvB,IAAIF,UAAU,EAAE;UACdrC,GAAG,CAACvC,WAAW,GAAG,IAAI;UACtB,IAAI,CAACmF,iBAAiB,CAAC7F,KAAK,CAAC;QAC/B;MACF,CAAC,MAAM;QACLiD,GAAG,CAACpC,SAAS,GAAG0E,OAAO;MACzB;IACF,CAAC,EAAE,EAAE,CAAC;EACR;EAEAM,iBAAiBA,CAAC7F,KAAa;IAC7B,MAAMiD,GAAG,GAAG,IAAI,CAACF,OAAO,CAAC/C,KAAK,CAAC;IAC/BiD,GAAG,CAACC,cAAc,GAAG,IAAI;IAEzB,MAAM4C,OAAO,GAAG,2BAA2B7C,GAAG,CAACP,QAAQ,sBAAsBO,GAAG,CAACP,QAAQ,eAAe;IACxG,MAAMqD,MAAM,GAAG,IAAIC,wBAAwB,CAACF,OAAO,CAAC;IACpDC,MAAM,CAACE,IAAI,GAAG,OAAO;IACrBF,MAAM,CAACG,KAAK,GAAG,GAAG;IAClBH,MAAM,CAACI,MAAM,GAAG,GAAG;IAEnBC,MAAM,CAACC,eAAe,CAACC,KAAK,CAACP,MAAM,CAAC;IAEpC9C,GAAG,CAACiB,aAAa,GAAGuB,WAAW,CAAC,MAAK;MACnCW,MAAM,CAACC,eAAe,CAACC,KAAK,CAACP,MAAM,CAAC;IACtC,CAAC,EAAE,IAAI,CAAC;EACV;EAEApB,iBAAiBA,CAAC3E,KAAa;IAC7B,MAAMiD,GAAG,GAAG,IAAI,CAACF,OAAO,CAAC/C,KAAK,CAAC;IAC/BiD,GAAG,CAACC,cAAc,GAAG,KAAK;IAC1B,IAAID,GAAG,CAACiB,aAAa,EAAE;MACrB0B,aAAa,CAAC3C,GAAG,CAACiB,aAAa,CAAC;IAClC;EACF;EAEAzE,aAAaA,CAAA;IACX,IAAI,CAACsD,OAAO,CAACe,OAAO,CAAC,CAACyC,CAAC,EAAEvG,KAAK,KAAK,IAAI,CAAC2E,iBAAiB,CAAC3E,KAAK,CAAC,CAAC;IACjEoG,MAAM,CAACC,eAAe,CAACG,MAAM,EAAE,CAAC,CAAC;EACnC;EAEAtF,WAAWA,CAAClB,KAAa;IACvB,MAAMiD,GAAG,GAAG,IAAI,CAACF,OAAO,CAAC/C,KAAK,CAAC;IAC/BiD,GAAG,CAACN,IAAI,GAAG,IAAI;IACfM,GAAG,CAAC5C,QAAQ,GAAG,IAAI;IACnB4C,GAAG,CAAC1B,cAAc,GAAG,IAAI;IACzB0B,GAAG,CAACrC,WAAW,GAAG,KAAK;IACvBqC,GAAG,CAACvC,WAAW,GAAG,KAAK;IACvB,IAAI,CAACiE,iBAAiB,CAAC3E,KAAK,CAAC;EAC/B;EAEAyG,WAAWA,CAAA;IACT,IAAI,CAAChH,aAAa,EAAE;EACtB;;;uBA/JWoD,wBAAwB,EAAA7D,EAAA,CAAA0H,iBAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;YAAxB/D,wBAAwB;MAAAgE,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,kCAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UClB/BnI,EAJN,CAAAC,cAAA,aAA0E,aAEiF,UAClJ,YACuE;UACxED,EAAA,CAAAkB,SAAA,aAAsE;UACtElB,EAAA,CAAAU,MAAA,iCACF;UAAAV,EAAA,CAAAW,YAAA,EAAK;UACLX,EAAA,CAAAC,cAAA,WAA2C;UAAAD,EAAA,CAAAU,MAAA,+DAAwD;UACrGV,EADqG,CAAAW,YAAA,EAAI,EACnG;UAGJX,EADF,CAAAC,cAAA,aAAyC,gBACoI;UAAnKD,EAAA,CAAAE,UAAA,mBAAAmI,0DAAA;YAAA,OAASD,GAAA,CAAAhC,iBAAA,EAAmB;UAAA,EAAC;UACnCpG,EAAA,CAAAU,MAAA,iCACF;UAAAV,EAAA,CAAAW,YAAA,EAAS;UACTX,EAAA,CAAAoC,UAAA,KAAAkG,2CAAA,oBAA6M;UAIjNtI,EADE,CAAAW,YAAA,EAAM,EACF;UAENX,EAAA,CAAAC,cAAA,cAAkE;UAEhED,EAAA,CAAAoC,UAAA,KAAAmG,wCAAA,mBAEoI;UAqExIvI,EAFE,CAAAW,YAAA,EAAM,EAEF;;;UA/ESX,EAAA,CAAAuB,SAAA,IAAuB;UAAvBvB,EAAA,CAAAmB,UAAA,SAAAiH,GAAA,CAAAtE,iBAAA,CAAuB;UAQb9D,EAAA,CAAAuB,SAAA,GAAY;UAAZvB,EAAA,CAAAmB,UAAA,YAAAiH,GAAA,CAAArE,OAAA,CAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}