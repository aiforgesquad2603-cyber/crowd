{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services/threshold.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../../../shared/glass-card/glass-card.component\";\nexport let ThresholdSettingsComponent = /*#__PURE__*/(() => {\n  class ThresholdSettingsComponent {\n    // Inject the ThresholdService to manage global state\n    constructor(thresholdService) {\n      this.thresholdService = thresholdService;\n      // Model bound to the input field in your HTML\n      this.crowdLimit = null;\n    }\n    ngOnInit() {\n      // Subscribe to the service when the component loads.\n      // This ensures the input box always displays the currently active limit (e.g., 50).\n      this.thresholdService.threshold$.subscribe(settings => {\n        this.crowdLimit = settings.crowdLimitPerGate;\n      });\n    }\n    saveThresholds() {\n      // Basic validation to prevent saving empty or negative numbers\n      if (!this.crowdLimit || this.crowdLimit <= 0) {\n        alert('Please enter a valid crowd limit number.');\n        return;\n      }\n      // Call the service to broadcast the new limit to the rest of the application\n      this.thresholdService.updateThreshold(this.crowdLimit);\n      // Provide feedback to the user and the console\n      console.log('Saved new threshold limit:', this.crowdLimit);\n      alert(`System threshold successfully updated to ${this.crowdLimit} people per gate.`);\n    }\n    static {\n      this.ɵfac = function ThresholdSettingsComponent_Factory(t) {\n        return new (t || ThresholdSettingsComponent)(i0.ɵɵdirectiveInject(i1.ThresholdService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ThresholdSettingsComponent,\n        selectors: [[\"app-threshold-settings\"]],\n        decls: 9,\n        vars: 1,\n        consts: [[\"customClasses\", \"p-6 flex flex-col justify-between\"], [1, \"text-xl\", \"font-medium\", \"text-gray-200\", \"mb-6\", \"tracking-wide\"], [1, \"mb-6\"], [\"type\", \"number\", \"placeholder\", \"Crowd Limit per Gate (e.g., 50)\", 1, \"w-full\", \"bg-[#0f172a]/80\", \"border\", \"border-slate-600/50\", \"rounded-lg\", \"px-4\", \"py-3\", \"text-gray-200\", \"placeholder-gray-500\", \"focus:outline-none\", \"focus:border-blue-500\", \"focus:ring-1\", \"focus:ring-blue-500\", \"transition-all\", 3, \"ngModelChange\", \"ngModel\"], [1, \"w-full\", \"bg-gradient-to-b\", \"from-[#3b82f6]\", \"to-[#1d4ed8]\", \"hover:from-[#60a5fa]\", \"hover:to-[#2563eb]\", \"border\", \"border-blue-400/30\", \"text-white\", \"font-medium\", \"py-3\", \"rounded-lg\", \"shadow-[0_0_15px_rgba(59,130,246,0.2)]\", \"transition-all\", \"duration-300\", \"active:scale-[0.98]\", 3, \"click\"]],\n        template: function ThresholdSettingsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"app-glass-card\", 0)(1, \"div\")(2, \"h2\", 1);\n            i0.ɵɵtext(3, \"System Thresholds\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"input\", 3);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ThresholdSettingsComponent_Template_input_ngModelChange_5_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.crowdLimit, $event) || (ctx.crowdLimit = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(6, \"div\")(7, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function ThresholdSettingsComponent_Template_button_click_7_listener() {\n              return ctx.saveThresholds();\n            });\n            i0.ɵɵtext(8, \" Save Thresholds \");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.crowdLimit);\n          }\n        },\n        dependencies: [i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgModel, i3.GlassCardComponent],\n        styles: [\"[_nghost-%COMP%]{display:block;height:100%}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]:focus{box-shadow:0 0 10px #3b82f64d}\"]\n      });\n    }\n  }\n  return ThresholdSettingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}