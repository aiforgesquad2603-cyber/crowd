{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let ThresholdService = /*#__PURE__*/(() => {\n  class ThresholdService {\n    // Uncomment this when you are ready to connect to your Node.js API\n    // private apiUrl = 'http://localhost:3000/api/thresholds';\n    // constructor(private http: HttpClient) { }\n    constructor() {\n      // 1. Setup Initial State (Defaulting to 50 based on your screenshot's placeholder)\n      this.initialSettings = {\n        crowdLimitPerGate: 50\n      };\n      // 2. Create a reactive stream (BehaviorSubject) holding the threshold data\n      this.thresholdSubject = new BehaviorSubject(this.initialSettings);\n      // Expose the stream as an Observable so components can subscribe to it\n      this.threshold$ = this.thresholdSubject.asObservable();\n    }\n    /**\n     * Fetch the current threshold settings (Reactive)\n     */\n    getThresholds() {\n      return this.threshold$;\n      // BACKEND INTEGRATION READY:\n      // return this.http.get<ThresholdSettings>(this.apiUrl);\n    }\n    /**\n     * Get the current value instantly without subscribing (useful for one-off checks)\n     */\n    getCurrentLimit() {\n      return this.thresholdSubject.getValue().crowdLimitPerGate;\n    }\n    /**\n     * Update the system threshold limit\n     */\n    updateThreshold(newLimit) {\n      const updatedSettings = {\n        crowdLimitPerGate: newLimit\n      };\n      // Broadcast the new limit to all subscribed components\n      this.thresholdSubject.next(updatedSettings);\n      // BACKEND INTEGRATION READY:\n      // return this.http.put<ThresholdSettings>(this.apiUrl, updatedSettings).subscribe(\n      //   res => console.log('Threshold saved to database:', res),\n      //   err => console.error('Failed to save threshold:', err)\n      // );\n    }\n    static {\n      this.ɵfac = function ThresholdService_Factory(t) {\n        return new (t || ThresholdService)();\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ThresholdService,\n        factory: ThresholdService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ThresholdService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}