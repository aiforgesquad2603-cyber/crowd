{"ast":null,"code":"import { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ApiService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = 'http://localhost:8000/api';\n    // To refresh the table automatically\n    this.guardsUpdatedSource = new Subject();\n    this.guardsUpdated$ = this.guardsUpdatedSource.asObservable();\n  }\n  // ðŸ”’ MAGIC FUNCTION: Gets your unique account email securely\n  getEmail() {\n    return localStorage.getItem('userEmail') || '';\n  }\n  notifyGuardsUpdated() {\n    this.guardsUpdatedSource.next();\n  }\n  // --- ACCOUNT BASED APIs ---\n  getGuards() {\n    // Send email to fetch ONLY your guards\n    return this.http.get(`${this.apiUrl}/guards?user_email=${this.getEmail()}`);\n  }\n  addGuard(guardData) {\n    // Force attach your email before saving to database!\n    guardData.user_email = this.getEmail();\n    return this.http.post(`${this.apiUrl}/guards`, guardData);\n  }\n  deleteGuard(id) {\n    return this.http.delete(`${this.apiUrl}/guards/${id}`);\n  }\n  static {\n    this.Éµfac = function ApiService_Factory(t) {\n      return new (t || ApiService)(i0.ÉµÉµinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.Éµprov = /*@__PURE__*/i0.ÉµÉµdefineInjectable({\n      token: ApiService,\n      factory: ApiService.Éµfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["Subject","ApiService","constructor","http","apiUrl","guardsUpdatedSource","guardsUpdated$","asObservable","getEmail","localStorage","getItem","notifyGuardsUpdated","next","getGuards","get","addGuard","guardData","user_email","post","deleteGuard","id","delete","i0","ÉµÉµinject","i1","HttpClient","factory","Éµfac","providedIn"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\services\\api.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n  private apiUrl = 'http://localhost:8000/api';\n\n  // To refresh the table automatically\n  private guardsUpdatedSource = new Subject<void>();\n  guardsUpdated$ = this.guardsUpdatedSource.asObservable();\n\n  constructor(private http: HttpClient) { }\n\n  // ðŸ”’ MAGIC FUNCTION: Gets your unique account email securely\n  private getEmail(): string {\n    return localStorage.getItem('userEmail') || '';\n  }\n\n  notifyGuardsUpdated() {\n    this.guardsUpdatedSource.next();\n  }\n\n  // --- ACCOUNT BASED APIs ---\n  \n  getGuards() {\n    // Send email to fetch ONLY your guards\n    return this.http.get<any[]>(`${this.apiUrl}/guards?user_email=${this.getEmail()}`);\n  }\n\n  addGuard(guardData: any) {\n    // Force attach your email before saving to database!\n    guardData.user_email = this.getEmail();\n    return this.http.post(`${this.apiUrl}/guards`, guardData);\n  }\n\n  deleteGuard(id: string) {\n    return this.http.delete(`${this.apiUrl}/guards/${id}`);\n  }\n}"],"mappings":"AAEA,SAASA,OAAO,QAAQ,MAAM;;;AAK9B,OAAM,MAAOC,UAAU;EAOrBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IANhB,KAAAC,MAAM,GAAG,2BAA2B;IAE5C;IACQ,KAAAC,mBAAmB,GAAG,IAAIL,OAAO,EAAQ;IACjD,KAAAM,cAAc,GAAG,IAAI,CAACD,mBAAmB,CAACE,YAAY,EAAE;EAEhB;EAExC;EACQC,QAAQA,CAAA;IACd,OAAOC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,EAAE;EAChD;EAEAC,mBAAmBA,CAAA;IACjB,IAAI,CAACN,mBAAmB,CAACO,IAAI,EAAE;EACjC;EAEA;EAEAC,SAASA,CAAA;IACP;IACA,OAAO,IAAI,CAACV,IAAI,CAACW,GAAG,CAAQ,GAAG,IAAI,CAACV,MAAM,sBAAsB,IAAI,CAACI,QAAQ,EAAE,EAAE,CAAC;EACpF;EAEAO,QAAQA,CAACC,SAAc;IACrB;IACAA,SAAS,CAACC,UAAU,GAAG,IAAI,CAACT,QAAQ,EAAE;IACtC,OAAO,IAAI,CAACL,IAAI,CAACe,IAAI,CAAC,GAAG,IAAI,CAACd,MAAM,SAAS,EAAEY,SAAS,CAAC;EAC3D;EAEAG,WAAWA,CAACC,EAAU;IACpB,OAAO,IAAI,CAACjB,IAAI,CAACkB,MAAM,CAAC,GAAG,IAAI,CAACjB,MAAM,WAAWgB,EAAE,EAAE,CAAC;EACxD;;;uBAjCWnB,UAAU,EAAAqB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAVxB,UAAU;MAAAyB,OAAA,EAAVzB,UAAU,CAAA0B,IAAA;MAAAC,UAAA,EAFT;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}