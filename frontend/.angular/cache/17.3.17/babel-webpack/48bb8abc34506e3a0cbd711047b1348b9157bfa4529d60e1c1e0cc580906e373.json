{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = (a0, a1) => ({\n  \"border-red-500 shadow-[0_0_25px_rgba(239,68,68,0.3)]\": a0,\n  \"border-slate-700/50\": a1\n});\nconst _c1 = (a0, a1) => ({\n  \"opacity-100\": a0,\n  \"opacity-0\": a1\n});\nconst _c2 = (a0, a1) => ({\n  \"text-green-400\": a0,\n  \"text-red-500\": a1\n});\nfunction DemoVidAnalysisComponent_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"button\", 10);\n    i0.…µ…µlistener(\"click\", function DemoVidAnalysisComponent_button_11_Template_button_click_0_listener() {\n      i0.…µ…µrestoreView(_r1);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.stopAllAlarms());\n    });\n    i0.…µ…µtext(1, \" SILENCE ALL ALARMS \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 31);\n    i0.…µ…µtext(1, \"OFFLINE\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 32);\n    i0.…µ…µtext(1, \"STANDBY\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 33);\n    i0.…µ…µtext(1, \"ANALYZING\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 34);\n    i0.…µ…µtext(1, \"NORMAL\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 35);\n    i0.…µ…µtext(1, \"CRITICAL\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 36)(1, \"input\", 37);\n    i0.…µ…µlistener(\"change\", function DemoVidAnalysisComponent_div_13_div_13_Template_input_change_1_listener($event) {\n      i0.…µ…µrestoreView(_r3);\n      const i_r4 = i0.…µ…µnextContext().index;\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.onFileSelected($event, i_r4));\n    });\n    i0.…µ…µelementEnd();\n    i0.…µ…µnamespaceSVG();\n    i0.…µ…µelementStart(2, \"svg\", 38);\n    i0.…µ…µelement(3, \"path\", 39);\n    i0.…µ…µelementEnd();\n    i0.…µ…µnamespaceHTML();\n    i0.…µ…µelementStart(4, \"p\", 40);\n    i0.…µ…µtext(5, \"Add Video\");\n    i0.…µ…µelementEnd()();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_video_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelement(0, \"video\", 41);\n  }\n  if (rf & 2) {\n    const cam_r5 = i0.…µ…µnextContext().$implicit;\n    i0.…µ…µproperty(\"src\", cam_r5.videoUrl, i0.…µ…µsanitizeUrl);\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelement(0, \"div\", 42);\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 43)(1, \"p\", 44);\n    i0.…µ…µtext(2);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r5 = i0.…µ…µnextContext().$implicit;\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngClass\", i0.…µ…µpureFunction2(2, _c2, !cam_r5.showThermal, cam_r5.showThermal));\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate1(\" \", cam_r5.isAnalyzing ? \"--\" : cam_r5.liveCount, \" \");\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 45)(1, \"button\", 46);\n    i0.…µ…µlistener(\"click\", function DemoVidAnalysisComponent_div_13_div_19_Template_button_click_1_listener() {\n      i0.…µ…µrestoreView(_r6);\n      const i_r4 = i0.…µ…µnextContext().index;\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.analyzeCamera(i_r4));\n    });\n    i0.…µ…µtext(2, \"Scan Current Feed\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"button\", 47);\n    i0.…µ…µlistener(\"click\", function DemoVidAnalysisComponent_div_13_div_19_Template_button_click_3_listener() {\n      i0.…µ…µrestoreView(_r6);\n      const i_r4 = i0.…µ…µnextContext().index;\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.clearCamera(i_r4));\n    });\n    i0.…µ…µnamespaceSVG();\n    i0.…µ…µelementStart(4, \"svg\", 48);\n    i0.…µ…µelement(5, \"path\", 49);\n    i0.…µ…µelementEnd()()();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_div_1_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"li\");\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const msg_r8 = ctx.$implicit;\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate1(\"\\u2713 \", msg_r8, \"\");\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_div_1_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"li\", 61);\n    i0.…µ…µtext(1, \"\\u26A0\\uFE0F No guards assigned here.\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 54)(1, \"p\", 55);\n    i0.…µ…µnamespaceSVG();\n    i0.…µ…µelementStart(2, \"svg\", 56);\n    i0.…µ…µelement(3, \"path\", 57);\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(4, \" SMS DISPATCHED: \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µnamespaceHTML();\n    i0.…µ…µelementStart(5, \"ul\", 58);\n    i0.…µ…µtemplate(6, DemoVidAnalysisComponent_div_13_div_20_div_1_li_6_Template, 2, 1, \"li\", 59)(7, DemoVidAnalysisComponent_div_13_div_20_div_1_li_7_Template, 2, 0, \"li\", 60);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r5 = i0.…µ…µnextContext(2).$implicit;\n    i0.…µ…µadvance(6);\n    i0.…µ…µproperty(\"ngForOf\", cam_r5.analysisResult.messagesSent);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.analysisResult.messagesSent.length === 0);\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 62);\n    i0.…µ…µtext(1, \" Crowd Levels Normal. No action required. \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 50);\n    i0.…µ…µtemplate(1, DemoVidAnalysisComponent_div_13_div_20_div_1_Template, 8, 2, \"div\", 51)(2, DemoVidAnalysisComponent_div_13_div_20_div_2_Template, 2, 0, \"div\", 52);\n    i0.…µ…µelementStart(3, \"button\", 53);\n    i0.…µ…µlistener(\"click\", function DemoVidAnalysisComponent_div_13_div_20_Template_button_click_3_listener() {\n      i0.…µ…µrestoreView(_r7);\n      const i_r4 = i0.…µ…µnextContext().index;\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.clearCamera(i_r4));\n    });\n    i0.…µ…µtext(4, \"Reset Camera\");\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r5 = i0.…µ…µnextContext().$implicit;\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.showThermal);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", !cam_r5.showThermal);\n  }\n}\nfunction DemoVidAnalysisComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13);\n    i0.…µ…µnamespaceSVG();\n    i0.…µ…µelementStart(3, \"svg\", 14);\n    i0.…µ…µelement(4, \"path\", 15);\n    i0.…µ…µelementEnd();\n    i0.…µ…µnamespaceHTML();\n    i0.…µ…µelementStart(5, \"span\", 16);\n    i0.…µ…µtext(6);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µtemplate(7, DemoVidAnalysisComponent_div_13_span_7_Template, 2, 0, \"span\", 17)(8, DemoVidAnalysisComponent_div_13_span_8_Template, 2, 0, \"span\", 18)(9, DemoVidAnalysisComponent_div_13_span_9_Template, 2, 0, \"span\", 19)(10, DemoVidAnalysisComponent_div_13_span_10_Template, 2, 0, \"span\", 20)(11, DemoVidAnalysisComponent_div_13_span_11_Template, 2, 0, \"span\", 21);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(12, \"div\", 22);\n    i0.…µ…µtemplate(13, DemoVidAnalysisComponent_div_13_div_13_Template, 6, 0, \"div\", 23)(14, DemoVidAnalysisComponent_div_13_video_14_Template, 1, 1, \"video\", 24)(15, DemoVidAnalysisComponent_div_13_div_15_Template, 1, 0, \"div\", 25);\n    i0.…µ…µelement(16, \"div\", 26);\n    i0.…µ…µtemplate(17, DemoVidAnalysisComponent_div_13_div_17_Template, 3, 5, \"div\", 27);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(18, \"div\", 28);\n    i0.…µ…µtemplate(19, DemoVidAnalysisComponent_div_13_div_19_Template, 6, 0, \"div\", 29)(20, DemoVidAnalysisComponent_div_13_div_20_Template, 5, 2, \"div\", 30);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const cam_r5 = ctx.$implicit;\n    i0.…µ…µproperty(\"ngClass\", i0.…µ…µpureFunction2(14, _c0, cam_r5.showThermal, !cam_r5.showThermal));\n    i0.…µ…µadvance(6);\n    i0.…µ…µtextInterpolate1(\"\", cam_r5.gateName, \" Feed\");\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", !cam_r5.file);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.file && !cam_r5.isAnalyzing && !cam_r5.analysisResult);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.isAnalyzing);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.analysisResult && !cam_r5.showThermal);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.showThermal);\n    i0.…µ…µadvance(2);\n    i0.…µ…µproperty(\"ngIf\", !cam_r5.file);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.videoUrl);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.isAnalyzing);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngClass\", i0.…µ…µpureFunction2(17, _c1, cam_r5.showThermal, !cam_r5.showThermal));\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.file);\n    i0.…µ…µadvance(2);\n    i0.…µ…µproperty(\"ngIf\", cam_r5.file && !cam_r5.analysisResult && !cam_r5.isAnalyzing);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r5.analysisResult);\n  }\n}\nexport class DemoVidAnalysisComponent {\n  constructor(http) {\n    this.http = http;\n    this.selectedFile = null;\n    this.selectedGate = 'Gate 1';\n    this.userEmail = '';\n    this.isAnalyzing = false;\n    this.analysisResult = null;\n  }\n  ngOnInit() {\n    // Securely fetch account email\n    this.userEmail = localStorage.getItem('userEmail') || '';\n  }\n  // When user selects a video file\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    if (file) {\n      this.selectedFile = file;\n    }\n  }\n  uploadAndAnalyze() {\n    if (!this.selectedFile) {\n      alert(\"‚ö†Ô∏è Please select an .mp4 video file first!\");\n      return;\n    }\n    if (!this.userEmail) {\n      alert(\"üîí Security Lock: Please re-login to sync your account.\");\n      return;\n    }\n    this.isAnalyzing = true;\n    this.analysisResult = null; // Clear old results\n    // üöÄ We MUST use FormData to send files to FastAPI\n    const formData = new FormData();\n    formData.append('file', this.selectedFile);\n    formData.append('gate', this.selectedGate);\n    formData.append('user_email', this.userEmail); // <-- Protects against 422 Error!\n    // Send to Python AI Backend\n    this.http.post('http://localhost:8000/api/analyze-video', formData).subscribe({\n      next: res => {\n        this.isAnalyzing = false;\n        this.analysisResult = res; // Save the result to show in HTML\n        if (res.thresholdExceeded) {\n          alert(`üö® ALERT: High crowd detected! ${res.crowdCount} people counted.`);\n        } else {\n          alert(`‚úÖ Analysis Complete! ${res.crowdCount} people counted.`);\n        }\n      },\n      error: err => {\n        this.isAnalyzing = false;\n        console.error(\"Upload Error:\", err);\n        alert(\"‚ùå Failed to analyze video. Check Python terminal.\");\n      }\n    });\n  }\n  static {\n    this.…µfac = function DemoVidAnalysisComponent_Factory(t) {\n      return new (t || DemoVidAnalysisComponent)(i0.…µ…µdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: DemoVidAnalysisComponent,\n      selectors: [[\"app-demo-vid-analysis\"]],\n      decls: 14,\n      vars: 2,\n      consts: [[1, \"min-h-screen\", \"bg-[#0f172a]\", \"p-6\", \"lg:p-8\", \"font-sans\", \"text-gray-300\"], [1, \"mb-6\", \"flex\", \"flex-col\", \"md:flex-row\", \"justify-between\", \"items-start\", \"md:items-center\", \"bg-[#1e293b]\", \"p-5\", \"rounded-xl\", \"border\", \"border-slate-700/50\", \"shadow-lg\"], [1, \"text-3xl\", \"font-bold\", \"text-white\", \"tracking-wide\", \"flex\", \"items-center\"], [1, \"w-3\", \"h-3\", \"bg-red-500\", \"rounded-full\", \"animate-pulse\", \"mr-3\"], [1, \"text-sm\", \"text-gray-400\", \"mt-1\", \"ml-6\"], [1, \"flex\", \"space-x-4\", \"mt-4\", \"md:mt-0\"], [1, \"bg-blue-600\", \"hover:bg-blue-500\", \"text-white\", \"px-6\", \"py-2\", \"rounded-lg\", \"font-bold\", \"shadow-[0_0_15px_rgba(37,99,235,0.4)]\", \"transition-all\", 3, \"click\"], [\"class\", \"bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg font-bold shadow-[0_0_20px_rgba(220,38,38,0.8)] animate-pulse transition-all\", 3, \"click\", 4, \"ngIf\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-3\", \"gap-6\"], [\"class\", \"bg-[#1e293b]/70 border rounded-xl overflow-hidden flex flex-col transition-all duration-500 shadow-xl relative\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-red-600\", \"hover:bg-red-500\", \"text-white\", \"px-6\", \"py-2\", \"rounded-lg\", \"font-bold\", \"shadow-[0_0_20px_rgba(220,38,38,0.8)]\", \"animate-pulse\", \"transition-all\", 3, \"click\"], [1, \"bg-[#1e293b]/70\", \"border\", \"rounded-xl\", \"overflow-hidden\", \"flex\", \"flex-col\", \"transition-all\", \"duration-500\", \"shadow-xl\", \"relative\", 3, \"ngClass\"], [1, \"bg-[#0f172a]\", \"px-4\", \"py-3\", \"flex\", \"justify-between\", \"items-center\", \"border-b\", \"border-slate-700/50\"], [1, \"flex\", \"items-center\", \"space-x-2\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\", \"text-gray-400\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"], [1, \"font-bold\", \"text-white\", \"tracking-wider\"], [\"class\", \"text-[10px] bg-slate-700 text-gray-300 px-2 py-1 rounded font-bold\", 4, \"ngIf\"], [\"class\", \"text-[10px] bg-yellow-500/20 text-yellow-500 px-2 py-1 rounded font-bold\", 4, \"ngIf\"], [\"class\", \"text-[10px] bg-blue-500/20 text-blue-400 px-2 py-1 rounded font-bold animate-pulse\", 4, \"ngIf\"], [\"class\", \"text-[10px] bg-green-500/20 text-green-400 px-2 py-1 rounded font-bold\", 4, \"ngIf\"], [\"class\", \"text-[10px] bg-red-500/20 text-red-500 px-2 py-1 rounded font-bold animate-pulse\", 4, \"ngIf\"], [1, \"relative\", \"w-full\", \"h-56\", \"bg-black\", \"flex\", \"items-center\", \"justify-center\", \"group\"], [\"class\", \"w-full h-full border-2 border-dashed border-slate-600/50 m-2 rounded-lg flex flex-col items-center justify-center hover:border-blue-500 transition-colors relative cursor-pointer\", 4, \"ngIf\"], [\"autoplay\", \"\", \"loop\", \"\", \"muted\", \"\", \"class\", \"absolute inset-0 w-full h-full object-cover\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"scanner-line\", 4, \"ngIf\"], [1, \"absolute\", \"inset-0\", \"bg-red-600/50\", \"mix-blend-multiply\", \"transition-opacity\", \"duration-1000\", \"z-10\", 3, \"ngClass\"], [\"class\", \"absolute top-2 right-2 bg-black/80 px-2 py-1 rounded border border-slate-600 z-20\", 4, \"ngIf\"], [1, \"p-4\", \"bg-[#1e293b]\", \"flex-grow\", \"flex\", \"flex-col\", \"justify-between\"], [\"class\", \"flex justify-between items-center w-full\", 4, \"ngIf\"], [\"class\", \"text-sm\", 4, \"ngIf\"], [1, \"text-[10px]\", \"bg-slate-700\", \"text-gray-300\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\"], [1, \"text-[10px]\", \"bg-yellow-500/20\", \"text-yellow-500\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\"], [1, \"text-[10px]\", \"bg-blue-500/20\", \"text-blue-400\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\", \"animate-pulse\"], [1, \"text-[10px]\", \"bg-green-500/20\", \"text-green-400\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\"], [1, \"text-[10px]\", \"bg-red-500/20\", \"text-red-500\", \"px-2\", \"py-1\", \"rounded\", \"font-bold\", \"animate-pulse\"], [1, \"w-full\", \"h-full\", \"border-2\", \"border-dashed\", \"border-slate-600/50\", \"m-2\", \"rounded-lg\", \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"hover:border-blue-500\", \"transition-colors\", \"relative\", \"cursor-pointer\"], [\"type\", \"file\", \"accept\", \"video/mp4,video/x-m4v,video/*\", 1, \"absolute\", \"inset-0\", \"w-full\", \"h-full\", \"opacity-0\", \"cursor-pointer\", \"z-20\", 3, \"change\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-8\", \"h-8\", \"text-blue-500\", \"mb-2\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 4v16m8-8H4\"], [1, \"text-xs\", \"text-gray-400\", \"font-medium\"], [\"autoplay\", \"\", \"loop\", \"\", \"muted\", \"\", 1, \"absolute\", \"inset-0\", \"w-full\", \"h-full\", \"object-cover\", 3, \"src\"], [1, \"scanner-line\"], [1, \"absolute\", \"top-2\", \"right-2\", \"bg-black/80\", \"px-2\", \"py-1\", \"rounded\", \"border\", \"border-slate-600\", \"z-20\"], [1, \"text-xl\", \"font-mono\", \"font-bold\", 3, \"ngClass\"], [1, \"flex\", \"justify-between\", \"items-center\", \"w-full\"], [1, \"bg-blue-600\", \"hover:bg-blue-500\", \"text-white\", \"text-xs\", \"px-4\", \"py-2\", \"rounded\", \"font-bold\", \"w-full\", \"mr-2\", 3, \"click\"], [1, \"bg-slate-700\", \"hover:bg-slate-600\", \"text-white\", \"text-xs\", \"p-2\", \"rounded\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-4\", \"h-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"], [1, \"text-sm\"], [\"class\", \"mb-2\", 4, \"ngIf\"], [\"class\", \"text-green-400 text-xs font-bold bg-green-500/10 p-2 rounded border border-green-500/20 text-center\", 4, \"ngIf\"], [1, \"mt-3\", \"text-xs\", \"text-gray-400\", \"hover:text-white\", \"underline\", \"w-full\", \"text-center\", 3, \"click\"], [1, \"mb-2\"], [1, \"text-red-400\", \"font-bold\", \"text-xs\", \"flex\", \"items-center\", \"mb-1\"], [\"fill\", \"currentColor\", \"viewBox\", \"0 0 20 20\", 1, \"w-4\", \"h-4\", \"mr-1\", \"animate-pulse\"], [\"fill-rule\", \"evenodd\", \"d\", \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z\", \"clip-rule\", \"evenodd\"], [1, \"text-[10px]\", \"text-gray-300\", \"bg-red-500/10\", \"p-2\", \"rounded\", \"border\", \"border-red-500/20\", \"max-h-16\", \"overflow-y-auto\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-orange-400\", 4, \"ngIf\"], [1, \"text-orange-400\"], [1, \"text-green-400\", \"text-xs\", \"font-bold\", \"bg-green-500/10\", \"p-2\", \"rounded\", \"border\", \"border-green-500/20\", \"text-center\"]],\n      template: function DemoVidAnalysisComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h1\", 2);\n          i0.…µ…µelement(4, \"div\", 3);\n          i0.…µ…µtext(5, \" Live CCTV Command Center \");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(6, \"p\", 4);\n          i0.…µ…µtext(7, \"Simultaneous Multi-Gate Threat Detection & Alert Routing\");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(8, \"div\", 5)(9, \"button\", 6);\n          i0.…µ…µlistener(\"click\", function DemoVidAnalysisComponent_Template_button_click_9_listener() {\n            return ctx.analyzeAllCameras();\n          });\n          i0.…µ…µtext(10, \" Scan All Uploaded Feeds \");\n          i0.…µ…µelementEnd();\n          i0.…µ…µtemplate(11, DemoVidAnalysisComponent_button_11_Template, 2, 0, \"button\", 7);\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(12, \"div\", 8);\n          i0.…µ…µtemplate(13, DemoVidAnalysisComponent_div_13_Template, 21, 20, \"div\", 9);\n          i0.…µ…µelementEnd()();\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance(11);\n          i0.…µ…µproperty(\"ngIf\", ctx.isAnyAlarmRinging);\n          i0.…µ…µadvance(2);\n          i0.…µ…µproperty(\"ngForOf\", ctx.cameras);\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf],\n      styles: [\".scanner-line[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 3px;\\n  background: rgba(34, 197, 94, 0.9);\\n  box-shadow: 0 0 10px rgba(34, 197, 94, 1);\\n  animation: _ngcontent-%COMP%_scan 2s linear infinite;\\n  z-index: 20;\\n}\\n\\n@keyframes _ngcontent-%COMP%_scan {\\n  0% { top: 0; }\\n  50% { top: 100%; }\\n  100% { top: 0; }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbW8tdmlkLWFuYWx5c2lzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxXQUFXO0VBQ1gsV0FBVztFQUNYLGtDQUFrQztFQUNsQyx5Q0FBeUM7RUFDekMsa0NBQWtDO0VBQ2xDLFdBQVc7QUFDYjs7QUFFQTtFQUNFLEtBQUssTUFBTSxFQUFFO0VBQ2IsTUFBTSxTQUFTLEVBQUU7RUFDakIsT0FBTyxNQUFNLEVBQUU7QUFDakIiLCJmaWxlIjoiZGVtby12aWQtYW5hbHlzaXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zY2FubmVyLWxpbmUge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogM3B4O1xuICBiYWNrZ3JvdW5kOiByZ2JhKDM0LCAxOTcsIDk0LCAwLjkpO1xuICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDM0LCAxOTcsIDk0LCAxKTtcbiAgYW5pbWF0aW9uOiBzY2FuIDJzIGxpbmVhciBpbmZpbml0ZTtcbiAgei1pbmRleDogMjA7XG59XG5cbkBrZXlmcmFtZXMgc2NhbiB7XG4gIDAlIHsgdG9wOiAwOyB9XG4gIDUwJSB7IHRvcDogMTAwJTsgfVxuICAxMDAlIHsgdG9wOiAwOyB9XG59Il19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvZGVtby12aWQtYW5hbHlzaXMvZGVtby12aWQtYW5hbHlzaXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztFQUNQLFdBQVc7RUFDWCxXQUFXO0VBQ1gsa0NBQWtDO0VBQ2xDLHlDQUF5QztFQUN6QyxrQ0FBa0M7RUFDbEMsV0FBVztBQUNiOztBQUVBO0VBQ0UsS0FBSyxNQUFNLEVBQUU7RUFDYixNQUFNLFNBQVMsRUFBRTtFQUNqQixPQUFPLE1BQU0sRUFBRTtBQUNqQjtBQUNBLHc1QkFBdzVCIiwic291cmNlc0NvbnRlbnQiOlsiLnNjYW5uZXItbGluZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAzcHg7XG4gIGJhY2tncm91bmQ6IHJnYmEoMzQsIDE5NywgOTQsIDAuOSk7XG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMzQsIDE5NywgOTQsIDEpO1xuICBhbmltYXRpb246IHNjYW4gMnMgbGluZWFyIGluZmluaXRlO1xuICB6LWluZGV4OiAyMDtcbn1cblxuQGtleWZyYW1lcyBzY2FuIHtcbiAgMCUgeyB0b3A6IDA7IH1cbiAgNTAlIHsgdG9wOiAxMDAlOyB9XG4gIDEwMCUgeyB0b3A6IDA7IH1cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","…µ…µelementStart","…µ…µlistener","DemoVidAnalysisComponent_button_11_Template_button_click_0_listener","…µ…µrestoreView","_r1","ctx_r1","…µ…µnextContext","…µ…µresetView","stopAllAlarms","…µ…µtext","…µ…µelementEnd","DemoVidAnalysisComponent_div_13_div_13_Template_input_change_1_listener","$event","_r3","i_r4","index","onFileSelected","…µ…µelement","…µ…µproperty","cam_r5","videoUrl","…µ…µsanitizeUrl","…µ…µadvance","…µ…µpureFunction2","_c2","showThermal","…µ…µtextInterpolate1","isAnalyzing","liveCount","DemoVidAnalysisComponent_div_13_div_19_Template_button_click_1_listener","_r6","analyzeCamera","DemoVidAnalysisComponent_div_13_div_19_Template_button_click_3_listener","clearCamera","msg_r8","…µ…µtemplate","DemoVidAnalysisComponent_div_13_div_20_div_1_li_6_Template","DemoVidAnalysisComponent_div_13_div_20_div_1_li_7_Template","analysisResult","messagesSent","length","DemoVidAnalysisComponent_div_13_div_20_div_1_Template","DemoVidAnalysisComponent_div_13_div_20_div_2_Template","DemoVidAnalysisComponent_div_13_div_20_Template_button_click_3_listener","_r7","DemoVidAnalysisComponent_div_13_span_7_Template","DemoVidAnalysisComponent_div_13_span_8_Template","DemoVidAnalysisComponent_div_13_span_9_Template","DemoVidAnalysisComponent_div_13_span_10_Template","DemoVidAnalysisComponent_div_13_span_11_Template","DemoVidAnalysisComponent_div_13_div_13_Template","DemoVidAnalysisComponent_div_13_video_14_Template","DemoVidAnalysisComponent_div_13_div_15_Template","DemoVidAnalysisComponent_div_13_div_17_Template","DemoVidAnalysisComponent_div_13_div_19_Template","DemoVidAnalysisComponent_div_13_div_20_Template","_c0","gateName","file","_c1","DemoVidAnalysisComponent","constructor","http","selectedFile","selectedGate","userEmail","ngOnInit","localStorage","getItem","event","target","files","uploadAndAnalyze","alert","formData","FormData","append","post","subscribe","next","res","thresholdExceeded","crowdCount","error","err","console","…µ…µdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","DemoVidAnalysisComponent_Template","rf","ctx","DemoVidAnalysisComponent_Template_button_click_9_listener","analyzeAllCameras","DemoVidAnalysisComponent_button_11_Template","DemoVidAnalysisComponent_div_13_Template","isAnyAlarmRinging","cameras"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\demo-vid-analysis\\demo-vid-analysis.component.ts","C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\demo-vid-analysis\\demo-vid-analysis.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-demo-vid-analysis',\n  templateUrl: './demo-vid-analysis.component.html',\n  styleUrls: ['./demo-vid-analysis.component.css']\n})\nexport class DemoVidAnalysisComponent implements OnInit {\n  \n  selectedFile: File | null = null;\n  selectedGate: string = 'Gate 1';\n  userEmail: string = '';\n  \n  isAnalyzing: boolean = false;\n  analysisResult: any = null;\n\n  constructor(private http: HttpClient) {}\n\n  ngOnInit(): void {\n    // Securely fetch account email\n    this.userEmail = localStorage.getItem('userEmail') || '';\n  }\n\n  // When user selects a video file\n  onFileSelected(event: any) {\n    const file = event.target.files[0];\n    if (file) {\n      this.selectedFile = file;\n    }\n  }\n\n  uploadAndAnalyze() {\n    if (!this.selectedFile) {\n      alert(\"‚ö†Ô∏è Please select an .mp4 video file first!\");\n      return;\n    }\n    if (!this.userEmail) {\n      alert(\"üîí Security Lock: Please re-login to sync your account.\");\n      return;\n    }\n\n    this.isAnalyzing = true;\n    this.analysisResult = null; // Clear old results\n\n    // üöÄ We MUST use FormData to send files to FastAPI\n    const formData = new FormData();\n    formData.append('file', this.selectedFile);\n    formData.append('gate', this.selectedGate);\n    formData.append('user_email', this.userEmail); // <-- Protects against 422 Error!\n\n    // Send to Python AI Backend\n    this.http.post('http://localhost:8000/api/analyze-video', formData).subscribe({\n      next: (res: any) => {\n        this.isAnalyzing = false;\n        this.analysisResult = res; // Save the result to show in HTML\n        \n        if (res.thresholdExceeded) {\n          alert(`üö® ALERT: High crowd detected! ${res.crowdCount} people counted.`);\n        } else {\n          alert(`‚úÖ Analysis Complete! ${res.crowdCount} people counted.`);\n        }\n      },\n      error: (err) => {\n        this.isAnalyzing = false;\n        console.error(\"Upload Error:\", err);\n        alert(\"‚ùå Failed to analyze video. Check Python terminal.\");\n      }\n    });\n  }\n}","<div class=\"min-h-screen bg-[#0f172a] p-6 lg:p-8 font-sans text-gray-300\">\n  \n  <div class=\"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center bg-[#1e293b] p-5 rounded-xl border border-slate-700/50 shadow-lg\">\n    <div>\n      <h1 class=\"text-3xl font-bold text-white tracking-wide flex items-center\">\n        <div class=\"w-3 h-3 bg-red-500 rounded-full animate-pulse mr-3\"></div>\n        Live CCTV Command Center\n      </h1>\n      <p class=\"text-sm text-gray-400 mt-1 ml-6\">Simultaneous Multi-Gate Threat Detection & Alert Routing</p>\n    </div>\n\n    <div class=\"flex space-x-4 mt-4 md:mt-0\">\n      <button (click)=\"analyzeAllCameras()\" class=\"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg font-bold shadow-[0_0_15px_rgba(37,99,235,0.4)] transition-all\">\n        Scan All Uploaded Feeds\n      </button>\n      <button *ngIf=\"isAnyAlarmRinging\" (click)=\"stopAllAlarms()\" class=\"bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg font-bold shadow-[0_0_20px_rgba(220,38,38,0.8)] animate-pulse transition-all\">\n        SILENCE ALL ALARMS\n      </button>\n    </div>\n  </div>\n\n  <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n    \n    <div *ngFor=\"let cam of cameras; let i = index\" \n         class=\"bg-[#1e293b]/70 border rounded-xl overflow-hidden flex flex-col transition-all duration-500 shadow-xl relative\"\n         [ngClass]=\"{'border-red-500 shadow-[0_0_25px_rgba(239,68,68,0.3)]': cam.showThermal, 'border-slate-700/50': !cam.showThermal}\">\n      \n      <div class=\"bg-[#0f172a] px-4 py-3 flex justify-between items-center border-b border-slate-700/50\">\n        <div class=\"flex items-center space-x-2\">\n          <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"></path></svg>\n          <span class=\"font-bold text-white tracking-wider\">{{ cam.gateName }} Feed</span>\n        </div>\n        \n        <span *ngIf=\"!cam.file\" class=\"text-[10px] bg-slate-700 text-gray-300 px-2 py-1 rounded font-bold\">OFFLINE</span>\n        <span *ngIf=\"cam.file && !cam.isAnalyzing && !cam.analysisResult\" class=\"text-[10px] bg-yellow-500/20 text-yellow-500 px-2 py-1 rounded font-bold\">STANDBY</span>\n        <span *ngIf=\"cam.isAnalyzing\" class=\"text-[10px] bg-blue-500/20 text-blue-400 px-2 py-1 rounded font-bold animate-pulse\">ANALYZING</span>\n        <span *ngIf=\"cam.analysisResult && !cam.showThermal\" class=\"text-[10px] bg-green-500/20 text-green-400 px-2 py-1 rounded font-bold\">NORMAL</span>\n        <span *ngIf=\"cam.showThermal\" class=\"text-[10px] bg-red-500/20 text-red-500 px-2 py-1 rounded font-bold animate-pulse\">CRITICAL</span>\n      </div>\n\n      <div class=\"relative w-full h-56 bg-black flex items-center justify-center group\">\n        \n        <div *ngIf=\"!cam.file\" class=\"w-full h-full border-2 border-dashed border-slate-600/50 m-2 rounded-lg flex flex-col items-center justify-center hover:border-blue-500 transition-colors relative cursor-pointer\">\n          <input type=\"file\" accept=\"video/mp4,video/x-m4v,video/*\" (change)=\"onFileSelected($event, i)\" class=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20\">\n          <svg class=\"w-8 h-8 text-blue-500 mb-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg>\n          <p class=\"text-xs text-gray-400 font-medium\">Add Video</p>\n        </div>\n\n        <video *ngIf=\"cam.videoUrl\" [src]=\"cam.videoUrl\" autoplay loop muted class=\"absolute inset-0 w-full h-full object-cover\"></video>\n\n        <div *ngIf=\"cam.isAnalyzing\" class=\"scanner-line\"></div>\n\n        <div class=\"absolute inset-0 bg-red-600/50 mix-blend-multiply transition-opacity duration-1000 z-10\" [ngClass]=\"{'opacity-100': cam.showThermal, 'opacity-0': !cam.showThermal}\"></div>\n\n        <div *ngIf=\"cam.file\" class=\"absolute top-2 right-2 bg-black/80 px-2 py-1 rounded border border-slate-600 z-20\">\n          <p class=\"text-xl font-mono font-bold\" [ngClass]=\"{'text-green-400': !cam.showThermal, 'text-red-500': cam.showThermal}\">\n            {{ cam.isAnalyzing ? '--' : cam.liveCount }}\n          </p>\n        </div>\n      </div>\n\n      <div class=\"p-4 bg-[#1e293b] flex-grow flex flex-col justify-between\">\n        \n        <div *ngIf=\"cam.file && !cam.analysisResult && !cam.isAnalyzing\" class=\"flex justify-between items-center w-full\">\n          <button (click)=\"analyzeCamera(i)\" class=\"bg-blue-600 hover:bg-blue-500 text-white text-xs px-4 py-2 rounded font-bold w-full mr-2\">Scan Current Feed</button>\n          <button (click)=\"clearCamera(i)\" class=\"bg-slate-700 hover:bg-slate-600 text-white text-xs p-2 rounded\">\n            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path></svg>\n          </button>\n        </div>\n\n        <div *ngIf=\"cam.analysisResult\" class=\"text-sm\">\n          \n          <div *ngIf=\"cam.showThermal\" class=\"mb-2\">\n            <p class=\"text-red-400 font-bold text-xs flex items-center mb-1\">\n              <svg class=\"w-4 h-4 mr-1 animate-pulse\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z\" clip-rule=\"evenodd\"></path></svg>\n              SMS DISPATCHED:\n            </p>\n            <ul class=\"text-[10px] text-gray-300 bg-red-500/10 p-2 rounded border border-red-500/20 max-h-16 overflow-y-auto\">\n              <li *ngFor=\"let msg of cam.analysisResult.messagesSent\">‚úì {{ msg }}</li>\n              <li *ngIf=\"cam.analysisResult.messagesSent.length === 0\" class=\"text-orange-400\">‚ö†Ô∏è No guards assigned here.</li>\n            </ul>\n          </div>\n\n          <div *ngIf=\"!cam.showThermal\" class=\"text-green-400 text-xs font-bold bg-green-500/10 p-2 rounded border border-green-500/20 text-center\">\n            Crowd Levels Normal. No action required.\n          </div>\n\n          <button (click)=\"clearCamera(i)\" class=\"mt-3 text-xs text-gray-400 hover:text-white underline w-full text-center\">Reset Camera</button>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}