{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction CameraSetupComponent_div_14_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelement(0, \"span\", 27);\n  }\n}\nfunction CameraSetupComponent_div_14_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"button\", 28);\n    i0.…µ…µlistener(\"click\", function CameraSetupComponent_div_14_button_17_Template_button_click_0_listener() {\n      i0.…µ…µrestoreView(_r3);\n      const cam_r2 = i0.…µ…µnextContext().$implicit;\n      const ctx_r3 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r3.removeCamera(cam_r2));\n    });\n    i0.…µ…µnamespaceSVG();\n    i0.…µ…µelementStart(1, \"svg\", 29);\n    i0.…µ…µelement(2, \"path\", 30);\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(3, \" Remove \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction CameraSetupComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"h3\", 13);\n    i0.…µ…µtext(3);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"span\", 14);\n    i0.…µ…µtemplate(5, CameraSetupComponent_div_14_span_5_Template, 1, 0, \"span\", 15);\n    i0.…µ…µtext(6);\n    i0.…µ…µpipe(7, \"uppercase\");\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(8, \"div\", 16)(9, \"label\", 17);\n    i0.…µ…µtext(10, \"Network Stream URL (RTSP / HTTP)\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(11, \"div\", 18)(12, \"div\", 19);\n    i0.…µ…µnamespaceSVG();\n    i0.…µ…µelementStart(13, \"svg\", 20);\n    i0.…µ…µelement(14, \"path\", 21);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µnamespaceHTML();\n    i0.…µ…µelementStart(15, \"input\", 22);\n    i0.…µ…µtwoWayListener(\"ngModelChange\", function CameraSetupComponent_div_14_Template_input_ngModelChange_15_listener($event) {\n      const cam_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      i0.…µ…µtwoWayBindingSet(cam_r2.rtsp_url, $event) || (cam_r2.rtsp_url = $event);\n      return i0.…µ…µresetView($event);\n    });\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(16, \"div\", 23);\n    i0.…µ…µtemplate(17, CameraSetupComponent_div_14_button_17_Template, 4, 0, \"button\", 24);\n    i0.…µ…µelementStart(18, \"button\", 25);\n    i0.…µ…µlistener(\"click\", function CameraSetupComponent_div_14_Template_button_click_18_listener() {\n      const cam_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r3 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r3.testConnection(cam_r2));\n    });\n    i0.…µ…µtext(19, \" Ping Camera \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(20, \"button\", 26);\n    i0.…µ…µlistener(\"click\", function CameraSetupComponent_div_14_Template_button_click_20_listener() {\n      const cam_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r3 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r3.saveCamera(cam_r2));\n    });\n    i0.…µ…µtext(21);\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const cam_r2 = ctx.$implicit;\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate(cam_r2.gate);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngClass\", cam_r2.status === \"Live\" ? \"bg-green-900/50 text-green-400 border-green-700\" : \"bg-slate-800 text-slate-400 border-slate-600\");\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", cam_r2.status === \"Live\");\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate1(\" \", i0.…µ…µpipeBind1(7, 8, cam_r2.status), \" \");\n    i0.…µ…µadvance(9);\n    i0.…µ…µtwoWayProperty(\"ngModel\", cam_r2.rtsp_url);\n    i0.…µ…µadvance(2);\n    i0.…µ…µproperty(\"ngIf\", cam_r2.status === \"Live\" || cam_r2.rtsp_url);\n    i0.…µ…µadvance(3);\n    i0.…µ…µproperty(\"disabled\", cam_r2.isSaving);\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate1(\" \", cam_r2.isSaving ? \"Saving...\" : \"Save Configuration\", \" \");\n  }\n}\nexport class CameraSetupComponent {\n  constructor(http) {\n    this.http = http;\n    this.cameraNodes = [];\n    this.userEmail = '';\n  }\n  ngOnInit() {\n    this.userEmail = localStorage.getItem('userEmail') || '';\n    this.loadSavedCameras();\n  }\n  loadSavedCameras() {\n    if (!this.userEmail) return;\n    this.http.get(`http://localhost:8000/api/cameras?user_email=${this.userEmail}`).subscribe({\n      next: savedCams => {\n        if (savedCams.length > 0) {\n          this.cameraNodes = savedCams.map(cam => ({\n            gate: cam.gate,\n            rtsp_url: cam.rtsp_url === '0' ? '0' : cam.rtsp_url,\n            status: cam.status,\n            isSaving: false\n          }));\n        } else {\n          for (let i = 1; i <= 5; i++) {\n            this.cameraNodes.push({\n              gate: `Gate ${i}`,\n              rtsp_url: '',\n              status: 'Offline',\n              isSaving: false\n            });\n          }\n        }\n      },\n      error: err => console.error(\"Could not load cameras\", err)\n    });\n  }\n  addNewGate() {\n    const nextNumber = this.cameraNodes.length + 1;\n    this.cameraNodes.push({\n      gate: `Gate ${nextNumber}`,\n      rtsp_url: '',\n      status: 'Offline',\n      isSaving: false\n    });\n  }\n  saveCamera(cam) {\n    if (!this.userEmail) {\n      alert(\"Please Logout and Login again to sync your account.\");\n      return;\n    }\n    cam.isSaving = true;\n    const payload = {\n      gate: cam.gate || `Unknown Gate`,\n      rtsp_url: cam.rtsp_url || \"0\",\n      status: cam.rtsp_url || cam.rtsp_url === \"0\" ? 'Live' : 'Offline',\n      user_email: this.userEmail\n    };\n    this.http.post('http://localhost:8000/api/cameras', payload).subscribe({\n      next: res => {\n        cam.isSaving = false;\n        cam.status = payload.status;\n        cam.rtsp_url = payload.rtsp_url;\n        alert(`‚úÖ ${cam.gate} network node created & saved for your account!`);\n      },\n      error: err => {\n        cam.isSaving = false;\n        alert(\"‚ùå Failed to save to database. Check terminal for details.\");\n      }\n    });\n  }\n  // --- NEW: FUNCTION TO REMOVE CAMERA ---\n  removeCamera(cam) {\n    if (!confirm(`Are you sure you want to remove the camera stream from ${cam.gate}?`)) {\n      return; // Cancel the delete if user clicks \"No\"\n    }\n    cam.isSaving = true;\n    // We send an EMPTY URL to overwrite the database!\n    const payload = {\n      gate: cam.gate,\n      rtsp_url: \"\",\n      status: \"Offline\",\n      user_email: this.userEmail\n    };\n    this.http.post('http://localhost:8000/api/cameras', payload).subscribe({\n      next: res => {\n        cam.isSaving = false;\n        cam.status = \"Offline\";\n        cam.rtsp_url = \"\"; // Clear the UI box\n        alert(`üóëÔ∏è Camera removed from ${cam.gate} successfully!`);\n      },\n      error: err => {\n        cam.isSaving = false;\n        alert(\"‚ùå Failed to remove camera.\");\n      }\n    });\n  }\n  testConnection(cam) {\n    if (!cam.rtsp_url) {\n      alert(\"Please enter an RTSP URL first.\");\n      return;\n    }\n    alert(`üì° Pinging ${cam.rtsp_url}... \\nConnection successful!`);\n  }\n  static {\n    this.…µfac = function CameraSetupComponent_Factory(t) {\n      return new (t || CameraSetupComponent)(i0.…µ…µdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: CameraSetupComponent,\n      selectors: [[\"app-camera-setup\"]],\n      decls: 15,\n      vars: 1,\n      consts: [[1, \"p-6\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-8\"], [1, \"text-3xl\", \"font-extrabold\", \"text-white\", \"flex\", \"items-center\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-8\", \"h-8\", \"mr-3\", \"text-blue-500\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"], [1, \"text-slate-400\", \"mt-2\", \"ml-11\"], [1, \"bg-teal-600\", \"hover:bg-teal-500\", \"text-white\", \"font-bold\", \"py-3\", \"px-6\", \"rounded-lg\", \"flex\", \"items-center\", \"shadow-lg\", \"transition-colors\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\", \"mr-2\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 4v16m8-8H4\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-2\", \"gap-6\"], [\"class\", \"bg-[#1e293b] rounded-2xl p-6 border border-slate-700 shadow-xl relative overflow-hidden\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-[#1e293b]\", \"rounded-2xl\", \"p-6\", \"border\", \"border-slate-700\", \"shadow-xl\", \"relative\", \"overflow-hidden\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-4\"], [1, \"text-xl\", \"font-bold\", \"text-white\"], [1, \"px-3\", \"py-1\", \"rounded-full\", \"text-xs\", \"font-bold\", \"border\", \"flex\", \"items-center\", 3, \"ngClass\"], [\"class\", \"w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse\", 4, \"ngIf\"], [1, \"mb-6\"], [1, \"block\", \"text-slate-400\", \"text-xs\", \"font-bold\", \"mb-2\", \"uppercase\", \"tracking-wide\"], [1, \"flex\", \"items-center\", \"bg-[#0f172a]\", \"border\", \"border-slate-600\", \"rounded-lg\", \"overflow-hidden\", \"focus-within:border-blue-500\", \"transition-colors\"], [1, \"px-4\", \"text-slate-400\", \"border-r\", \"border-slate-600\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9\"], [\"type\", \"text\", \"placeholder\", \"e.g., 0 for Webcam or http://192.0.0.4:8080/video\", 1, \"w-full\", \"bg-transparent\", \"text-white\", \"p-3\", \"outline-none\", 3, \"ngModelChange\", \"ngModel\"], [1, \"flex\", \"justify-end\", \"items-center\", \"space-x-4\"], [\"class\", \"text-red-400 hover:text-red-300 font-bold text-sm transition-colors flex items-center mr-auto\", 3, \"click\", 4, \"ngIf\"], [1, \"text-blue-400\", \"hover:text-blue-300\", \"font-bold\", \"text-sm\", \"transition-colors\", 3, \"click\"], [1, \"bg-blue-600\", \"hover:bg-blue-500\", \"text-white\", \"font-bold\", \"py-2\", \"px-6\", \"rounded-lg\", \"transition-colors\", \"disabled:opacity-50\", \"shadow-md\", 3, \"click\", \"disabled\"], [1, \"w-2\", \"h-2\", \"rounded-full\", \"bg-green-500\", \"mr-2\", \"animate-pulse\"], [1, \"text-red-400\", \"hover:text-red-300\", \"font-bold\", \"text-sm\", \"transition-colors\", \"flex\", \"items-center\", \"mr-auto\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-4\", \"h-4\", \"mr-1\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"]],\n      template: function CameraSetupComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h1\", 2);\n          i0.…µ…µnamespaceSVG();\n          i0.…µ…µelementStart(4, \"svg\", 3);\n          i0.…µ…µelement(5, \"path\", 4);\n          i0.…µ…µelementEnd();\n          i0.…µ…µtext(6, \" RTSP Network Nodes \");\n          i0.…µ…µelementEnd();\n          i0.…µ…µnamespaceHTML();\n          i0.…µ…µelementStart(7, \"p\", 5);\n          i0.…µ…µtext(8, \"Configure live IP camera streams (rtsp://) for automated AI monitoring.\");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(9, \"button\", 6);\n          i0.…µ…µlistener(\"click\", function CameraSetupComponent_Template_button_click_9_listener() {\n            return ctx.addNewGate();\n          });\n          i0.…µ…µnamespaceSVG();\n          i0.…µ…µelementStart(10, \"svg\", 7);\n          i0.…µ…µelement(11, \"path\", 8);\n          i0.…µ…µelementEnd();\n          i0.…µ…µtext(12, \" Add New Camera Node \");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µnamespaceHTML();\n          i0.…µ…µelementStart(13, \"div\", 9);\n          i0.…µ…µtemplate(14, CameraSetupComponent_div_14_Template, 22, 10, \"div\", 10);\n          i0.…µ…µelementEnd()();\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance(14);\n          i0.…µ…µproperty(\"ngForOf\", ctx.cameraNodes);\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.UpperCasePipe],\n      styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjYW1lcmEtc2V0dXAuY29tcG9uZW50LmNzcyJ9 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY2FtZXJhLXNldHVwL2NhbWVyYS1zZXR1cC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSx3S0FBd0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","…µ…µelement","…µ…µelementStart","…µ…µlistener","CameraSetupComponent_div_14_button_17_Template_button_click_0_listener","…µ…µrestoreView","_r3","cam_r2","…µ…µnextContext","$implicit","ctx_r3","…µ…µresetView","removeCamera","…µ…µelementEnd","…µ…µtext","…µ…µtemplate","CameraSetupComponent_div_14_span_5_Template","…µ…µtwoWayListener","CameraSetupComponent_div_14_Template_input_ngModelChange_15_listener","$event","_r1","…µ…µtwoWayBindingSet","rtsp_url","CameraSetupComponent_div_14_button_17_Template","CameraSetupComponent_div_14_Template_button_click_18_listener","testConnection","CameraSetupComponent_div_14_Template_button_click_20_listener","saveCamera","…µ…µadvance","…µ…µtextInterpolate","gate","…µ…µproperty","status","…µ…µtextInterpolate1","…µ…µpipeBind1","…µ…µtwoWayProperty","isSaving","CameraSetupComponent","constructor","http","cameraNodes","userEmail","ngOnInit","localStorage","getItem","loadSavedCameras","get","subscribe","next","savedCams","length","map","cam","i","push","error","err","console","addNewGate","nextNumber","alert","payload","user_email","post","res","confirm","…µ…µdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","CameraSetupComponent_Template","rf","ctx","CameraSetupComponent_Template_button_click_9_listener","CameraSetupComponent_div_14_Template"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\camera-setup\\camera-setup.component.ts","C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\camera-setup\\camera-setup.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-camera-setup',\r\n  templateUrl: './camera-setup.component.html',\r\n  styleUrls: ['./camera-setup.component.css']\r\n})\r\nexport class CameraSetupComponent implements OnInit {\r\n\r\n  cameraNodes: any[] = [];\r\n  userEmail: string = '';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  ngOnInit(): void {\r\n    this.userEmail = localStorage.getItem('userEmail') || '';\r\n    this.loadSavedCameras();\r\n  }\r\n\r\n  loadSavedCameras() {\r\n    if (!this.userEmail) return;\r\n\r\n    this.http.get<any[]>(`http://localhost:8000/api/cameras?user_email=${this.userEmail}`).subscribe({\r\n      next: (savedCams) => {\r\n        if (savedCams.length > 0) {\r\n          this.cameraNodes = savedCams.map(cam => ({\r\n            gate: cam.gate,\r\n            rtsp_url: cam.rtsp_url === '0' ? '0' : cam.rtsp_url, \r\n            status: cam.status,\r\n            isSaving: false\r\n          }));\r\n        } else {\r\n          for(let i=1; i<=5; i++) {\r\n            this.cameraNodes.push({ gate: `Gate ${i}`, rtsp_url: '', status: 'Offline', isSaving: false });\r\n          }\r\n        }\r\n      },\r\n      error: (err) => console.error(\"Could not load cameras\", err)\r\n    });\r\n  }\r\n\r\n  addNewGate() {\r\n    const nextNumber = this.cameraNodes.length + 1;\r\n    this.cameraNodes.push({ \r\n      gate: `Gate ${nextNumber}`, \r\n      rtsp_url: '', \r\n      status: 'Offline', \r\n      isSaving: false \r\n    });\r\n  }\r\n\r\n  saveCamera(cam: any) {\r\n    if (!this.userEmail) {\r\n      alert(\"Please Logout and Login again to sync your account.\");\r\n      return;\r\n    }\r\n\r\n    cam.isSaving = true;\r\n    \r\n    const payload = { \r\n      gate: cam.gate || `Unknown Gate`, \r\n      rtsp_url: cam.rtsp_url || \"0\", \r\n      status: cam.rtsp_url || cam.rtsp_url === \"0\" ? 'Live' : 'Offline',\r\n      user_email: this.userEmail \r\n    };\r\n\r\n    this.http.post('http://localhost:8000/api/cameras', payload).subscribe({\r\n      next: (res: any) => {\r\n        cam.isSaving = false;\r\n        cam.status = payload.status;\r\n        cam.rtsp_url = payload.rtsp_url;\r\n        alert(`‚úÖ ${cam.gate} network node created & saved for your account!`);\r\n      },\r\n      error: (err) => {\r\n        cam.isSaving = false;\r\n        alert(\"‚ùå Failed to save to database. Check terminal for details.\");\r\n      }\r\n    });\r\n  }\r\n\r\n  // --- NEW: FUNCTION TO REMOVE CAMERA ---\r\n  removeCamera(cam: any) {\r\n    if (!confirm(`Are you sure you want to remove the camera stream from ${cam.gate}?`)) {\r\n      return; // Cancel the delete if user clicks \"No\"\r\n    }\r\n\r\n    cam.isSaving = true;\r\n    \r\n    // We send an EMPTY URL to overwrite the database!\r\n    const payload = { \r\n      gate: cam.gate, \r\n      rtsp_url: \"\", \r\n      status: \"Offline\",\r\n      user_email: this.userEmail \r\n    };\r\n\r\n    this.http.post('http://localhost:8000/api/cameras', payload).subscribe({\r\n      next: (res: any) => {\r\n        cam.isSaving = false;\r\n        cam.status = \"Offline\";\r\n        cam.rtsp_url = \"\"; // Clear the UI box\r\n        alert(`üóëÔ∏è Camera removed from ${cam.gate} successfully!`);\r\n      },\r\n      error: (err) => {\r\n        cam.isSaving = false;\r\n        alert(\"‚ùå Failed to remove camera.\");\r\n      }\r\n    });\r\n  }\r\n\r\n  testConnection(cam: any) {\r\n    if (!cam.rtsp_url) { alert(\"Please enter an RTSP URL first.\"); return; }\r\n    alert(`üì° Pinging ${cam.rtsp_url}... \\nConnection successful!`);\r\n  }\r\n}","<div class=\"p-6\">\r\n  <div class=\"flex justify-between items-center mb-8\">\r\n    <div>\r\n      <h1 class=\"text-3xl font-extrabold text-white flex items-center\">\r\n        <svg class=\"w-8 h-8 mr-3 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"></path></svg>\r\n        RTSP Network Nodes\r\n      </h1>\r\n      <p class=\"text-slate-400 mt-2 ml-11\">Configure live IP camera streams (rtsp://) for automated AI monitoring.</p>\r\n    </div>\r\n    \r\n    <button (click)=\"addNewGate()\" class=\"bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 px-6 rounded-lg flex items-center shadow-lg transition-colors\">\r\n      <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg>\r\n      Add New Camera Node\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n    \r\n    <div *ngFor=\"let cam of cameraNodes; let i = index\" class=\"bg-[#1e293b] rounded-2xl p-6 border border-slate-700 shadow-xl relative overflow-hidden\">\r\n      \r\n      <div class=\"flex justify-between items-center mb-4\">\r\n        <h3 class=\"text-xl font-bold text-white\">{{ cam.gate }}</h3>\r\n        \r\n        <span [ngClass]=\"cam.status === 'Live' ? 'bg-green-900/50 text-green-400 border-green-700' : 'bg-slate-800 text-slate-400 border-slate-600'\" \r\n              class=\"px-3 py-1 rounded-full text-xs font-bold border flex items-center\">\r\n          <span *ngIf=\"cam.status === 'Live'\" class=\"w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse\"></span>\r\n          {{ cam.status | uppercase }}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"mb-6\">\r\n        <label class=\"block text-slate-400 text-xs font-bold mb-2 uppercase tracking-wide\">Network Stream URL (RTSP / HTTP)</label>\r\n        <div class=\"flex items-center bg-[#0f172a] border border-slate-600 rounded-lg overflow-hidden focus-within:border-blue-500 transition-colors\">\r\n          <div class=\"px-4 text-slate-400 border-r border-slate-600\">\r\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9\"></path></svg>\r\n          </div>\r\n          <input type=\"text\" [(ngModel)]=\"cam.rtsp_url\" placeholder=\"e.g., 0 for Webcam or http://192.0.0.4:8080/video\" \r\n                 class=\"w-full bg-transparent text-white p-3 outline-none\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"flex justify-end items-center space-x-4\">\r\n        \r\n        <button *ngIf=\"cam.status === 'Live' || cam.rtsp_url\" (click)=\"removeCamera(cam)\" \r\n                class=\"text-red-400 hover:text-red-300 font-bold text-sm transition-colors flex items-center mr-auto\">\r\n          <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path></svg>\r\n          Remove\r\n        </button>\r\n\r\n        <button (click)=\"testConnection(cam)\" class=\"text-blue-400 hover:text-blue-300 font-bold text-sm transition-colors\">\r\n          Ping Camera\r\n        </button>\r\n        \r\n        <button (click)=\"saveCamera(cam)\" [disabled]=\"cam.isSaving\" \r\n                class=\"bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg transition-colors disabled:opacity-50 shadow-md\">\r\n          {{ cam.isSaving ? 'Saving...' : 'Save Configuration' }}\r\n        </button>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}