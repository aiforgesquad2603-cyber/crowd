{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class CameraSetupComponent {\n  constructor(http) {\n    this.http = http;\n    // Empty array initially, we will fetch from DB!\n    this.cameraNodes = [];\n  }\n  ngOnInit() {\n    this.loadSavedCameras();\n  }\n  loadSavedCameras() {\n    this.http.get('http://localhost:8000/api/cameras').subscribe({\n      next: savedCams => {\n        if (savedCams.length > 0) {\n          // If database has cameras, load them!\n          this.cameraNodes = savedCams.map(cam => ({\n            gate: cam.gate,\n            rtsp_url: cam.rtsp_url,\n            status: cam.status,\n            isSaving: false\n          }));\n        } else {\n          // If database is empty, create 5 default gates\n          for (let i = 1; i <= 5; i++) {\n            this.cameraNodes.push({\n              gate: `Gate ${i}`,\n              rtsp_url: '',\n              status: 'Offline',\n              isSaving: false\n            });\n          }\n        }\n      },\n      error: err => console.error(\"Could not load cameras\", err)\n    });\n  }\n  // --- NEW MAGIC FUNCTION ---\n  addNewGate() {\n    const nextNumber = this.cameraNodes.length + 1;\n    this.cameraNodes.push({\n      gate: `Gate ${nextNumber}`,\n      rtsp_url: '',\n      status: 'Offline',\n      isSaving: false\n    });\n    // Page scroll to bottom so they see the new card\n    setTimeout(() => window.scrollTo(0, document.body.scrollHeight), 100);\n  }\n  saveCamera(cam) {\n    cam.isSaving = true;\n    const payload = {\n      gate: cam.gate,\n      rtsp_url: cam.rtsp_url,\n      status: cam.rtsp_url ? 'Live' : 'Offline'\n    };\n    this.http.post('http://localhost:8000/api/cameras', payload).subscribe({\n      next: res => {\n        cam.isSaving = false;\n        cam.status = payload.status;\n        alert(`‚úÖ ${cam.gate} network node created & saved!`);\n      },\n      error: err => {\n        cam.isSaving = false;\n        alert(\"‚ùå Failed to save to database.\");\n      }\n    });\n  }\n  testConnection(cam) {\n    if (!cam.rtsp_url) {\n      alert(\"Please enter an RTSP URL first.\");\n      return;\n    }\n    alert(`üì° Pinging ${cam.rtsp_url}... \\nConnection successful!`);\n  }\n  static {\n    this.…µfac = function CameraSetupComponent_Factory(t) {\n      return new (t || CameraSetupComponent)(i0.…µ…µdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: CameraSetupComponent,\n      selectors: [[\"app-camera-setup\"]],\n      decls: 12,\n      vars: 0,\n      consts: [[1, \"mb-8\", \"border-b\", \"border-slate-700/50\", \"pb-5\", \"flex\", \"justify-between\", \"items-center\"], [1, \"text-3xl\", \"font-bold\", \"text-white\", \"tracking-wide\", \"flex\", \"items-center\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-8\", \"h-8\", \"mr-3\", \"text-blue-500\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"], [1, \"text-sm\", \"text-gray-400\", \"mt-2\", \"ml-11\"], [1, \"bg-teal-600\", \"hover:bg-teal-500\", \"text-white\", \"px-5\", \"py-2.5\", \"rounded-lg\", \"font-bold\", \"shadow-lg\", \"flex\", \"items-center\", \"transition-all\", \"transform\", \"hover:scale-105\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\", \"mr-2\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 4v16m8-8H4\"]],\n      template: function CameraSetupComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\", 0)(1, \"div\")(2, \"h1\", 1);\n          i0.…µ…µnamespaceSVG();\n          i0.…µ…µelementStart(3, \"svg\", 2);\n          i0.…µ…µelement(4, \"path\", 3);\n          i0.…µ…µelementEnd();\n          i0.…µ…µtext(5, \" RTSP Network Nodes \");\n          i0.…µ…µelementEnd();\n          i0.…µ…µnamespaceHTML();\n          i0.…µ…µelementStart(6, \"p\", 4);\n          i0.…µ…µtext(7, \"Configure live IP camera streams (rtsp://) for automated AI monitoring.\");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(8, \"button\", 5);\n          i0.…µ…µlistener(\"click\", function CameraSetupComponent_Template_button_click_8_listener() {\n            return ctx.addNewGate();\n          });\n          i0.…µ…µnamespaceSVG();\n          i0.…µ…µelementStart(9, \"svg\", 6);\n          i0.…µ…µelement(10, \"path\", 7);\n          i0.…µ…µelementEnd();\n          i0.…µ…µtext(11, \" Add New Camera Node \");\n          i0.…µ…µelementEnd()();\n        }\n      },\n      styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjYW1lcmEtc2V0dXAuY29tcG9uZW50LmNzcyJ9 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY2FtZXJhLXNldHVwL2NhbWVyYS1zZXR1cC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSx3S0FBd0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["CameraSetupComponent","constructor","http","cameraNodes","ngOnInit","loadSavedCameras","get","subscribe","next","savedCams","length","map","cam","gate","rtsp_url","status","isSaving","i","push","error","err","console","addNewGate","nextNumber","setTimeout","window","scrollTo","document","body","scrollHeight","saveCamera","payload","post","res","alert","testConnection","i0","…µ…µdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","CameraSetupComponent_Template","rf","ctx","…µ…µelementStart","…µ…µelement","…µ…µelementEnd","…µ…µtext","…µ…µlistener","CameraSetupComponent_Template_button_click_8_listener"],"sources":["C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\camera-setup\\camera-setup.component.ts","C:\\Users\\sanja\\OneDrive\\Desktop\\crowdguardai\\frontend\\src\\app\\pages\\camera-setup\\camera-setup.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-camera-setup',\r\n  templateUrl: './camera-setup.component.html',\r\n  styleUrls: ['./camera-setup.component.css']\r\n})\r\nexport class CameraSetupComponent implements OnInit {\r\n\r\n  // Empty array initially, we will fetch from DB!\r\n  cameraNodes: any[] = [];\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadSavedCameras();\r\n  }\r\n\r\n  loadSavedCameras() {\r\n    this.http.get<any[]>('http://localhost:8000/api/cameras').subscribe({\r\n      next: (savedCams) => {\r\n        if (savedCams.length > 0) {\r\n          // If database has cameras, load them!\r\n          this.cameraNodes = savedCams.map(cam => ({\r\n            gate: cam.gate,\r\n            rtsp_url: cam.rtsp_url,\r\n            status: cam.status,\r\n            isSaving: false\r\n          }));\r\n        } else {\r\n          // If database is empty, create 5 default gates\r\n          for(let i=1; i<=5; i++) {\r\n            this.cameraNodes.push({ gate: `Gate ${i}`, rtsp_url: '', status: 'Offline', isSaving: false });\r\n          }\r\n        }\r\n      },\r\n      error: (err) => console.error(\"Could not load cameras\", err)\r\n    });\r\n  }\r\n\r\n  // --- NEW MAGIC FUNCTION ---\r\n  addNewGate() {\r\n    const nextNumber = this.cameraNodes.length + 1;\r\n    this.cameraNodes.push({ \r\n      gate: `Gate ${nextNumber}`, \r\n      rtsp_url: '', \r\n      status: 'Offline', \r\n      isSaving: false \r\n    });\r\n    // Page scroll to bottom so they see the new card\r\n    setTimeout(() => window.scrollTo(0, document.body.scrollHeight), 100);\r\n  }\r\n\r\n  saveCamera(cam: any) {\r\n    cam.isSaving = true;\r\n    const payload = { gate: cam.gate, rtsp_url: cam.rtsp_url, status: cam.rtsp_url ? 'Live' : 'Offline' };\r\n\r\n    this.http.post('http://localhost:8000/api/cameras', payload).subscribe({\r\n      next: (res: any) => {\r\n        cam.isSaving = false;\r\n        cam.status = payload.status;\r\n        alert(`‚úÖ ${cam.gate} network node created & saved!`);\r\n      },\r\n      error: (err) => {\r\n        cam.isSaving = false;\r\n        alert(\"‚ùå Failed to save to database.\");\r\n      }\r\n    });\r\n  }\r\n\r\n  testConnection(cam: any) {\r\n    if (!cam.rtsp_url) { alert(\"Please enter an RTSP URL first.\"); return; }\r\n    alert(`üì° Pinging ${cam.rtsp_url}... \\nConnection successful!`);\r\n  }\r\n}","<div class=\"mb-8 border-b border-slate-700/50 pb-5 flex justify-between items-center\">\r\n    <div>\r\n      <h1 class=\"text-3xl font-bold text-white tracking-wide flex items-center\">\r\n        <svg class=\"w-8 h-8 mr-3 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"></path></svg>\r\n        RTSP Network Nodes\r\n      </h1>\r\n      <p class=\"text-sm text-gray-400 mt-2 ml-11\">Configure live IP camera streams (rtsp://) for automated AI monitoring.</p>\r\n    </div>\r\n    \r\n    <button (click)=\"addNewGate()\" class=\"bg-teal-600 hover:bg-teal-500 text-white px-5 py-2.5 rounded-lg font-bold shadow-lg flex items-center transition-all transform hover:scale-105\">\r\n      <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg>\r\n      Add New Camera Node\r\n    </button>\r\n  </div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}