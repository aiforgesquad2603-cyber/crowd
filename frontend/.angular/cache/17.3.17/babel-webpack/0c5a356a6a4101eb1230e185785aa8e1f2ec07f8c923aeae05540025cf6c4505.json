{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"animate-pulse shadow-[0_0_20px_rgba(239,68,68,0.5)]\": a0\n});\nconst _c1 = (a0, a1) => ({\n  \"text-red-500\": a0,\n  \"text-green-500\": a1\n});\nconst _c2 = (a0, a1) => ({\n  \"bg-red-500/20 text-red-500\": a0,\n  \"bg-green-500/20 text-green-500\": a1\n});\nconst _c3 = (a0, a1) => ({\n  \"bg-green-500 animate-pulse\": a0,\n  \"bg-gray-500\": a1\n});\nfunction DashboardComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 24);\n    i0.ɵɵelement(2, \"path\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"h3\", 26);\n    i0.ɵɵtext(4, \"Cameras Offline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 27);\n    i0.ɵɵtext(6, \"Go to the RTSP Setup tab to configure live IP cameras.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardComponent_div_39_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31);\n    i0.ɵɵelement(2, \"div\", 32);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"img\", 33);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cam_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", cam_r1.gate, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", \"http://localhost:8000/api/video-feed/\" + cam_r1.gate + \"?mode=object\", i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DashboardComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtemplate(1, DashboardComponent_div_39_div_1_Template, 5, 2, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.activeCameras);\n  }\n}\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    constructor(http) {\n      this.http = http;\n      // Dynamic Variables\n      this.policeDeployed = 0;\n      this.totalCrowdEstimate = 1450;\n      this.activeAlerts = 0;\n      // To store cameras that actually have RTSP links\n      this.activeCameras = [];\n    }\n    ngOnInit() {\n      this.fetchRealTimeData();\n      // Simulates a live changing crowd count for the Hackathon Demo!\n      this.crowdInterval = setInterval(() => {\n        // Randomly increase or decrease crowd by -5 to +10\n        const change = Math.floor(Math.random() * 16) - 5;\n        this.totalCrowdEstimate += change;\n        // Dynamic Alert Logic\n        if (this.totalCrowdEstimate > 1600) {\n          this.activeAlerts = 2; // Critical High\n        } else if (this.totalCrowdEstimate > 1500) {\n          this.activeAlerts = 1; // Warning\n        } else {\n          this.activeAlerts = 0; // Normal\n        }\n      }, 3000); // Changes every 3 seconds\n    }\n    fetchRealTimeData() {\n      // 1. Get exact number of Guards deployed from MongoDB\n      this.http.get('http://localhost:8000/api/guards').subscribe({\n        next: guards => {\n          this.policeDeployed = guards.length;\n        },\n        error: err => console.error(err)\n      });\n      // 2. Get all configured Cameras from MongoDB\n      this.http.get('http://localhost:8000/api/cameras').subscribe({\n        next: cams => {\n          // Filter out offline cameras, only keep ones with URLs\n          this.activeCameras = cams.filter(c => c.rtsp_url && c.rtsp_url.trim() !== '');\n        },\n        error: err => console.error(err)\n      });\n    }\n    ngOnDestroy() {\n      // Stop the timer when we leave the page\n      if (this.crowdInterval) {\n        clearInterval(this.crowdInterval);\n      }\n    }\n    static {\n      this.ɵfac = function DashboardComponent_Factory(t) {\n        return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DashboardComponent,\n        selectors: [[\"app-dashboard\"]],\n        decls: 40,\n        vars: 20,\n        consts: [[1, \"min-h-screen\", \"bg-[#0f172a]\", \"p-6\", \"lg:p-8\", \"font-sans\", \"text-gray-300\"], [1, \"mb-8\", \"border-b\", \"border-slate-700/50\", \"pb-5\"], [1, \"text-3xl\", \"font-bold\", \"text-white\", \"tracking-wide\"], [1, \"text-sm\", \"text-gray-400\", \"mt-2\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-3\", \"gap-6\", \"mb-8\"], [1, \"bg-[#1e293b]\", \"border-l-4\", \"border-blue-500\", \"rounded-xl\", \"p-6\", \"shadow-lg\", \"flex\", \"justify-between\", \"items-center\", \"transition-all\", \"hover:scale-105\", \"duration-300\"], [1, \"text-sm\", \"text-gray-400\", \"font-bold\", \"mb-1\"], [1, \"text-4xl\", \"font-bold\", \"text-white\"], [1, \"p-3\", \"bg-blue-500/20\", \"rounded-lg\", \"text-blue-400\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-8\", \"h-8\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"], [1, \"bg-[#1e293b]\", \"border-l-4\", \"border-orange-500\", \"rounded-xl\", \"p-6\", \"shadow-lg\", \"flex\", \"justify-between\", \"items-center\", \"transition-all\", \"hover:scale-105\", \"duration-300\"], [1, \"p-3\", \"bg-orange-500/20\", \"rounded-lg\", \"text-orange-400\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"], [1, \"bg-[#1e293b]\", \"border-l-4\", \"border-red-500\", \"rounded-xl\", \"p-6\", \"shadow-lg\", \"flex\", \"justify-between\", \"items-center\", \"transition-all\", \"duration-300\", 3, \"ngClass\"], [1, \"text-4xl\", \"font-bold\", 3, \"ngClass\"], [1, \"p-3\", \"rounded-lg\", 3, \"ngClass\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"], [1, \"bg-[#1e293b]\", \"rounded-xl\", \"border\", \"border-slate-700/50\", \"p-6\", \"shadow-xl\"], [1, \"text-xl\", \"font-bold\", \"text-white\", \"mb-6\", \"flex\", \"items-center\"], [1, \"w-3\", \"h-3\", \"rounded-full\", \"mr-3\", 3, \"ngClass\"], [\"class\", \"border-2 border-dashed border-slate-600 rounded-xl p-16 text-center bg-[#0f172a]/50\", 4, \"ngIf\"], [\"class\", \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\", 4, \"ngIf\"], [1, \"border-2\", \"border-dashed\", \"border-slate-600\", \"rounded-xl\", \"p-16\", \"text-center\", \"bg-[#0f172a]/50\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-16\", \"h-16\", \"text-slate-500\", \"mx-auto\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"], [1, \"text-2xl\", \"font-bold\", \"text-gray-400\"], [1, \"text-sm\", \"text-gray-500\", \"mt-2\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-3\", \"gap-6\"], [\"class\", \"bg-black rounded-lg overflow-hidden border border-slate-600 relative aspect-video shadow-lg group\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-black\", \"rounded-lg\", \"overflow-hidden\", \"border\", \"border-slate-600\", \"relative\", \"aspect-video\", \"shadow-lg\", \"group\"], [1, \"absolute\", \"top-3\", \"left-3\", \"bg-black/80\", \"px-3\", \"py-1.5\", \"rounded\", \"text-xs\", \"font-bold\", \"text-white\", \"border\", \"border-slate-500\", \"z-10\", \"flex\", \"items-center\"], [1, \"w-2\", \"h-2\", \"bg-red-500\", \"rounded-full\", \"animate-pulse\", \"mr-2\"], [\"alt\", \"Live Feed\", 1, \"w-full\", \"h-full\", \"object-cover\", \"transition-transform\", \"duration-700\", \"group-hover:scale-105\", 3, \"src\"]],\n        template: function DashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n            i0.ɵɵtext(3, \"CrowdGuardAI Live Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 3);\n            i0.ɵɵtext(5, \"Real-time overview of station security, crowd metrics, and AI alerts.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 5)(8, \"div\")(9, \"p\", 6);\n            i0.ɵɵtext(10, \"Police Deployed\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"h2\", 7);\n            i0.ɵɵtext(12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"div\", 8);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(14, \"svg\", 9);\n            i0.ɵɵelement(15, \"path\", 10);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(16, \"div\", 11)(17, \"div\")(18, \"p\", 6);\n            i0.ɵɵtext(19, \"Total Crowd Estimate\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"h2\", 7);\n            i0.ɵɵtext(21);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(22, \"div\", 12);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(23, \"svg\", 9);\n            i0.ɵɵelement(24, \"path\", 13);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(25, \"div\", 14)(26, \"div\")(27, \"p\", 6);\n            i0.ɵɵtext(28, \"Active Critical Alerts\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"h2\", 15);\n            i0.ɵɵtext(30);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(31, \"div\", 16);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(32, \"svg\", 9);\n            i0.ɵɵelement(33, \"path\", 17);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(34, \"div\", 18)(35, \"h2\", 19);\n            i0.ɵɵelement(36, \"div\", 20);\n            i0.ɵɵtext(37, \" Live Command Center Feed \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(38, DashboardComponent_div_38_Template, 7, 0, \"div\", 21)(39, DashboardComponent_div_39_Template, 2, 1, \"div\", 22);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(12);\n            i0.ɵɵtextInterpolate(ctx.policeDeployed);\n            i0.ɵɵadvance(9);\n            i0.ɵɵtextInterpolate(ctx.totalCrowdEstimate);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ctx.activeAlerts > 0));\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(11, _c1, ctx.activeAlerts > 0, ctx.activeAlerts === 0));\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.activeAlerts, \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c2, ctx.activeAlerts > 0, ctx.activeAlerts === 0));\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(17, _c3, ctx.activeCameras.length > 0, ctx.activeCameras.length === 0));\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.activeCameras.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeCameras.length > 0);\n          }\n        },\n        dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf],\n        styles: [\".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0f172a}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#475569}\"]\n      });\n    }\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}